<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Walrus</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        <script type="text/javascript">
          // Hacky check to only load Amplitude in production since we don't have environments:
          const localAddresses = ['localhost', '127.0.0.1', '[::1]'];
          if (localAddresses.indexOf(document.location.hostname) === -1) {
            !function(){"use strict";!function(e,t){var r=e.amplitude||{_q:[],_iq:{}};if(r.invoked)e.console&&console.error&&console.error("Amplitude snippet has been loaded.");else{var n=function(e,t){e.prototype[t]=function(){return this._q.push({name:t,args:Array.prototype.slice.call(arguments,0)}),this}},s=function(e,t,r){return function(n){e._q.push({name:t,args:Array.prototype.slice.call(r,0),resolve:n})}},o=function(e,t,r){e._q.push({name:t,args:Array.prototype.slice.call(r,0)})},i=function(e,t,r){e[t]=function(){if(r)return{promise:new Promise(s(e,t,Array.prototype.slice.call(arguments)))};o(e,t,Array.prototype.slice.call(arguments))}},a=function(e){for(var t=0;t<g.length;t++)i(e,g[t],!1);for(var r=0;r<m.length;r++)i(e,m[r],!0)};r.invoked=!0;var c=t.createElement("script");c.type="text/javascript",c.integrity="sha384-pY2pkwHaLM/6UIseFHVU3hOKr6oAvhLcdYkoRZyaMDWLjpM6B7nTxtOdE823WAOQ",c.crossOrigin="anonymous",c.async=!0,c.src="https://cdn.amplitude.com/libs/analytics-browser-2.11.0-min.js.gz",c.onload=function(){e.amplitude.runQueuedFunctions||console.log("[Amplitude] Error: could not load SDK")};var u=t.getElementsByTagName("script")[0];u.parentNode.insertBefore(c,u);for(var p=function(){return this._q=[],this},l=["add","append","clearAll","prepend","set","setOnce","unset","preInsert","postInsert","remove","getUserProperties"],d=0;d<l.length;d++)n(p,l[d]);r.Identify=p;for(var f=function(){return this._q=[],this},v=["getEventProperties","setProductId","setQuantity","setPrice","setRevenue","setRevenueType","setEventProperties"],y=0;y<v.length;y++)n(f,v[y]);r.Revenue=f;var g=["getDeviceId","setDeviceId","getSessionId","setSessionId","getUserId","setUserId","setOptOut","setTransport","reset","extendSession"],m=["init","add","remove","track","logEvent","identify","groupIdentify","setGroup","revenue","flush"];a(r),r.createInstance=function(e){return r._iq[e]={_q:[]},a(r._iq[e]),r._iq[e]},e.amplitude=r}}(window,document)}();
            amplitude.init('f60df2d0d709d50faa2ffda153a84bc0', { identityStorage:'none', defaultTracking: true });
          }
        </script>
        
        <script>
            function initAskCookbook() {
              // It's a public API key, so it's safe to expose it here
              const PUBLIC_API_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2NzU4Y2YyODM4NTcxODU5MjU0MGIyMDciLCJpYXQiOjE3MzM4NzM0NDgsImV4cCI6MjA0OTQ0OTQ0OH0.Z3cv3HuMkYq3aYZYzCKkkYuM5LI3KG-kuA0R-GaSMV4";
        
              let cookbookContainer = document.getElementById("__cookbook");
              if (!cookbookContainer) {
                cookbookContainer = document.createElement("div");
                cookbookContainer.id = "__cookbook";
                cookbookContainer.dataset.apiKey = PUBLIC_API_KEY;
                document.body.appendChild(cookbookContainer);
              }
        
              let cookbookScript = document.getElementById("__cookbook-script");
              if (!cookbookScript) {
                cookbookScript = document.createElement("script");
                cookbookScript.id = "__cookbook-script";
                cookbookScript.src = "https://cdn.jsdelivr.net/npm/@cookbookdev/docsbot/dist/standalone/index.cjs.js";
                cookbookScript.async = true;
                document.head.appendChild(cookbookScript);
              }
        
        
              const keyPressPropagationBlocker = function (e) {
                e.stopPropagation();
              };
              document.addEventListener("cookbook:modal:state:change", function (e) {
                const isOpen = e.detail.isOpen;
                if (isOpen) {
                  document.body.addEventListener("keydown", keyPressPropagationBlocker, { capture: true });
                } else {
                  document.body.removeEventListener("keydown", keyPressPropagationBlocker, { capture: true });
                }
              });
            }
        
            // Check if the document is already loaded and if so, initialize the script, otherwise wait for the load event
            if (document.readyState === "complete") {
              initAskCookbook();
            } else {
              window.addEventListener("load", initAskCookbook);
            }
          </script>
        
          <meta name="algolia-site-verification" content="BCA21DA2879818D2">

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="docs/mdbook-admonish.css">
        <link rel="stylesheet" href="docs/theme/tabs.css">

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">Walrus</a></li><li class="chapter-item expanded affix "><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Dev Blog</li><li class="chapter-item expanded "><a href="blog/00_intro.html"><strong aria-hidden="true">1.</strong> Blog Preface</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="blog/01_announcing_walrus.html"><strong aria-hidden="true">1.1.</strong> Announcing Walrus</a></li><li class="chapter-item expanded "><a href="blog/02_devnet_update.html"><strong aria-hidden="true">1.2.</strong> Devnet Update</a></li><li class="chapter-item expanded "><a href="blog/03_whitepaper.html"><strong aria-hidden="true">1.3.</strong> Announcing the Walrus Whitepaper</a></li><li class="chapter-item expanded "><a href="blog/04_testnet_update.html"><strong aria-hidden="true">1.4.</strong> Announcing Testnet</a></li><li class="chapter-item expanded "><a href="blog/05_testnet_redeployment.html"><strong aria-hidden="true">1.5.</strong> Announcing Testnet v2</a></li><li class="chapter-item expanded "><a href="blog/06_mainnet.html"><strong aria-hidden="true">1.6.</strong> Announcing Mainnet</a></li></ol></li><li class="chapter-item expanded "><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Usage</li><li class="chapter-item expanded "><a href="usage/started.html"><strong aria-hidden="true">2.</strong> Getting started</a></li><li class="chapter-item expanded "><a href="usage/setup.html"><strong aria-hidden="true">3.</strong> Setup</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="usage/networks.html"><strong aria-hidden="true">3.1.</strong> Available networks</a></li></ol></li><li class="chapter-item expanded "><a href="usage/interacting.html"><strong aria-hidden="true">4.</strong> Interacting with Walrus</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="usage/client-cli.html"><strong aria-hidden="true">4.1.</strong> Using the client CLI</a></li><li class="chapter-item expanded "><a href="usage/json-api.html"><strong aria-hidden="true">4.2.</strong> Using the client JSON API</a></li><li class="chapter-item expanded "><a href="usage/web-api.html"><strong aria-hidden="true">4.3.</strong> Using the client HTTP API</a></li><li class="chapter-item expanded "><a href="usage/sdks.html"><strong aria-hidden="true">4.4.</strong> SDKs and other tools</a></li></ol></li><li class="chapter-item expanded "><a href="dev-guide/dev-guide.html"><strong aria-hidden="true">5.</strong> Developer guide</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="dev-guide/components.html"><strong aria-hidden="true">5.1.</strong> Components</a></li><li class="chapter-item expanded "><a href="dev-guide/dev-operations.html"><strong aria-hidden="true">5.2.</strong> Operations</a></li><li class="chapter-item expanded "><a href="dev-guide/costs.html"><strong aria-hidden="true">5.3.</strong> Storage costs</a></li><li class="chapter-item expanded "><a href="dev-guide/sui-struct.html"><strong aria-hidden="true">5.4.</strong> Sui structures</a></li><li class="chapter-item expanded "><a href="dev-guide/data-security.html"><strong aria-hidden="true">5.5.</strong> Data security</a></li><li class="chapter-item expanded "><a href="usage/quilt.html"><strong aria-hidden="true">5.6.</strong> Quilt</a></li></ol></li><li class="chapter-item expanded "><a href="operator-guide/operator-guide.html"><strong aria-hidden="true">6.</strong> Operator guide</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="operator-guide/aggregator.html"><strong aria-hidden="true">6.1.</strong> Operating an aggregator or publisher</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="operator-guide/auth-publisher.html"><strong aria-hidden="true">6.1.1.</strong> The authenticated publisher</a></li></ol></li><li class="chapter-item expanded "><a href="operator-guide/storage-node.html"><strong aria-hidden="true">6.2.</strong> Operating a storage node</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="operator-guide/commission-governance.html"><strong aria-hidden="true">6.2.1.</strong> Commission and governance</a></li><li class="chapter-item expanded "><a href="operator-guide/backup-restore-guide.html"><strong aria-hidden="true">6.2.2.</strong> Backup and restore</a></li></ol></li><li class="chapter-item expanded "><a href="operator-guide/upload-relay.html"><strong aria-hidden="true">6.3.</strong> Upload relay: functioning and operation</a></li></ol></li><li class="chapter-item expanded "><a href="usage/stake.html"><strong aria-hidden="true">7.</strong> Staking and unstaking</a></li><li class="chapter-item expanded "><a href="usage/examples.html"><strong aria-hidden="true">8.</strong> Examples</a></li><li class="chapter-item expanded "><a href="usage/troubleshooting.html"><strong aria-hidden="true">9.</strong> Troubleshooting</a></li><li class="chapter-item expanded affix "><li class="part-title">Sites</li><li class="chapter-item expanded "><a href="walrus-sites/intro.html"><strong aria-hidden="true">10.</strong> Introduction to Walrus Sites</a></li><li class="chapter-item expanded "><a href="walrus-sites/tutorial.html"><strong aria-hidden="true">11.</strong> Your first Walrus Site</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="walrus-sites/tutorial-install.html"><strong aria-hidden="true">11.1.</strong> Installing the site builder</a></li><li class="chapter-item expanded "><a href="walrus-sites/tutorial-publish.html"><strong aria-hidden="true">11.2.</strong> Publishing a Walrus Site</a></li><li class="chapter-item expanded "><a href="walrus-sites/tutorial-suins.html"><strong aria-hidden="true">11.3.</strong> Set a SuiNS name</a></li></ol></li><li class="chapter-item expanded "><a href="walrus-sites/advanced.html"><strong aria-hidden="true">12.</strong> Advanced functionality</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="walrus-sites/commands.html"><strong aria-hidden="true">12.1.</strong> Site builder commands</a></li><li class="chapter-item expanded "><a href="walrus-sites/builder-config.html"><strong aria-hidden="true">12.2.</strong> Advanced site-builder configuration</a></li><li class="chapter-item expanded "><a href="walrus-sites/routing.html"><strong aria-hidden="true">12.3.</strong> Specifying headers, routing, and metadata</a></li><li class="chapter-item expanded "><a href="walrus-sites/linking.html"><strong aria-hidden="true">12.4.</strong> Linking from and to Walrus Sites</a></li><li class="chapter-item expanded "><a href="walrus-sites/redirects.html"><strong aria-hidden="true">12.5.</strong> Redirecting objects to Walrus Sites</a></li><li class="chapter-item expanded "><a href="walrus-sites/ci-cd.html"><strong aria-hidden="true">12.6.</strong> CI/CD</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="walrus-sites/ci-cd-gh-secrets-vars.html"><strong aria-hidden="true">12.6.1.</strong> Setting up GitHub secrets and vars</a></li><li class="chapter-item expanded "><a href="walrus-sites/ci-cd-gh-workflow.html"><strong aria-hidden="true">12.6.2.</strong> Creating GitHub workflow</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="walrus-sites/overview.html"><strong aria-hidden="true">13.</strong> Technical overview</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="walrus-sites/portal.html"><strong aria-hidden="true">13.1.</strong> The Walrus Sites portal</a></li><li class="chapter-item expanded "><a href="walrus-sites/bring-your-own-domain.html"><strong aria-hidden="true">13.2.</strong> Bring your own domain</a></li><li class="chapter-item expanded "><a href="walrus-sites/authentication.html"><strong aria-hidden="true">13.3.</strong> Site data authentication</a></li><li class="chapter-item expanded "><a href="walrus-sites/restrictions.html"><strong aria-hidden="true">13.4.</strong> Known restrictions</a></li></ol></li><li class="chapter-item expanded "><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Design</li><li class="chapter-item expanded "><a href="design/objectives_use_cases.html"><strong aria-hidden="true">14.</strong> Objectives and use cases</a></li><li class="chapter-item expanded "><a href="design/overview.html"><strong aria-hidden="true">15.</strong> Overview</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="design/architecture.html"><strong aria-hidden="true">15.1.</strong> Architecture</a></li><li class="chapter-item expanded "><a href="design/encoding.html"><strong aria-hidden="true">15.2.</strong> Encoding</a></li></ol></li><li class="chapter-item expanded "><a href="design/operations.html"><strong aria-hidden="true">16.</strong> Operations</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="design/operations-sui.html"><strong aria-hidden="true">16.1.</strong> Sui operations</a></li><li class="chapter-item expanded "><a href="design/operations-off-chain.html"><strong aria-hidden="true">16.2.</strong> Off-chain operations</a></li></ol></li><li class="chapter-item expanded "><a href="design/properties.html"><strong aria-hidden="true">17.</strong> Properties</a></li><li class="chapter-item expanded "><a href="design/future.html"><strong aria-hidden="true">18.</strong> Future discussion</a></li><li class="chapter-item expanded affix "><li class="spacer"></li><li class="chapter-item expanded affix "><a href="glossary.html">Glossary</a></li><li class="chapter-item expanded affix "><a href="legal/testnet_tos.html">Testnet terms of service</a></li><li class="chapter-item expanded affix "><a href="legal/privacy.html">Privacy policy</a></li><li class="chapter-item expanded affix "><a href="legal/walrus_general_tos.html">Walrus general terms of service</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Walrus</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="walrus"><a class="header" href="#walrus">Walrus</a></h1>
<p>Welcome to the developer documentation for Walrus, a decentralized storage and data availability
protocol designed specifically for large binary files, or "blobs". Walrus focuses on providing a
robust but affordable solution for storing unstructured content on decentralized storage nodes
while ensuring high availability and reliability even in the presence of Byzantine faults.</p>
<div id="admonition-fun-fact" class="admonition admonish-tip" role="note" aria-labelledby="admonition-fun-fact-title">
<div class="admonition-title">
<div id="admonition-fun-fact-title">
<p>Fun fact</p>
</div>
<a class="admonition-anchor-link" href="index.html#admonition-fun-fact"></a>
</div>
<div>
<p>If you are viewing this site at <a href="https://docs.wal.app">https://docs.wal.app</a>, you are fetching this from
Walrus behind the scenes. See the <a href="./walrus-sites/intro.html">Walrus Sites chapter</a> for further
details on how this works.</p>
</div>
</div>
<h2 id="features"><a class="header" href="#features">Features</a></h2>
<ul>
<li>
<p><strong>Storage and retrieval:</strong> Walrus supports storage operations to write and read blobs. It also
allows anyone to prove that a blob has been stored and is available for retrieval at a later
time.</p>
</li>
<li>
<p><strong>Cost efficiency:</strong> By utilizing advanced erasure coding, Walrus maintains storage costs at
approximately five times the size of the stored blobs, and encoded parts of each blob are stored
on each storage node. This is significantly more cost-effective than traditional full-replication
methods and much more robust against failures than protocols that only store each blob on a subset
of storage nodes.</p>
</li>
<li>
<p><strong>Integration with the Sui blockchain:</strong> Walrus leverages <a href="https://github.com/MystenLabs/sui">Sui</a>
for coordination, attesting availability, and payments. Storage space is represented as a resource
on Sui, which can be owned, split, merged, and transferred. Stored blobs are also represented by
objects on Sui, which means that smart contracts can check whether a blob is available and for how
long, extend its lifetime or optionally delete it.</p>
</li>
<li>
<p><strong>Epochs, tokenomics, and delegated proof of stake:</strong> Walrus is operated by a committee of storage
nodes that evolve between epochs. A native token, WAL (and its subdivision FROST, where 1 WAL is
equal to 1 billion FROST), is used to delegate stake to storage nodes, and those with high stake
become part of the epoch committee. The WAL token is also used for payments for storage. At the
end of each epoch, rewards for selecting storage nodes, storing and serving blobs are distributed
to storage nodes and whose that stake with them. All these processes are mediated by smart
contracts on the Sui platform.</p>
</li>
<li>
<p><strong>Flexible access:</strong> Users can interact with Walrus through a command-line interface (CLI),
software development kits (SDKs), and web2 HTTP technologies. Walrus is designed to work well
with traditional caches and content distribution networks (CDNs), while ensuring all operations
can also be run using local tools to maximize decentralization.</p>
</li>
</ul>
<div id="admonition-public-access" class="admonition admonish-danger" role="note" aria-labelledby="admonition-public-access-title">
<div class="admonition-title">
<div id="admonition-public-access-title">
<p>Public access</p>
</div>
<a class="admonition-anchor-link" href="index.html#admonition-public-access"></a>
</div>
<div>
<p><strong>All blobs stored in Walrus are public and discoverable by all.</strong> Therefore you must not use Walrus
to store anything that contains secrets or private data without additional measures to protect
confidentiality. Refer to <a href="./dev-guide/data-security.html">Data Security</a> for such use cases.</p>
</div>
</div>
<h2 id="architecture-and-operations"><a class="header" href="#architecture-and-operations">Architecture and operations</a></h2>
<p>Walrus's architecture ensures that content remains accessible and retrievable even when many
storage nodes are unavailable or malicious. Under the hood it uses modern error correction
techniques based on fast linear fountain codes, augmented to ensure resilience against Byzantine
faults, and a dynamically changing set of storage nodes. The core of Walrus remains simple, and
storage node management and blob certification leverages Sui smart contracts.</p>
<h2 id="organization"><a class="header" href="#organization">Organization</a></h2>
<p>This documentation is split into several parts:</p>
<ol>
<li><em>Dev blog</em> contains announcements and other blog posts.</li>
<li><em>Usage</em> provides concrete information for developers. If you want to get started quickly, you can
jump directly to the <a href="./usage/setup.html">setup chapter</a>.</li>
<li><em>Sites</em> describes how you can use Walrus and Sui together to build truly decentralized websites.</li>
<li><em>Design</em> describes the objectives, security properties, and architecture of Walrus.</li>
</ol>
<p>Finally, we provide a <a href="./glossary.html">glossary</a> that explains the terminology used throughout the
documentation.</p>
<h2 id="sources"><a class="header" href="#sources">Sources</a></h2>
<p>This documentation is built using <a href="https://rust-lang.github.io/mdBook/">mdBook</a> from source files in
<a href="https://github.com/MystenLabs/walrus">https://github.com/MystenLabs/walrus</a>. Please report or fix any errors you find in this
documentation in that GitHub project.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="the-walrus-dev-blog"><a class="header" href="#the-walrus-dev-blog">The Walrus Dev Blog</a></h1>
<p>This part of the Walrus documentation is used to publish news and updates about Walrus's
development!</p>
<div id="admonition-warning" class="admonition admonish-warning" role="note" aria-labelledby="admonition-warning-title">
<div class="admonition-title">
<div id="admonition-warning-title">
<p>Warning</p>
</div>
<a class="admonition-anchor-link" href="blog/00_intro.html#admonition-warning"></a>
</div>
<div>
<p>We generally keep older blog posts unchanged besides possibly fixing typos and updating or removing
broken links. As a result they may contain information that is no longer accurate.</p>
</div>
</div>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="announcing-walrus-a-decentralized-storage-and-data-availability-protocol"><a class="header" href="#announcing-walrus-a-decentralized-storage-and-data-availability-protocol">Announcing Walrus: A Decentralized Storage and Data Availability Protocol</a></h1>
<p>Published on: 2024-06-18</p>
<div id="admonition-warning" class="admonition admonish-warning" role="note" aria-labelledby="admonition-warning-title">
<div class="admonition-title">
<div id="admonition-warning-title">
<p>Warning</p>
</div>
<a class="admonition-anchor-link" href="blog/01_announcing_walrus.html#admonition-warning"></a>
</div>
<div>
<p>This blog post is shown in its original form and may contain information that is no longer accurate.
Some broken links may have been updated or removed.</p>
</div>
</div>
<p>Walrus is an innovative decentralized storage network for blockchain apps and autonomous agents. The
Walrus storage system is being released today as a developer preview for Sui builders in order to
gather feedback. We expect a broad rollout to other web3 communities very soon!</p>
<p>Leveraging innovations in erasure coding, Walrus enables fast and robust encoding of unstructured
data blobs into smaller slivers distributed and stored over a network of storage nodes. A subset of
slivers can be used to rapidly reconstruct the original blob, even when up to two-thirds of the
slivers are missing. This is possible while keeping the replication factor down to a minimal 4x-5x,
similar to existing cloud-based services, but with the additional benefits of decentralization and
resilience to more widespread faults.</p>
<h2 id="the-replication-challenge"><a class="header" href="#the-replication-challenge">The Replication Challenge</a></h2>
<p>Sui is the most advanced blockchain system in relation to storage on validators, with innovations
such as a <a href="https://docs.sui.io/concepts/tokenomics/storage-fund">storage fund</a> that future-proofs
the cost of storing data on-chain. Nevertheless, Sui still requires complete data replication among
all validators, resulting in a replication factor of 100x or more in today’s Sui Mainnet. While this
is necessary for replicated computing and smart contracts acting on the state of the blockchain, it
is inefficient for simply storing unstructured data blobs, such as music, video, blockchain history,
etc.</p>
<h2 id="introducing-walrus-efficient-and-robust-decentralized-storage"><a class="header" href="#introducing-walrus-efficient-and-robust-decentralized-storage">Introducing Walrus: Efficient and Robust Decentralized Storage</a></h2>
<p>To tackle the challenge of high replication costs, Mysten Labs has developed Walrus, a decentralized
storage network offering exceptional data availability and robustness with a minimal replication
factor of 4x-5x. Walrus provides two key benefits:</p>
<ol>
<li>
<p><strong>Cost-Effective Blob Storage:</strong> Walrus allows for the uploading of gigabytes of data at a time
with minimal cost, making it an ideal solution for storing large volumes of data. Walrus can do
this because the data blob is transmitted only once over the network, and storage nodes only
spend a fraction of resources compared to the blob size. As a result, the more storage nodes the
system has, the fewer resources each storage node uses per blob.</p>
</li>
<li>
<p><strong>High Availability and Robustness:</strong> Data stored on Walrus enjoys enhanced reliability and
availability under fault conditions. Data recovery is still possible even if two-thirds of the
storage nodes crash or come under adversarial control. Further, availability may be certified
efficiently without downloading the full blob.</p>
</li>
</ol>
<p>Decentralized storage can take multiple forms in modern ecosystems. For instance, it offers better
guarantees for digital assets traded as NFTs. Unlike current designs that store data off-chain,
decentralized storage ensures users own the actual resource, not just metadata, mitigating risks of
data being taken down or misrepresented.</p>
<p>Additionally, decentralized storage is not only useful for storing data such as pictures or files
with high availability; it can also double as a low-cost data availability layer for rollups. Here,
sequencers can upload transactions on Walrus, and the rollup executor only needs to temporarily
reconstruct them for execution.</p>
<p>We also believe Walrus will accompany existing disaster recovery strategies for millions of
enterprise companies. Not only is Walrus low-cost, it also provides unmatched layers of data
availability, integrity, transparency, and resilience that centralized solutions by design cannot
offer.</p>
<p>Walrus is powered by the Sui Network and scales horizontally to hundreds or thousands of networked
decentralized storage nodes. This should enable Walrus to offer Exabytes of storage at costs
competitive with current centralized offerings, given the higher assurance and decentralization.</p>
<h2 id="the-future-of-walrus"><a class="header" href="#the-future-of-walrus">The Future of Walrus</a></h2>
<p>By releasing this developer preview we hope to share some of the design decisions with the
decentralized app developer community and gather feedback on the approach and the APIs for storing,
retrieving, and certifying blobs. In this developer preview, all storage nodes are operated by
Mysten Labs to help us understand use cases, fix bugs, and improve the performance of the software.</p>
<p>Future updates to Walrus will allow for dynamically changing the set of decentralized storage nodes,
as well as changing the mapping of what slivers are managed by each storage node. The available
operations and tools will also be expanded to cover more storage-related use cases. Many of these
functions will be designed with the feedback we gather in mind.</p>
<p>Stay tuned for more updates on how Walrus will revolutionize data storage in the web3 ecosystem.</p>
<h2 id="what-can-developers-build"><a class="header" href="#what-can-developers-build">What can developers build?</a></h2>
<p>As part of this developer preview, we provide a binary client (currently macOS, ubuntu) that can be
operated from the <a href="blog/../usage/client-cli.html">command line interface</a>, a <a href="blog/../usage/json-api.html">JSON API</a>,
and an <a href="blog/../usage/web-api.html">HTTP API</a>. We also offer the community an aggregator and publisher
service and a Devnet deployment of 10 storage nodes operated by Mysten Labs.</p>
<p>We hope developers will experiment with building applications that leverage the Walrus Decentralized
Store in a variety of ways. As examples, we hope to see the community build:</p>
<ul>
<li>
<p><strong>Storage of media for NFT or dapps:</strong> Walrus can directly store and serve media such as images,
sounds, sprites, videos, other game assets, etc. This is publicly available media that can be
accessed using HTTP requests at caches to create multimedia dapps.</p>
</li>
<li>
<p><strong>AI-related use cases:</strong> Walrus can store clean data sets of training data, datasets with a known
and verified provenance, model weights, and proofs of correct training for AI models. Or it may be
used to store and ensure the availability and authenticity of an AI model output.</p>
</li>
<li>
<p><strong>Storage of long term archival of blockchain history:</strong> Walrus can be used as a lower-cost
decentralized store to store blockchain history. For Sui, this can include sequences of
checkpoints with all associated transaction and effects content, as well as historic snapshots of
the blockchain state, code, or binaries.</p>
</li>
<li>
<p><strong>Support availability for L2s:</strong> Walrus enables parties to certify the availability of blobs, as
required by L2s that need data to be stored and attested as available to all. This may also
include the availability of extra audit data such as validity proofs, zero-knowledge proofs of
correct execution, or large fraud proofs.</p>
</li>
<li>
<p><strong>Support a full decentralized web experience:</strong> Walrus can host full decentralized web
experiences including all resources (such as js, css, html, and media). These can provide content
but also host the UX of dapps, enabling fully decentralized front- and back-ends on chain. It
brings the full "web" back into "web3".</p>
</li>
<li>
<p><strong>Support subscription models for media:</strong> Creators can store encrypted media on Walrus and only
provide access via decryption keys to parties that have paid a subscription fee or have paid for
content. (Note that Walrus provides the storage; encryption and decryption must be done off
Walrus).</p>
</li>
</ul>
<p>We are excited to see what else the web3 developer community can imagine!</p>
<h2 id="getting-started"><a class="header" href="#getting-started">Getting Started</a></h2>
<p>For this developer preview the public Walrus Devnet is openly available to all developers. Developer
documentation is available at <a href="https://docs.wal.app">https://docs.wal.app</a>.</p>
<p>SUI Testnet token is the main currency for interacting with Walrus. Developers pay for Walrus Devnet
storage using SUI Testnet tokens which can be acquired at the <a href="https://discord.com/channels/916379725201563759/1037811694564560966">Sui Testnet Discord
faucet</a>.</p>
<h2 id="one-more-thing-"><a class="header" href="#one-more-thing-">One more thing …</a></h2>
<!-- markdownlint-disable descriptive-link-text -->
<p>The Walrus Sites website, the Walrus docs, and this very blog are hosted on Walrus. To learn more
about Walrus Sites and how you can deploy your own, <a href="blog/../walrus-sites/intro.html">click here</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="devnet-update"><a class="header" href="#devnet-update">Devnet Update</a></h1>
<p>Published on: 2024-08-12</p>
<div id="admonition-warning" class="admonition admonish-warning" role="note" aria-labelledby="admonition-warning-title">
<div class="admonition-title">
<div id="admonition-warning-title">
<p>Warning</p>
</div>
<a class="admonition-anchor-link" href="blog/02_devnet_update.html#admonition-warning"></a>
</div>
<div>
<p>This blog post is shown in its original form and may contain information that is no longer accurate.
Some broken links may have been updated or removed.</p>
</div>
</div>
<p>We have redeployed the Walrus Devnet to incorporate various improvements to the Walrus storage nodes
and clients. In this process, all blobs stored on Walrus were wiped. Note that this may happen again
on Devnet and Testnet, but obviously <em>not on the future Mainnet</em>.</p>
<h2 id="migration-and-re-deployment-of-walrus-sites"><a class="header" href="#migration-and-re-deployment-of-walrus-sites">Migration and Re-deployment of Walrus Sites</a></h2>
<p>You can obtain the latest version of the <code>walrus</code> binary and the new configuration as described in
the <a href="blog/../usage/setup.html">setup chapter</a>.</p>
<p>If you had deployed any Walrus Sites, the site object on Sui and any SuiNS name are still valid.
However, you need to re-store all blobs on Walrus. You can achieve this by running the site-builder
tool (from the <code>walrus-sites</code> directory) as follows:</p>
<pre><code class="language-sh">./target/release/site-builder --config site-builder/assets/builder-example.yaml update --force \
    &lt;path to the site&gt; &lt;site object ID&gt;
</code></pre>
<h2 id="changes"><a class="header" href="#changes">Changes</a></h2>
<p>Besides many improvements to the storage nodes, the new version of Walrus includes the following
user-facing changes:</p>
<ul>
<li>Improved coin management: The client now better selects coins for gas and storage fees. Users no
longer require multiple coins in their wallet.</li>
<li>Improved connection management: The client now limits the number of parallel connections to
improve performance for users with low network bandwidth storing large blobs.</li>
<li>OpenAPI specification: Walrus storage nodes, aggregators, and publishers expose their API
specifications at the path <code>/v1/api</code>.</li>
<li>System info in JSON: The <code>info</code> command is now also available in JSON mode.</li>
<li>Client version: The <code>walrus</code> CLI now has a <code>--version</code> option.</li>
<li>Support for the empty blob: The empty blob is now supported by Walrus.</li>
<li>Default configuration-file paths: The client now looks for configuration files in
<code>~/.config/walrus</code> in addition to <code>~/.walrus</code> and recognizes the extension <code>.yml</code> in addition to
<code>.yaml</code>.</li>
<li>Home directory in paths: Paths specified in configuration files now expand the <code>~</code> symbol at the
beginning to the user's home directory.</li>
<li>More robust store and status check: The <code>store</code> and <code>blob-status</code> commands are now more robust
against Sui full nodes that aggressively prune past events and against load-balancers that send
transactions to different full nodes.</li>
<li>Fix CLI parsing: The <code>walrus</code> CLI now properly handles hyphens in blob IDs.</li>
</ul>
<p>This update also increases the number of shards to 1000, which is more representative of the
expected value in Testnet and Mainnet.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="announcing-the-official-walrus-whitepaper"><a class="header" href="#announcing-the-official-walrus-whitepaper">Announcing the Official Walrus Whitepaper</a></h1>
<p>Published on: 2024-09-17</p>
<div id="admonition-warning" class="admonition admonish-warning" role="note" aria-labelledby="admonition-warning-title">
<div class="admonition-title">
<div id="admonition-warning-title">
<p>Warning</p>
</div>
<a class="admonition-anchor-link" href="blog/03_whitepaper.html#admonition-warning"></a>
</div>
<div>
<p>This blog post is shown in its original form and may contain information that is no longer accurate.
Some broken links may have been updated or removed.</p>
</div>
</div>
<p>In June, Mysten Labs announced Walrus, a new decentralized secure blob store design, and introduced
a developer preview that currently stores over 12TiB of data.
<a href="https://info.breakingtheice.sui.io/">Breaking the Ice</a> gathered over 200 developers to build apps
leveraging decentralized storage.</p>
<p>It is time to unveil the next stage of the project: Walrus will become an independent decentralized
network with its own utility token, WAL, that will play a key role in the operation and governance
of the network. Walrus will be operated by storage nodes through a delegated proof-of-stake
mechanism using the WAL token. An independent Walrus foundation will encourage the advancement and
adoption of Walrus, and support its community of users and developers.</p>
<p>Today, we published the Walrus <a href="blog/../walrus.pdf">whitepaper</a> (also on
<a href="https://github.com/MystenLabs/walrus/blob/main/docs/book/walrus.pdf">GitHub</a>) that offers
additional details, including:</p>
<ul>
<li>The encoding scheme and Read / Write operations Walrus uses to ensure both security and efficient
scaling to 100s and 1000s of storage nodes, including interactions with the Sui blockchain which
serves as a coordination layer for Walrus’ operations.</li>
<li>The reconfiguration of storage nodes across epochs, and how the protocol ensures available blobs
on Walrus remain available over long periods of time.</li>
<li>The tokenomics of Walrus based on the WAL token, including how staking and staking rewards are
structured, how pricing and payments for storage are handled and distributed in each epoch, and
the governance of key system parameters.</li>
<li>Forward-looking design options, such as a cheap mechanism to challenge and audit storage nodes,
options for ensuring reads with a higher service quality, possibly against a payment, and designs
that empower light nodes to meaningfully contribute to the protocol’s robustness, serve reads, and
be rewarded.</li>
</ul>
<p>The whitepaper focuses on the steady-state design aspects of Walrus. Further details about the
project, such as timelines, opportunities for community participation, how to join the network as a
storage node, and plans around light nodes, will be shared in subsequent posts.</p>
<p>To be part of this journey:</p>
<ul>
<li>Follow us on <a href="https://x.com/WalrusProtocol">Twitter</a></li>
<li>Join our <a href="https://discord.com/invite/walrusprotocol">Discord</a></li>
<li><a href="blog/../index.html">Build apps</a> on Walrus</li>
<li><a href="blog/../walrus-sites/intro.html">Publish a Walrus Site</a> and share it</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="announcing-testnet"><a class="header" href="#announcing-testnet">Announcing Testnet</a></h1>
<p>Published on: 2024-10-17</p>
<div id="admonition-warning" class="admonition admonish-warning" role="note" aria-labelledby="admonition-warning-title">
<div class="admonition-title">
<div id="admonition-warning-title">
<p>Warning</p>
</div>
<a class="admonition-anchor-link" href="blog/04_testnet_update.html#admonition-warning"></a>
</div>
<div>
<p>This blog post is mostly shown in its original form and may contain information that is no longer
accurate. Some broken links may have been updated or removed.</p>
</div>
</div>
<p>Today, a community of operators launches the first public Walrus Testnet.
This is an important milestone in validating the operation of Walrus as a decentralized blob store,
by operating it on a set of independent storage nodes, that change over time through a delegated
proof of stake mechanism. The Testnet also brings functionality updates relating to governance,
epochs, and blob deletion.</p>
<h2 id="blob-deletion"><a class="header" href="#blob-deletion">Blob deletion</a></h2>
<p>The most important user-facing new feature is optional blob deletion. The uploader of a blob can
optionally indicate a blob is "deletable". This information is stored in the Sui blob metadata
object, and is also included in the event denoting when the blob is certified. Subsequently, the
owner of the Sui blob metadata object can "delete" it. As a result storage for the remaining
period is reclaimed and can be used by subsequent blob storage operations.</p>
<p>Blob deletion allows more fine-grained storage cost management: smart contracts that wrap blob
metadata objects can define logic that stores blobs and delete them to minimize costs, and reclaim
storage space before Walrus epochs end.</p>
<p>However, blob deletion is not an effective privacy mechanism in itself: copies of the blob may exist
outside Walrus storage nodes on caches and end-user stores or devices. Furthermore, if the identical
blob is stored by multiple Walrus users, the blob will still be available on Walrus until no copy
exists. Thus deleting your own copy of a blob cannot guarantee that it is deleted from Walrus as a
whole.</p>
<ul>
<li>Find out how to
<a href="blog/../usage/client-cli.html#reclaiming-space-via-deletable-blobs">upload and delete deletable blobs</a>
through the CLI.</li>
<li>Find out more about how <a href="blog/../dev-guide/dev-operations.html#delete">delete operations work</a>.</li>
</ul>
<h2 id="epochs"><a class="header" href="#epochs">Epochs</a></h2>
<p>Walrus Testnet enables multiple epochs. Initially, the epoch duration is set to a single day to
ensure the logic of epoch change is thoroughly tested. At Mainnet, epochs will likely be multiple
weeks long.</p>
<p>The progress of epochs makes the end epoch of blobs meaningful, and blobs will <em>become unavailable
when they reach their end epoch</em>. The store command may be used to extend the end epoch of a blob
that is still available. This operation is efficient and only affects payments and metadata, and
does not re-upload blob contents.</p>
<div id="admonition-note" class="admonition admonish-note" role="note" aria-labelledby="admonition-note-title">
<div class="admonition-title">
<div id="admonition-note-title">
<p>Note</p>
</div>
<a class="admonition-anchor-link" href="blog/04_testnet_update.html#admonition-note"></a>
</div>
<div>
<p>The previous paragraph was edited on 2025-07-16 for improved clarity.</p>
</div>
</div>
<ul>
<li>Find out the <a href="blog/../usage/client-cli.html#walrus-system-information">current epoch</a> through the CLI.</li>
<li>Find out how to store a blob for
<a href="blog/../usage/client-cli.html#storing-querying-status-and-reading-blobs">multiple epochs</a>.</li>
</ul>
<h2 id="the-wal-token-and-the-testnet-wal-faucet"><a class="header" href="#the-wal-token-and-the-testnet-wal-faucet">The WAL token and the Testnet WAL faucet</a></h2>
<p>Payments for blob storage and extending blob expiry are denominated in Testnet WAL, a
Walrus token issued on the Sui Testnet. Testnet WAL has no value, and an unlimited supply; so no
need to covet or hoard it, it's just for testing purposes and only issued on Sui Testnet.</p>
<p>WAL also has a smaller unit called FROST, similar to MIST for SUI. 1 WAL is equal to 1 billion
(1000000000) FROST.</p>
<p>To make Testnet WAL available to all who want to experiment with the Walrus Testnet we provide a
utility and smart contract to convert Testnet SUI (which also has no value) into Testnet WAL using
a one-to-one exchange rate. This is chosen arbitrarily, and generally one should not read too much
into the actual WAL denominated costs of storage on Testnet. They have been chosen arbitrarily.</p>
<p>Find out how to <a href="blog/../usage/setup.html#testnet-wal-faucet">request Testnet WAL tokens</a> through the CLI.</p>
<h2 id="decentralization-through-staking--unstaking"><a class="header" href="#decentralization-through-staking--unstaking">Decentralization through staking &amp; unstaking</a></h2>
<p>The WAL token may also be used to stake with storage operators. Staked WAL can be unstaked and
re-staked with other operators or used to purchase storage.</p>
<p>Each epoch storage nodes are selected and allocated storage shards according to their delegated
stake. At the end of each epoch payments for storing blobs for the epoch are distributed to storage
nodes and those that delegate stake to them. Furthermore, important network parameters (such as
total available storage and storage price) are set by the selected storage operators each epoch
according to their stake weight.</p>
<p>A staking web dApp is provided to experiment with this functionality. Community members have also
created explorers that can be used to view storage nodes when considering who to stake with. Staking
ensures that the ultimate governance of Walrus, directly in terms of storage nodes, and indirectly
in terms of parameters and software they chose, rests with WAL Token holders.</p>
<p>Under the hood and over the next months we will be testing many aspects of epoch changes and
storage node committee changes: better shard allocation mechanisms upon changes or storage node
stake; efficient ways to sync state between storage nodes; as well as better ways for storage nodes
to follow Sui event streams.</p>
<ul>
<li>Explore the Walrus staking dApp.</li>
<li>Look at recent activity on the <a href="https://walruscan.com/testnet/home">Walrus Explorer</a>.</li>
</ul>
<h2 id="new-move-contracts--documentation"><a class="header" href="#new-move-contracts--documentation">New Move contracts &amp; documentation</a></h2>
<p>As part of the Testnet release of Walrus, the documentation and Move Smart contracts have been
updated, and can be found in the <a href="https://github.com/MystenLabs/walrus-docs"><code>walrus-docs</code>
repository</a>.</p>
<h2 id="new-walrus-sites-features"><a class="header" href="#new-walrus-sites-features">New Walrus Sites features</a></h2>
<p>With the move to Walrus Testnet, Walrus Sites have also been updated! The new features in this
update greatly increase the flexibility, speed, and security of Walrus Sites. Developers can now
specify client-side routing rules, and add custom HTTP headers to the portals' responses for their
site, expanding the possibilities for what Walrus Sites can do.</p>
<p>Migrate now to take advantage of these new features! The old Walrus Sites, based on Walrus Devnet,
will still be available for a short time. However, Devnet will be wiped soon (as described below),
so it is recommended to migrate as soon as possible.</p>
<h2 id="discontinuation-of-walrus-devnet"><a class="header" href="#discontinuation-of-walrus-devnet">Discontinuation of Walrus Devnet</a></h2>
<p>The previous Walrus Devnet instance is now deprecated and <strong>will be shut down after 2024-10-31</strong>.
All data stored on Walrus Devnet (including Walrus Sites) will no longer be accessible at that
point. You need to re-upload all data to Walrus Testnet if you want it to remain accessible. Walrus
Sites also need to be migrated.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="announcing-testnet-v2"><a class="header" href="#announcing-testnet-v2">Announcing Testnet v2</a></h1>
<p>Published on: 2025-01-16</p>
<div id="admonition-warning" class="admonition admonish-warning" role="note" aria-labelledby="admonition-warning-title">
<div class="admonition-title">
<div id="admonition-warning-title">
<p>Warning</p>
</div>
<a class="admonition-anchor-link" href="blog/05_testnet_redeployment.html#admonition-warning"></a>
</div>
<div>
<p>This blog post is shown in its original form and may contain information that is no longer accurate.
Some broken links may have been updated or removed.</p>
</div>
</div>
<p>We are today redeploying the Walrus Testnet to incorporate various improvements, including some
backwards-incompatible changes. Make sure to get the latest binary and configuration as described
in the <a href="blog/../usage/setup.html">setup section</a>.</p>
<p>Note that all blob data on the previous Testnet instance has been wiped. All blobs need to be
re-uploaded to the new Testnet instance, including Walrus Sites. In addition, there is a new version
of the WAL token, so your previous WAL tokens will not work anymore. To use the Testnet v2, you
need to obtain new WAL tokens.</p>
<p>In the following sections, we describe the notable changes and the actions required for existing
Walrus Sites.</p>
<h2 id="epoch-duration"><a class="header" href="#epoch-duration">Epoch duration</a></h2>
<p>The epoch duration has been increased from one day to two days to emphasize that this duration is
different from Sui epochs (at Mainnet, epochs will likely be multiple weeks long). In addition, the
maximum number of epochs a blob can be stored for has been reduced from 200 to 183 (corresponding
to one year).</p>
<p>The <code>walrus store</code> command now also supports the <code>--epochs max</code> flag, which will store
the blob for the maximum number of epochs. Note that the <code>--epochs</code> flag is now mandatory.</p>
<h2 id="new-features"><a class="header" href="#new-features">New features</a></h2>
<p>Besides many improvements to the contracts and the storage-node service, the latest Walrus release
also brings several user-facing improvements.</p>
<ul>
<li>The <code>walrus store</code> command now supports storing multiple files at once. This is faster and more
cost-effective compared to storing each file separately as transactions can be batched through
<a href="https://docs.sui.io/concepts/transactions/prog-txn-blocks">PTBs</a>. Notably, this is compatible
with glob patterns offered by many shells, so you can for example run a command like <code>walrus store *.png --epochs 100</code> to store all PNG files in the current directory.</li>
<li>The <code>walrus</code> CLI now supports creating, funding, and extending <em>shared blobs</em> using the <code>walrus share</code>, <code>walrus store --share</code>, and <code>walrus fund-shared-blob</code> commands. Shared blobs are an
example of collectively managed and funded blobs. See the <a href="blog/../usage/client-cli.html#shared-blobs">shared blobs
section</a> for more details.</li>
</ul>
<h2 id="new-wal-token"><a class="header" href="#new-wal-token">New WAL token</a></h2>
<p>Along with the redeployment of Walrus, we have also deployed a fresh WAL contract. This
means that you cannot use any WAL token from the previous Testnet instance with the new Testnet
instance. You need to request new WAL tokens through the <a href="blog/../usage/setup.html#testnet-wal-faucet">Testnet WAL
faucet</a>.</p>
<h2 id="backwards-incompatible-changes"><a class="header" href="#backwards-incompatible-changes">Backwards-incompatible changes</a></h2>
<p>One reason for a full redeployment is to allow us to make some changes that are
backwards-incompatible. Many of those are related to the contracts and thus less visible to users.
There are, however, some changes that may affect you.</p>
<h3 id="configuration-files"><a class="header" href="#configuration-files">Configuration files</a></h3>
<p>The format of the configuration files for storage nodes and clients has been changed. Make sure to
use the latest version of the configuration files, see the <a href="blog/../usage/setup.html#configuration">configuration
section</a>.</p>
<h3 id="cli-options"><a class="header" href="#cli-options">CLI options</a></h3>
<p>Several CLI options of the <code>walrus</code> CLI have been changed. Notably, all "short" variants of options
(e.g., <code>-e</code> instead of <code>--epochs</code>) have been removed to prevent future confusion with new options.
Additionally, the <code>--epochs</code> flag is now mandatory for the <code>walrus store</code> command (this also affects
the <a href="blog/../usage/json-api.html">JSON API</a>).</p>
<p>Please refer to the CLI help (<code>walrus --help</code>, or <code>walrus &lt;command&gt; --help</code>) for further details.</p>
<h3 id="http-apis"><a class="header" href="#http-apis">HTTP APIs</a></h3>
<p>The paths, request, and response formats of the HTTP APIs have changed for the storage nodes, and
also the aggregator and publisher. Please refer to the section on the <a href="blog/../usage/web-api.html">HTTP
API</a> for further details.</p>
<h2 id="effects-on-and-actions-required-for-existing-walrus-sites"><a class="header" href="#effects-on-and-actions-required-for-existing-walrus-sites">Effects on and actions required for existing Walrus Sites</a></h2>
<p>The Walrus Sites contracts have not changed, which means that all corresponding objects on Sui are
still valid. However, the resources now point to blob IDs that do not yet exist on the new Testnet.
The easiest way to fix existing sites is to simply update them with the <code>--force</code> flag:</p>
<pre><code class="language-sh">site-builder update --epochs &lt;number of epochs&gt; --force &lt;path to site&gt; &lt;existing site object&gt;
</code></pre>
<h2 id="new-move-contracts--documentation-1"><a class="header" href="#new-move-contracts--documentation-1">New Move contracts &amp; documentation</a></h2>
<p>As part of the new Testnet release of Walrus, the Move smart contracts have been updated; the
deployed version can be found in the <a href="https://github.com/MystenLabs/walrus-docs/tree/main/contracts"><code>walrus-docs</code>
repository</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="announcing-mainnet"><a class="header" href="#announcing-mainnet">Announcing Mainnet</a></h1>
<p>Published on: 2025-03-27</p>
<h2 id="a-decentralized-network-mainnet"><a class="header" href="#a-decentralized-network-mainnet">A decentralized network: Mainnet</a></h2>
<p>The production Walrus Mainnet is now live, and operated by
a decentralized network of over 100 storage nodes. Epoch 1 begun on March 25, 2025. The
network can now be used to
<a href="blog/../usage/interacting.html">publish and retrieve blobs</a>,
<a href="blog/../walrus-sites/tutorial-publish.html">upload and browse Walrus Sites</a>, as
well as <a href="https://stake-wal.wal.app/">stake and unstake</a> to determine future committees using the
live
<a href="https://www.walrus.xyz/wal-token">Mainnet WAL token</a>.
On Mainnet, the Walrus security properties hold. And Walrus is now ready to satisfy
the needs of real applications.</p>
<p>Walrus is <a href="https://github.com/MystenLabs/walrus">open source</a>.
The Walrus protocol health is overseen by an
<a href="https://www.walrus.xyz/">independent foundation</a> that is now
<a href="https://www.walrus.xyz/blog/walrus-foundation-fundraising">well resourced</a> to support future
development and growth.
And, the community is collecting tools, resources and dapps for Walrus under
<a href="https://github.com/MystenLabs/awesome-walrus">Awesome Walrus!</a></p>
<p>This is a significant milestone a little over 12 months after an initial small team started
designing the Walrus protocol. And a special thanks is due to the community of storage operators
that supported the development of Walrus through consecutive Testnet(s), as well as all
community members that integrated the protocol early and provided feedback to improve it.</p>
<h2 id="new-features-1"><a class="header" href="#new-features-1">New features</a></h2>
<p>Besides the promise of stability and security, the Mainnet release of Walrus comes with a few
notable new features and changes:</p>
<ul>
<li>
<p><strong>Blob attributes.</strong> Each Sui blob objects can have multiple attributes and values attached to it,
to encode application meta-data. The aggregator uses this facility for returning common HTTP
headers.</p>
</li>
<li>
<p><strong>Burn blob objects on Sui</strong>. The command line <code>walrus</code> tool is extended with commands to
"burn" Sui blob objects to reclaim the associated storage fee, making it cheaper to store blobs.</p>
</li>
<li>
<p><strong>CLI expiry time improvements.</strong> Now blob expiry can be expressed more flexibly when storing
blobs, through <code>--epochs max</code>, an RFC3339 date with <code>--earliest-expiry-time</code>, or the concrete end
epoch with <code>--end-epoch</code>.</p>
</li>
<li>
<p><strong>RedStuff with Reed-Solomon codes.</strong> The erasure code underlying
RedStuff was changed from RaptorQ to Reed-Solomon (RS) codes. Intense benchmarking suggests their
performance, for our parameter set, is similar, and the use of RS codes provides perfect
robustness, in that blobs can always be reconstructed given a threshold of slivers. We
thank <a href="https://www.jneu.net/">Joachim Neu</a> for extensive feedback on this topic.</p>
</li>
<li>
<p><strong>TLS handing for storage node.</strong> Storage nodes can now be configured to serve TLS certificates
that are publicly trusted, such as those issues by cloud providers and public authorities such as
Let's Encrypt. This allows JavaScript clients to directly store and retrieve blobs from Walrus.</p>
</li>
<li>
<p><strong>JWT authentication for publisher.</strong> Now the publisher can be configured to only provide
services to authenticated users via consuming JWT tokens that can be distributed through any
authentication mechanism.</p>
</li>
<li>
<p><strong>Extensive logging and metrics.</strong> All services, from the storage node to aggregator and publisher
export metrics that can be used to build dashboards, and logs at multiple levels to troubleshoot
their operation.</p>
</li>
<li>
<p><strong>Health endpoint.</strong> Storage nodes and the CLI include a <code>health</code> command to check the status and
basic information of storage nodes. This is useful when allocating stake as well as monitoring
the network.</p>
</li>
<li>
<p><strong>Walrus Sites updates.</strong> The Mainnet Walrus Sites public portal will be hosted on the
<code>wal.app</code> domain name. Now Walrus Sites support deletable blobs to make their updates more
capital efficient. Those operating their own portals may also use their own domain names to serve
a Walrus Site. The
<a href="https://stake-wal.wal.app/">Staking</a>,
<a href="https://docs.wal.app">Docs</a>,
<a href="https://snowreads.wal.app">Snowreads</a>, and
<a href="https://flatland.wal.app">Flatland</a>
Walrus Sites are now on Mainnet.</p>
</li>
<li>
<p><strong>A subsidies contract.</strong> The Mainnet release of Walrus requires WAL for storing blobs, however
to enable early adopters to try the system, transition to it, the Walrus foundation operates a
smart contract to
<a href="https://github.com/MystenLabs/walrus/tree/main/contracts/subsidies">acquire subsidized storage</a>.
The CLI client uses it automatically when storing blobs.</p>
</li>
</ul>
<h2 id="testnet-future-plans"><a class="header" href="#testnet-future-plans">Testnet future plans</a></h2>
<p>The current Walrus Testnet will soon be wiped and restarted to align the codebase to the Mainnet
release. Going forward we will regularly wipe the Testnet, every few months. Developers should use
the Walrus Mainnet to get any level of stability. The Walrus Testnet is only there to test new
features before they are deployed in production.</p>
<p>We will not be operating a public portal to serve Walrus Sites on Testnet, to reduce costs and
incident response associated with free web hosting. Developers can still run a local portal
pointed to Testnet to test Walrus Sites.</p>
<h2 id="open-source-walrus-codebase"><a class="header" href="#open-source-walrus-codebase">Open source Walrus codebase</a></h2>
<p>The Walrus codebase, including all smart contracts in Move, services in Rust, and documentation, is
now open sourced under an Apache 2.0 license, and hosted on
<a href="https://github.com/MystenLabs/walrus">GitHub</a>. Since the main Walrus repository is now open to all,
and contains both documentation and smart contracts, we are retiring the <code>walrus-docs</code> repository.</p>
<p>Developers may find the Rust CLI client, and associated aggregator and publisher services of most
interest. These can be extended to specialize services to specific operational needs. They are
also a good illustration of how to interface with Walrus using Rust clients. A cleaner and more
stable Rust SDK is in the works as well.</p>
<h2 id="publisher-improvements-and-plans"><a class="header" href="#publisher-improvements-and-plans">Publisher improvements and plans</a></h2>
<p>Publishing blobs on Mainnet consumes real WAL and SUI. To avoid uncontrolled costs to operations the
publisher service was augmented with facilities to authenticate requests and account for costs per
user.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="getting-started-1"><a class="header" href="#getting-started-1">Getting started</a></h1>
<p>You want to get a taste of Walrus? Here are some sites that are built on and/or use Walrus:</p>
<ul>
<li><a href="https://flatland.wal.app">Mint a toy NFT</a> on the flatland application.</li>
<li><a href="https://snowreads.wal.app">Browse scientific papers</a>.</li>
</ul>
<p>You can explore blobs that are stored on Walrus through the <a href="https://walruscan.com">Walruscan explorer</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="setup"><a class="header" href="#setup">Setup</a></h1>
<p>We provide a pre-compiled <code>walrus</code> client binary for macOS (Intel and Apple CPUs) and Ubuntu, which
supports different usage patterns (see <a href="usage/./interacting.html">the next chapter</a>). This chapter describes
the <a href="usage/setup.html#prerequisites">prerequisites</a>, <a href="usage/setup.html#installation">installation</a>, and
<a href="usage/setup.html#configuration">configuration</a> of the Walrus client.</p>
<p>Walrus is open-source under an Apache 2 license, and can also be built and installed from the Rust
source code via cargo.</p>
<div id="admonition-walrus-networks" class="admonition admonish-info" role="note" aria-labelledby="admonition-walrus-networks-title">
<div class="admonition-title">
<div id="admonition-walrus-networks-title">
<p>Walrus networks</p>
</div>
<a class="admonition-anchor-link" href="usage/setup.html#admonition-walrus-networks"></a>
</div>
<div>
<p>This page describes how to connect to Walrus <strong>Mainnet</strong>. See <a href="usage/./networks.html">Available networks</a>
for an overview over all Walrus networks.</p>
</div>
</div>
<h2 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites: Sui wallet, SUI and WAL</a></h2>
<div id="admonition-quick-wallet-setup" class="admonition admonish-tip" role="note" aria-labelledby="admonition-quick-wallet-setup-title">
<div class="admonition-title">
<div id="admonition-quick-wallet-setup-title">
<p>Quick wallet setup</p>
</div>
<a class="admonition-anchor-link" href="usage/setup.html#admonition-quick-wallet-setup"></a>
</div>
<div>
<p>If you just want to set up a new Sui wallet for Walrus, you can generate one using the
<code>walrus generate-sui-wallet --network mainnet</code> command after <a href="usage/setup.html#installation">installing Walrus</a>.
You still need to obtain some SUI and WAL tokens, but you do not have to install the Sui CLI.</p>
</div>
</div>
<p>Interacting with Walrus requires a valid Sui wallet with some amount of SUI and WAL tokens. The
normal way to set this up is via the Sui CLI; see the <a href="https://docs.sui.io/guides/developer/getting-started/sui-install">installation
instructions</a> in the Sui
documentation.</p>
<p>After installing the Sui CLI, you need to set up a wallet by running <code>sui client</code>, which
prompts you to set up a new configuration. Make sure to point it to Sui Mainnet, you can use the
full node at <code>https://fullnode.mainnet.sui.io:443</code> for this. See <a href="https://docs.sui.io/guides/developer/getting-started/connect">the Sui
documentation</a> for further details.</p>
<p>After this, you should get something like this (everything besides the <code>mainnet</code> line is optional):</p>
<pre><code class="language-terminal">$ sui client envs
╭──────────┬─────────────────────────────────────┬────────╮
│ alias    │ url                                 │ active │
├──────────┼─────────────────────────────────────┼────────┤
│ devnet   │ https://fullnode.devnet.sui.io:443  │        │
│ localnet │ http://127.0.0.1:9000               │        │
│ testnet  │ https://fullnode.testnet.sui.io:443 │        │
│ mainnet  │ https://fullnode.mainnet.sui.io:443 │ *      │
╰──────────┴─────────────────────────────────────┴────────╯
</code></pre>
<p>Make sure you have at least one gas coin with at least 1 SUI.</p>
<pre><code class="language-terminal">$ sui client gas
╭─────────────────┬────────────────────┬──────────────────╮
│ gasCoinId       │ mistBalance (MIST) │ suiBalance (SUI) │
├─────────────────┼────────────────────┼──────────────────┤
│ 0x65dca966dc... │ 1000000000         │ 1.00             │
╰─────────────────┴────────────────────┴──────────────────╯
</code></pre>
<p>Finally, to publish blobs on Walrus you will need some Mainnet WAL to pay for storage and upload
costs. You can buy WAL through a variety of centralized or decentralized exchanges.</p>
<p>The system-wide wallet will be used by Walrus if no other path is specified. If you want to use a
different Sui wallet, you can specify this in the <a href="usage/setup.html#configuration">Walrus configuration file</a> or
when <a href="usage/./interacting.html">running the CLI</a>.</p>
<h2 id="installation"><a class="header" href="#installation">Installation</a></h2>
<p>We currently provide the <code>walrus</code> client binary for macOS (Intel and Apple CPUs), Ubuntu, and
Windows. The Ubuntu version most likely works on other Linux distributions as well.</p>
<div class="table-wrapper"><table><thead><tr><th>OS</th><th>CPU</th><th>Architecture</th></tr></thead><tbody>
<tr><td>Ubuntu</td><td>Intel 64bit</td><td><a href="https://storage.googleapis.com/mysten-walrus-binaries/walrus-mainnet-latest-ubuntu-x86_64"><code>ubuntu-x86_64</code></a></td></tr>
<tr><td>Ubuntu</td><td>Intel 64bit (generic)</td><td><a href="https://storage.googleapis.com/mysten-walrus-binaries/walrus-mainnet-latest-ubuntu-x86_64-generic"><code>ubuntu-x86_64-generic</code></a></td></tr>
<tr><td>Ubuntu</td><td>ARM 64bit</td><td><a href="https://storage.googleapis.com/mysten-walrus-binaries/walrus-mainnet-latest-ubuntu-aarch64"><code>ubuntu-aarch64</code></a></td></tr>
<tr><td>MacOS</td><td>Apple Silicon</td><td><a href="https://storage.googleapis.com/mysten-walrus-binaries/walrus-mainnet-latest-macos-arm64"><code>macos-arm64</code></a></td></tr>
<tr><td>MacOS</td><td>Intel 64bit</td><td><a href="https://storage.googleapis.com/mysten-walrus-binaries/walrus-mainnet-latest-macos-x86_64"><code>macos-x86_64</code></a></td></tr>
<tr><td>Windows</td><td>Intel 64bit</td><td><a href="https://storage.googleapis.com/mysten-walrus-binaries/walrus-mainnet-latest-windows-x86_64.exe"><code>windows-x86_64.exe</code></a></td></tr>
</tbody></table>
</div>
<h3 id="nix-install"><a class="header" href="#nix-install">Install via script</a></h3>
<p>To download and install <code>walrus</code> to your <code>"$HOME"/.local/bin</code> directory, run one of the following
commands in your terminal then follow on-screen instructions. If you are on Windows, see the
<a href="usage/setup.html#windows-install">Windows-specific instructions</a> or the <a href="usage/setup.html#suiup-install"><code>suiup</code> installation</a> (experimental)</p>
<pre><code class="language-sh"># Run a first-time install using the latest Mainnet version.
curl -sSf https://install.wal.app | sh

# Install the latest Testnet version instead.
curl -sSf https://install.wal.app | sh -s -- -n testnet

# Update an existing installation (overwrites prior version of walrus).
curl -sSf https://install.wal.app | sh -s -- -f
</code></pre>
<p>Make sure that the <code>"$HOME"/.local/bin</code> directory is in your <code>$PATH</code>.</p>
<p>Once this is done, you should be able to run Walrus by using the <code>walrus</code> command in your terminal.</p>
<p>You can see usage instructions as follows (see <a href="usage/./interacting.html">the next chapter</a> for further
details):</p>
<pre><code class="language-terminal">$ walrus --help
Walrus client

Usage: walrus [OPTIONS] &lt;COMMAND&gt;

Commands:
⋮
</code></pre>
<div id="admonition-tip" class="admonition admonish-tip" role="note" aria-labelledby="admonition-tip-title">
<div class="admonition-title">
<div id="admonition-tip-title">
<p>Tip</p>
</div>
<a class="admonition-anchor-link" href="usage/setup.html#admonition-tip"></a>
</div>
<div>
<p>Our latest Walrus binaries are also available on Walrus itself, namely on
<a href="https://bin.wal.app">https://bin.wal.app</a>, for example, <a href="https://bin.wal.app/walrus-mainnet-latest-ubuntu-x86_64">https://bin.wal.app/walrus-mainnet-latest-ubuntu-x86_64</a>.
Note that due to DoS protection, it may not be possible to download the binaries with <code>curl</code> or
<code>wget</code>.</p>
</div>
</div>
<h3 id="windows-install"><a class="header" href="#windows-install">Install on Windows</a></h3>
<p>To download <code>walrus</code> to your Microsoft Windows computer, run the following in a PowerShell.</p>
<pre><code class="language-PowerShell">(New-Object System.Net.WebClient).DownloadFile(
  "https://storage.googleapis.com/mysten-walrus-binaries/walrus-testnet-latest-windows-x86_64.exe",
  "walrus.exe"
)
</code></pre>
<p>From there, you'll need to place <code>walrus.exe</code> somewhere in your <code>PATH</code>.</p>
<div id="admonition-windows" class="admonition admonish-note" role="note" aria-labelledby="admonition-windows-title">
<div class="admonition-title">
<div id="admonition-windows-title">
<p>Windows</p>
</div>
<a class="admonition-anchor-link" href="usage/setup.html#admonition-windows"></a>
</div>
<div>
<p>Note that most of the remaining instructions assume a UNIX-based system for the directory structure,
commands, etc. If you use Windows, you may need to adapt most of those.</p>
</div>
</div>
<h3 id="suiup-install"><a class="header" href="#suiup-install">Install via suiup (experimental)</a></h3>
<p><code>suiup</code> is a tool to install and manage different versions of CLI tools for working in the Sui
ecosystem, including the <code>walrus</code> CLI. After installing <code>suiup</code> as described in the <a href="https://github.com/MystenLabs/suiup?tab=readme-ov-file#installation"><code>suiup</code>
documentation</a>, you can install
specific versions of the <code>walrus</code> CLI:</p>
<pre><code class="language-sh">suiup install walrus@testnet # install the latest testnet release
suiup install walrus@mainnet # install the latest mainnet release
suiup install walrus@testnet-v1.27.1 # install a specific release
</code></pre>
<h3 id="github-releases"><a class="header" href="#github-releases">GitHub releases</a></h3>
<p>You can find all our releases including release notes on <a href="https://github.com/MystenLabs/walrus/releases">GitHub</a>.
Simply download the archive for your system and extract the <code>walrus</code> binary.</p>
<h3 id="install-via-cargo"><a class="header" href="#install-via-cargo">Install via Cargo</a></h3>
<p>You can also install Walrus via Cargo. For example, to install the latest Mainnet version:</p>
<pre><code class="language-sh">cargo install --git https://github.com/MystenLabs/walrus --branch mainnet walrus-service --locked
</code></pre>
<p>In place of <code>--branch mainnet</code>, you can also specify specific tags (e.g., <code>--tag mainnet-v1.18.2</code>)
or commits (e.g., <code>--rev b2009ac73388705f379ddad48515e1c1503fc8fc</code>).</p>
<h3 id="build-from-source"><a class="header" href="#build-from-source">Build from source</a></h3>
<p>Walrus is open-source software published under the Apache 2 license. The code is developed in a
<code>git</code> repository at <a href="https://github.com/MystenLabs/walrus">https://github.com/MystenLabs/walrus</a>.</p>
<p>The latest version of Mainnet and Testnet are available under the branches <code>mainnet</code> and <code>testnet</code>
respectively, and the latest version under the <code>main</code> branch. We welcome reports of issues and bug
fixes. Follow the instructions in the <code>README.md</code> file to build and use Walrus from source.</p>
<h2 id="configuration"><a class="header" href="#configuration">Configuration</a></h2>
<p>The Walrus client needs to know about the Sui objects that store the Walrus system and staking
information, see the <a href="usage/../dev-guide/sui-struct.html#system-and-staking-information">developer guide</a>.
These need to be configured in a file <code>~/.config/walrus/client_config.yaml</code>.</p>
<p>You can access Testnet and Mainnet via the following configuration. Note that this example Walrus
CLI configuration refers to the standard location for Sui configuration
(<code>"~/.sui/sui_config/client.yaml"</code>).</p>
<pre><code class="language-yaml">contexts:
  mainnet:
    system_object: 0x2134d52768ea07e8c43570ef975eb3e4c27a39fa6396bef985b5abc58d03ddd2
    staking_object: 0x10b9d30c28448939ce6c4d6c6e0ffce4a7f8a4ada8248bdad09ef8b70e4a3904
    exchange_objects: []
    wallet_config:
      # Optional path to the wallet config file.
      # path: ~/.sui/sui_config/client.yaml
      # Sui environment to use.
      active_env: mainnet
      # Optional override for the Sui address to use.
      # active_address: 0x0000000000000000000000000000000000000000000000000000000000000000
    rpc_urls:
      - https://fullnode.mainnet.sui.io:443
  testnet:
    system_object: 0x6c2547cbbc38025cf3adac45f63cb0a8d12ecf777cdc75a4971612bf97fdf6af
    staking_object: 0xbe46180321c30aab2f8b3501e24048377287fa708018a5b7c2792b35fe339ee3
    exchange_objects:
      - 0xf4d164ea2def5fe07dc573992a029e010dba09b1a8dcbc44c5c2e79567f39073
      - 0x19825121c52080bb1073662231cfea5c0e4d905fd13e95f21e9a018f2ef41862
      - 0x83b454e524c71f30803f4d6c302a86fb6a39e96cdfb873c2d1e93bc1c26a3bc5
      - 0x8d63209cf8589ce7aef8f262437163c67577ed09f3e636a9d8e0813843fb8bf1
    wallet_config:
      # Optional path to the wallet config file.
      # path: ~/.sui/sui_config/client.yaml
      # Sui environment to use.
      active_env: testnet
      # Optional override for the Sui address to use.
      # active_address: 0x0000000000000000000000000000000000000000000000000000000000000000
    rpc_urls:
      - https://fullnode.testnet.sui.io:443
default_context: mainnet
</code></pre>
<!-- markdownlint-disable code-fence-style -->
<div id="admonition-tip-1" class="admonition admonish-tip" role="note" aria-labelledby="admonition-tip-1-title">
<div class="admonition-title">
<div id="admonition-tip-1-title">
<p>Tip</p>
</div>
<a class="admonition-anchor-link" href="usage/setup.html#admonition-tip-1"></a>
</div>
<div>
<p>The easiest way to obtain the latest configuration is by downloading it directly from Walrus:</p>
<pre><code class="language-sh">curl https://docs.wal.app/setup/client_config.yaml -o ~/.config/walrus/client_config.yaml
</code></pre>
</div>
</div>
<!-- markdownlint-enable code-fence-style -->
<h3 id="config-custom-path"><a class="header" href="#config-custom-path">Custom path (optional)</a></h3>
<p>By default, the Walrus client will look for the <code>client_config.yaml</code> (or <code>client_config.yml</code>)
configuration file in the current directory, <code>$XDG_CONFIG_HOME/walrus/</code>, <code>~/.config/walrus/</code>, or
<code>~/.walrus/</code>. However, you can place the file anywhere and name it anything you like; in this case
you need to use the <code>--config</code> option when running the <code>walrus</code> binary.</p>
<h3 id="advanced-configuration-optional"><a class="header" href="#advanced-configuration-optional">Advanced configuration (optional)</a></h3>
<p>The configuration file currently supports the following parameters for each of the contexts:</p>
<pre><code class="language-yaml"># These are the only mandatory fields. These objects are specific for a particular Walrus
# deployment but then do not change over time.
system_object: 0x2134d52768ea07e8c43570ef975eb3e4c27a39fa6396bef985b5abc58d03ddd2
staking_object: 0x10b9d30c28448939ce6c4d6c6e0ffce4a7f8a4ada8248bdad09ef8b70e4a3904

# You can define a custom path to your Sui wallet configuration here. If this is unset or `null`
# (default), the wallet is configured from `./sui_config.yaml` (relative to your current working
# directory), or the system-wide wallet at `~/.sui/sui_config/client.yaml` in this order. Both
# `active_env` and `active_address` can be omitted, in which case the values from the Sui wallet
# are used.
wallet_config:
  # The path to the wallet configuration file.
  path: ~/.sui/sui_config/client.yaml
  # The optional `active_env` to use to override whatever `active_env` is listed in the
  # configuration file.
  active_env: mainnet
  # The optional `active_address` to use to override whatever `active_address` is listed in the
  # configuration file.
  active_address: 0x...

# The following parameters can be used to tune the networking behavior of the client. There is no
# risk in playing around with these values. In the worst case, you may not be able to store/read
# blob due to timeouts or other networking errors.
- https://fullnode.testnet.sui.io:443
communication_config:
  max_concurrent_writes: null
  max_concurrent_sliver_reads: null
  max_concurrent_metadata_reads: 3
  max_concurrent_status_reads: null
  max_data_in_flight: null
  reqwest_config:
    total_timeout_millis: 30000
    pool_idle_timeout_millis: null
    http2_keep_alive_timeout_millis: 5000
    http2_keep_alive_interval_millis: 30000
    http2_keep_alive_while_idle: true
  request_rate_config:
    max_node_connections: 10
    backoff_config:
      min_backoff_millis: 1000
      max_backoff_millis: 30000
      max_retries: 5
  disable_proxy: false
  disable_native_certs: false
  sliver_write_extra_time:
    factor: 0.5
    base_millis: 500
  registration_delay_millis: 200
  max_total_blob_size: 1073741824
  committee_change_backoff:
    min_backoff_millis: 1000
    max_backoff_millis: 5000
    max_retries: 5
  sui_client_request_timeout_millis: null
refresh_config:
  refresh_grace_period_secs: 10
  max_auto_refresh_interval_secs: 30
  min_auto_refresh_interval_secs: 5
  epoch_change_distance_threshold_secs: 300
  refresher_channel_size: 100
quilt_client_config:
  max_retrieve_slivers_attempts: 2
  timeout_secs: 10
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="available-networks"><a class="header" href="#available-networks">Available networks</a></h1>
<p>Walrus Mainnet operates a production-quality storage network on the Sui Mainnet. The Walrus Testnet
operates on the Sui Testnet and is used to test new features of Walrus before they graduate to the
Mainnet. Finally, developers can operate local Walrus and Sui networks for testing.</p>
<h2 id="network-parameters"><a class="header" href="#network-parameters">Network parameters</a></h2>
<p>Some important fixed system parameters for Mainnet and Testnet are summarized in the following table:</p>
<div class="table-wrapper"><table><thead><tr><th>Parameter</th><th>Mainnet</th><th>Testnet</th></tr></thead><tbody>
<tr><td>Sui network</td><td>Mainnet</td><td>Testnet</td></tr>
<tr><td>Number of shards</td><td>1000</td><td>1000</td></tr>
<tr><td>Epoch duration</td><td>2 weeks</td><td>1 day</td></tr>
<tr><td>Maximum number of epochs for which storage can be bought</td><td>53</td><td>53</td></tr>
</tbody></table>
</div>
<p>Many other parameters, including the system capacity and prices, are dynamic. Those are stored in
the system object (see <a href="usage/../dev-guide/sui-struct.html#system-and-staking-information">the documentation about the system and staking objects</a>)
and can be viewed with various tools like the <a href="https://walruscan.com/">Walruscan explorer</a>.</p>
<h2 id="mainnet-configuration"><a class="header" href="#mainnet-configuration">Mainnet configuration</a></h2>
<h3 id="mainnet-parameters"><a class="header" href="#mainnet-parameters">Mainnet parameters</a></h3>
<p>The client parameters for the Walrus Mainnet are:</p>
<pre><code class="language-yaml">system_object: 0x2134d52768ea07e8c43570ef975eb3e4c27a39fa6396bef985b5abc58d03ddd2
staking_object: 0x10b9d30c28448939ce6c4d6c6e0ffce4a7f8a4ada8248bdad09ef8b70e4a3904
rpc_urls:
  - https://fullnode.mainnet.sui.io:443
</code></pre>
<p>In case you wish to explore the Walrus contracts, their package IDs are the following:</p>
<ul>
<li>WAL package: <code>0x356a26eb9e012a68958082340d4c4116e7f55615cf27affcff209cf0ae544f59</code></li>
<li>Walrus package: <code>0xfdc88f7d7cf30afab2f82e8380d11ee8f70efb90e863d1de8616fae1bb09ea77</code></li>
</ul>
<p>As these are inferred automatically from the object IDs above, there is no need to manually input
them into the Walrus client configuration file. The latest published package IDs can also be found
in the <code>Move.lock</code> files in the subdirectories of the <a href="https://github.com/MystenLabs/walrus/tree/main/contracts"><code>contracts</code> directory on
GitHub</a>.</p>
<p>The configuration file described on the <a href="usage/./setup.html#configuration">setup page</a> includes both Mainnet
and Testnet configuration. If you want <em>only</em> the Mainnet configuration, you can download the
<a href="usage/../setup/client_config_mainnet.yaml">Mainnet-only configuration file</a>.</p>
<h2 id="testnet-configuration"><a class="header" href="#testnet-configuration">Testnet configuration</a></h2>
<div id="admonition-disclaimer-about-the-walrus-testnet" class="admonition admonish-danger" role="note" aria-labelledby="admonition-disclaimer-about-the-walrus-testnet-title">
<div class="admonition-title">
<div id="admonition-disclaimer-about-the-walrus-testnet-title">
<p>Disclaimer about the Walrus Testnet</p>
</div>
<a class="admonition-anchor-link" href="usage/networks.html#admonition-disclaimer-about-the-walrus-testnet"></a>
</div>
<div>
<p>All transactions are executed on the Sui Testnet and use Testnet WAL and SUI which have no
value. The state of the store <strong>can and will be wiped</strong> at any point and possibly with no warning.
Do not rely on this Testnet for any production purposes, it comes with no availability or
persistence guarantees.</p>
<p>New features on testnet may break deployed testnet apps, since this is the network in which we test
new updates including for compatibility with eco-system applications.</p>
<p>Also see the <a href="usage/../legal/testnet_tos.html">Testnet terms of service</a> under which this Testnet is made
available.</p>
</div>
</div>
<h3 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites: Sui wallet and Testnet SUI</a></h3>
<p>Interacting with Walrus requires a valid Sui Testnet wallet with some amount of SUI tokens. The
normal way to set this up is via the Sui CLI; see the <a href="https://docs.sui.io/guides/developer/getting-started/sui-install">installation
instructions</a> in the Sui
documentation. If you do not want to install the Sui CLI, you can also generate a new Sui wallet for
Testnet using <code>walrus generate-sui-wallet --network testnet</code>.</p>
<p>After installing the Sui CLI, you need to set up a Testnet wallet by running <code>sui client</code>, which
prompts you to set up a new configuration. Make sure to point it to Sui Testnet, you can use the
full node at <code>https://fullnode.testnet.sui.io:443</code> for this. See <a href="https://docs.sui.io/guides/developer/getting-started/connect">the Sui
documentation</a> for further details.</p>
<p>If you already have a Sui wallet configured, you can directly set up the Testnet environment (if you
don't have it yet),</p>
<pre><code class="language-sh">sui client new-env --alias testnet --rpc https://fullnode.testnet.sui.io:443
</code></pre>
<p>and switch the active environment to it:</p>
<pre><code class="language-sh">sui client switch --env testnet
</code></pre>
<p>After this, you should get something like this (everything besides the <code>testnet</code> line is optional):</p>
<pre><code class="language-terminal">$ sui client envs
╭──────────┬─────────────────────────────────────┬────────╮
│ alias    │ url                                 │ active │
├──────────┼─────────────────────────────────────┼────────┤
│ devnet   │ https://fullnode.devnet.sui.io:443  │        │
│ localnet │ http://127.0.0.1:9000               │        │
│ testnet  │ https://fullnode.testnet.sui.io:443 │ *      │
│ mainnet  │ https://fullnode.mainnet.sui.io:443 │        │
╰──────────┴─────────────────────────────────────┴────────╯
</code></pre>
<p>Finally, make sure you have at least one gas coin with at least 1 SUI. You can obtain one from the
<a href="https://faucet.sui.io/?network=testnet">Sui Testnet faucet</a> (you can find your address through the
<code>sui client active-address</code> command).</p>
<p>After some seconds, you should see your new SUI coins:</p>
<pre><code class="language-terminal">$ sui client gas
╭─────────────────┬────────────────────┬──────────────────╮
│ gasCoinId       │ mistBalance (MIST) │ suiBalance (SUI) │
├─────────────────┼────────────────────┼──────────────────┤
│ 0x65dca966dc... │ 1000000000         │ 1.00             │
╰─────────────────┴────────────────────┴──────────────────╯
</code></pre>
<p>The system-wide wallet will be used by Walrus if no other path is specified. If you want to use a
different Sui wallet, you can specify this in the <a href="usage/./setup.html#configuration">Walrus configuration file</a>
or when <a href="usage/./interacting.html">running the CLI</a>.</p>
<h3 id="testnet-parameters"><a class="header" href="#testnet-parameters">Testnet parameters</a></h3>
<p>The configuration parameters for the Walrus Testnet are included in the configuration file described
on the <a href="usage/./setup.html#configuration">setup page</a>. If you want <em>only</em> the Testnet configuration, you can
get the <a href="usage/../setup/client_config_testnet.yaml">Testnet-only configuration file</a>. The parameters are:</p>
<pre><code class="language-yaml">system_object: 0x6c2547cbbc38025cf3adac45f63cb0a8d12ecf777cdc75a4971612bf97fdf6af
staking_object: 0xbe46180321c30aab2f8b3501e24048377287fa708018a5b7c2792b35fe339ee3
exchange_objects:
  - 0xf4d164ea2def5fe07dc573992a029e010dba09b1a8dcbc44c5c2e79567f39073
  - 0x19825121c52080bb1073662231cfea5c0e4d905fd13e95f21e9a018f2ef41862
  - 0x83b454e524c71f30803f4d6c302a86fb6a39e96cdfb873c2d1e93bc1c26a3bc5
  - 0x8d63209cf8589ce7aef8f262437163c67577ed09f3e636a9d8e0813843fb8bf1
rpc_urls:
  - https://fullnode.testnet.sui.io:443
</code></pre>
<p>The current Testnet package IDs can be
found in the <code>Move.lock</code> files in the subdirectories of the <a href="https://github.com/MystenLabs/walrus/tree/main/testnet-contracts"><code>testnet-contracts</code> directory on
GitHub</a>.</p>
<h3 id="testnet-wal-faucet"><a class="header" href="#testnet-wal-faucet">Testnet WAL faucet</a></h3>
<p>The Walrus Testnet uses Testnet WAL tokens to buy storage and stake. Testnet WAL tokens have no
value and can be exchanged (at a 1:1 rate) for some Testnet SUI tokens, which also have no value,
through the following command:</p>
<pre><code class="language-sh">walrus get-wal
</code></pre>
<p>You can check that you have received Testnet WAL by checking the Sui balances:</p>
<pre><code class="language-sh">$ sui client balance
╭─────────────────────────────────────────╮
│ Balance of coins owned by this address  │
├─────────────────────────────────────────┤
│ ╭─────────────────────────────────────╮ │
│ │ coin  balance (raw)     balance     │ │
│ ├─────────────────────────────────────┤ │
│ │ Sui   8869252670        8.86 SUI    │ │
│ │ WAL   500000000         0.50 WAL    │ │
│ ╰─────────────────────────────────────╯ │
╰─────────────────────────────────────────╯
</code></pre>
<p>By default, 0.5 SUI are exchanged for 0.5 WAL, but a different amount of SUI may be exchanged using
the <code>--amount</code> option (the value is in MIST/FROST), and a specific SUI/WAL exchange object may be
used through the <code>--exchange-id</code> option. The <code>walrus get-wal --help</code> command provides more
information about those.</p>
<h2 id="running-a-local-walrus-network"><a class="header" href="#running-a-local-walrus-network">Running a local Walrus network</a></h2>
<p>In addition to publicly deployed Walrus networks, you can deploy a Walrus testbed on your local
machine for local testing. All you need to do is run the script <code>scripts/local-testbed.sh</code> found
in the Walrus <a href="https://github.com/MystenLabs/walrus">git code repository</a>. See
<code>scripts/local-testbed.sh -h</code> for further usage information.</p>
<p>The script generates configuration that you can use when <a href="usage/./client-cli.html">running the Walrus client</a>
and prints the path to that configuration file.</p>
<p>In addition, one can spin up a local grafana instance to visualize the metrics collected by the
storage nodes. This can be done via <code>cd docker/grafana-local; docker compose up</code>. This should work
with the default storage node configuration.</p>
<p>Note that while the Walrus storage nodes of this testbed run on your local machine, the Sui Devnet
is used by default to deploy and interact with the contracts. To run the testbed fully locally,
simply <a href="https://docs.sui.io/guides/developer/getting-started/local-network">start a local network with <code>sui start --with-faucet --force-regenesis</code></a>
(requires <code>sui</code> to be <code>v1.28.0</code> or higher) and specify <code>localnet</code> when starting the Walrus testbed.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="interacting-with-walrus"><a class="header" href="#interacting-with-walrus">Interacting with Walrus</a></h1>
<p>We provide 3 ways to interact directly with the Walrus storage system:</p>
<ul>
<li>Through the Walrus <a href="usage/./client-cli.html">client command line interface (CLI)</a>.</li>
<li>Through a <a href="usage/./json-api.html">JSON API</a> of the Walrus CLI.</li>
<li>Through an <a href="usage/./web-api.html">HTTP API</a> exposed by a public or local Walrus client daemon.</li>
</ul>
<p>Furthermore, users can <a href="usage/./stake.html">stake and unstake</a> through the staking dApp or Sui smart
contracts.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="using-the-walrus-client"><a class="header" href="#using-the-walrus-client">Using the Walrus client</a></h1>
<p>The <code>walrus</code> binary can be used to interact with Walrus as a client. See the <a href="usage/./setup.html">setup
chapter</a> for prerequisites, installation, and configuration.</p>
<p>Detailed usage information including a full list of available commands can be viewed with</p>
<pre><code class="language-sh">walrus --help
</code></pre>
<p>Each sub-command of <code>walrus</code> can also be called with <code>--help</code> to print its specific arguments and
their meaning.</p>
<p>If you have multiple <em>contexts</em> in your configuration file (as in the default one included on the
<a href="usage/./setup.html#configuration">setup page</a>), you can specify the context for each command through the
<code>--context</code> option.</p>
<p>You can generate a bash/zsh/fish completion script with <code>walrus completion</code> and place it in the appropriate
directory like <code>~/.local/share/bash-completion/completions</code>.</p>
<h2 id="walrus-system-information"><a class="header" href="#walrus-system-information">Walrus system information</a></h2>
<p>Information about the Walrus system is available through the <code>walrus info</code> command. It provides an
overview of current system parameters such as the current epoch, the number of storage nodes and
shards in the system, the maximum blob size, and the current cost in WAL for storing
blobs:</p>
<pre><code class="language-console">$ walrus info

Walrus system information

Epochs and storage duration
Current epoch: 1
Start time: 2025-03-25 15:00:24.408 UTC
End time: 2025-04-08 15:00:24.408 UTC
Epoch duration: 14days
Blobs can be stored for at most 53 epochs in the future.

Storage nodes
Number of storage nodes: 103
Number of shards: 1000

Blob size
Maximum blob size: 13.6 GiB (14,599,533,452 B)
Storage unit: 1.00 MiB

Storage prices per epoch
(Conversion rate: 1 WAL = 1,000,000,000 FROST)
Price per encoded storage unit: 0.0001 WAL
Additional price for each write: 20,000 FROST

...
</code></pre>
<div id="admonition-epoch-duration" class="admonition admonish-tip" role="note" aria-labelledby="admonition-epoch-duration-title">
<div class="admonition-title">
<div id="admonition-epoch-duration-title">
<p>Epoch duration</p>
</div>
<a class="admonition-anchor-link" href="usage/client-cli.html#admonition-epoch-duration"></a>
</div>
<div>
<p>The epoch duration on Mainnet is 2 weeks. See <a href="usage/./networks.html#network-parameters">here</a> for other
parameters on Mainnet and Testnet.</p>
</div>
</div>
<div id="admonition-frost-and-wal" class="admonition admonish-tip" role="note" aria-labelledby="admonition-frost-and-wal-title">
<div class="admonition-title">
<div id="admonition-frost-and-wal-title">
<p>FROST and WAL</p>
</div>
<a class="admonition-anchor-link" href="usage/client-cli.html#admonition-frost-and-wal"></a>
</div>
<div>
<p>FROST is the smaller unit of WAL, similar to MIST for SUI. The conversion is also the same as for
SUI: <code>1 WAL = 1 000 000 000 FROST</code>.</p>
</div>
</div>
<p>Additional information such as encoding parameters and sizes, BFT system information, and
information on the storage nodes in the current and (if already selected) the next committee,
including their node IDs and stake and shard distribution can be viewed with various subcommands,
see <code>walrus info --help</code> for details. Note that the previous <code>--dev</code> option has been replaced by the
<code>all</code> subcommand.</p>
<p>The health of storage nodes can be checked with the <code>walrus health</code> command. This command takes
different options to select the nodes to check (see <code>walrus health --help</code> for details). For
example, <code>walrus health --committee</code> checks the status of all current committee members.</p>
<h2 id="storing-blobs"><a class="header" href="#storing-blobs">Storing blobs</a></h2>
<div id="admonition-public-access" class="admonition admonish-danger" role="note" aria-labelledby="admonition-public-access-title">
<div class="admonition-title">
<div id="admonition-public-access-title">
<p>Public access</p>
</div>
<a class="admonition-anchor-link" href="usage/client-cli.html#admonition-public-access"></a>
</div>
<div>
<p><strong>All blobs stored in Walrus are public and discoverable by all.</strong> Therefore you must not use Walrus
to store anything that contains secrets or private data without additional measures to protect
confidentiality.</p>
</div>
</div>
<div id="admonition-warning" class="admonition admonish-warning" role="note" aria-labelledby="admonition-warning-title">
<div class="admonition-title">
<div id="admonition-warning-title">
<p>Warning</p>
</div>
<a class="admonition-anchor-link" href="usage/client-cli.html#admonition-warning"></a>
</div>
<div>
<p>It must be ensured that only a single process uses the Sui wallet for write actions (storing or
deleting). When using multiple instances of the client simultaneously, each of them must be pointed
to a different wallet. Note, it is possible to store multiple blobs with a single <code>walrus store</code>
command.</p>
</div>
</div>
<p>Storing one or multiple blobs on Walrus can be achieved through the following command:</p>
<pre><code class="language-sh">walrus store &lt;FILES&gt; --epochs &lt;EPOCHS&gt;
</code></pre>
<p>A mandatory CLI argument must be set to specify the lifetime for the blob. There are currently three
ways for this:</p>
<ol>
<li>The <code>--epochs &lt;EPOCHS&gt;</code> option indicates the number of epochs the blob should be stored for.
There is an upper limit on the number of epochs a blob can be stored for, which is 53, corresponding
to two years. In addition to a positive integer, you can also use <code>--epochs max</code> to store the blob
for the maximum number of epochs. Note that the end epoch is defined as the current epoch plus the
specified number of epochs.</li>
<li>The <code>--earliest-expiry-time &lt;EARLIEST_EXPIRY_TIME&gt;</code> option takes a date in RFC3339 format
(e.g., "2024-03-20T15:00:00Z") or a more relaxed format (e.g., "2024-03-20 15:00:00") and ensures
the blob expires after that date if possible.</li>
<li>The <code>--end-epoch &lt;END_EPOCH&gt;</code> option takes a specific end epoch for the blob.</li>
</ol>
<div id="admonition-end-epoch" class="admonition admonish-warning" role="note" aria-labelledby="admonition-end-epoch-title">
<div class="admonition-title">
<div id="admonition-end-epoch-title">
<p>End epoch</p>
</div>
<a class="admonition-anchor-link" href="usage/client-cli.html#admonition-end-epoch"></a>
</div>
<div>
<p>A blob expires <em>at the beginning of its end epoch</em>. For example, a blob with end epoch <code>314</code> will
become unavailable at the beginning of epoch <code>314</code>. One consequence of this is that when storing a
blob with <code>--epochs 1</code> immediately before an epoch change, it will expire and become unavailable
almost immediately. Note that blobs can be <a href="usage/client-cli.html#extending-the-lifetime-of-a-blob">extended</a> only if
they have not expired.</p>
</div>
</div>
<p>You can store a single file or multiple files, separated by spaces. Notably, this is compatible
with glob patterns; for example, <code>walrus store *.png --epochs &lt;EPOCHS&gt;</code> will store all PNG files
in the current directory.</p>
<p>By default, the command will store the blob as a <em>permanent</em> blob, although this is going to change
in the near future. See the <a href="usage/client-cli.html#reclaiming-space-via-deletable-blobs">section on deletable blobs</a> for more
details on deletable blobs. Also, by default an owned <code>Blob</code> object is created. It is possible to
wrap this into a shared object, which can be funded and extended by anyone, see the <a href="usage/client-cli.html#shared-blobs">shared blobs
section</a>.</p>
<p>When storing a blob, the client performs a number of automatic optimizations, including the
following:</p>
<ul>
<li>If the blob is already stored as a <em>permanent blob</em> on Walrus for a sufficient number of epochs
the command does not store it again. This behavior can be overwritten with the <code>--force</code>
CLI option, which stores the blob again and creates a fresh blob object on Sui belonging to the
wallet address.</li>
<li>If the user's wallet has a storage resource of suitable size and duration, it is (re-)used instead
of buying a new one.</li>
<li>If the blob is already certified on Walrus but as a <em>deletable</em> blob or not for a sufficient
number of epochs, the command skips sending encoded blob data to the storage nodes and just
collects the availability certificate</li>
</ul>
<div id="admonition-costs" class="admonition admonish-tip" role="note" aria-labelledby="admonition-costs-title">
<div class="admonition-title">
<div id="admonition-costs-title">
<p>Costs</p>
</div>
<a class="admonition-anchor-link" href="usage/client-cli.html#admonition-costs"></a>
</div>
<div>
<p>We have a <a href="usage/../dev-guide/costs.html">separate page</a> with some considerations regarding cost.</p>
</div>
</div>
<h3 id="using-a-walrus-upload-relay"><a class="header" href="#using-a-walrus-upload-relay">Using a Walrus upload relay</a></h3>
<div id="admonition-minimum-cli-version" class="admonition admonish-note" role="note" aria-labelledby="admonition-minimum-cli-version-title">
<div class="admonition-title">
<div id="admonition-minimum-cli-version-title">
<p>Minimum CLI version</p>
</div>
<a class="admonition-anchor-link" href="usage/client-cli.html#admonition-minimum-cli-version"></a>
</div>
<div>
<p>The Walrus upload relay functionality is only available in the Walrus CLI version <em>v1.29</em> or higher.</p>
</div>
</div>
<p>A Walrus upload relay is a third party service that can help clients with limited bandwidth and
networking capabilities (a browser, for example) in storing blobs on Walrus.</p>
<p>The asset management on chain (buying storage, registering and certifying blobs) still happens on
the client; the upload relay just takes the unencoded blob, encodes it, and sends the slivers to the
storage nodes, finally returning the certificate. See in-depth details in the <a href="usage/../operator-guide/upload-relay.html">Walrus upload relay
section</a> of these docs.</p>
<p>When storing blobs with the <code>walrus store</code> command (and also when <a href="usage/client-cli.html#storing-blobs-as-a-quilt">storing
quilts</a>) you can use the <code>--upload-relay</code> flag with a URL to specify an
upload relay server be used by the CLI.</p>
<div id="admonition-tipping" class="admonition admonish-tip" role="note" aria-labelledby="admonition-tipping-title">
<div class="admonition-title">
<div id="admonition-tipping-title">
<p>Tipping</p>
</div>
<a class="admonition-anchor-link" href="usage/client-cli.html#admonition-tipping"></a>
</div>
<div>
<p>The upload relay is a third party service that may require a fee, or "tip". This tip may be a
constant SUI amount per blob stored, or dependent on the size of the blob being stored. The Walrus CLI will show you
how much tip the upload relay requires, and will ask for confirmation before continuing.</p>
<p>The technical details on how the tip is computed and paid are
<a href="usage/../operator-guide/upload-relay.html">here</a>.</p>
</div>
</div>
<h2 id="querying-blob-status"><a class="header" href="#querying-blob-status">Querying blob status</a></h2>
<p>The status of a blob can be queried through one of the following commands:</p>
<pre><code class="language-sh">walrus blob-status --blob-id &lt;BLOB_ID&gt;
walrus blob-status --file &lt;FILE&gt;
</code></pre>
<p>This returns whether the blob is stored and its availability period. If you specify a file with the
<code>--file</code> option,the CLI re-encodes the content of the file and derives the blob ID before checking
the status.</p>
<p>When the blob is available, the <code>blob-status</code> command also returns the <code>BlobCertified</code> Sui event ID,
which consists of a transaction ID and a sequence number in the events emitted by the transaction.
The existence of this event certifies the availability of the blob.</p>
<h2 id="reading-blobs"><a class="header" href="#reading-blobs">Reading blobs</a></h2>
<p>Reading blobs from Walrus can be achieved through the following command:</p>
<pre><code class="language-sh">walrus read &lt;some blob ID&gt;
</code></pre>
<p>By default the blob data is written to the standard output. The <code>--out &lt;OUT&gt;</code> CLI option
can be used to specify an output file name. The <code>--rpc-url &lt;URL&gt;</code> may be used to specify
a Sui RPC node to use instead of the one set in the wallet configuration or the default one.</p>
<h2 id="extending-the-lifetime-of-a-blob"><a class="header" href="#extending-the-lifetime-of-a-blob">Extending the lifetime of a blob</a></h2>
<p>Recall that when you stored your blob, it was necessary to specify its <a href="usage/client-cli.html#storing-blobs">end epoch</a>.
By specifying the end epoch you ensured that the blob would be available via <code>walrus read</code> (or other
SDK access to Walrus) until that end epoch is reached.</p>
<p>Walrus blob lifetimes can be extended <em>as long as the blobs are not expired</em> using the
<code>walrus extend --blob-obj-id &lt;blob object id&gt; ...</code> command. Both regular single-address owned blobs
and <a href="usage/client-cli.html#shared-blobs">shared blobs</a> may be extended. Shared blobs may be extended by anyone, but owned
blobs may only be extended by their owner. When extending a shared blob, you will need to supply the
<code>--shared</code> flag to inform the command that the blob is shared.</p>
<p>Note that the blob's <em>object ID</em> will be needed in order to extend it, the blob ID is not needed.
See <code>walrus extend --help</code> for more information on blob extension.</p>
<h2 id="reclaiming-space-via-deletable-blobs"><a class="header" href="#reclaiming-space-via-deletable-blobs">Reclaiming space via deletable blobs</a></h2>
<p>By default <code>walrus store</code> uploads a permanent blob available until after its expiry
epoch. Not even the uploader may delete it beforehand. However, optionally, the store command
may be invoked with the <code>--deletable</code> flag, to indicate the blob may be deleted before its expiry
by the owner of the Sui blob object representing the blob. Deletable blobs are indicated as such
in the Sui events that certify them, and should not be relied upon for availability by others.</p>
<p>A deletable blob may be deleted with the command:</p>
<pre><code class="language-sh">walrus delete --blob-id &lt;BLOB_ID&gt;
</code></pre>
<p>Optionally the delete command can be invoked by specifying a <code>--file &lt;PATH&gt;</code> option, to derive the
blob ID from a file, or <code>--object-id &lt;SUI_ID&gt;</code> to delete the blob in the Sui blob object specified.</p>
<p>Before deleting a blob, the <code>walrus delete</code> command will ask for confirmation unless the <code>--yes</code>
option is specified.</p>
<p>The <code>delete</code> command reclaims the storage object associated with the deleted blob, which is re-used
to store new blobs. The delete operation provides flexibility around managing storage costs and
re-using storage.</p>
<p>The delete operation has limited utility for privacy: It only deletes slivers from the current epoch
storage nodes, and subsequent epoch storage nodes, if no other user has uploaded a copy of the same
blob. If another copy of the same blob exists in Walrus, the delete operation will not make the blob
unavailable for download, and <code>walrus read</code> invocations will download it. After the deletion is
finished, the CLI checks the updated status of the blob to see if it is still accessible in Walrus
(unless the <code>--no-status-check</code> option is specified). However, even if it isn't, copies of the
public blob may be cached or downloaded by users, and these copies are not deleted.</p>
<div id="admonition-delete-reclaims-space-only" class="admonition admonish-danger" role="note" aria-labelledby="admonition-delete-reclaims-space-only-title">
<div class="admonition-title">
<div id="admonition-delete-reclaims-space-only-title">
<p>Delete reclaims space only</p>
</div>
<a class="admonition-anchor-link" href="usage/client-cli.html#admonition-delete-reclaims-space-only"></a>
</div>
<div>
<p><strong>All blobs stored in Walrus are public and discoverable by all.</strong> The <code>delete</code> command will
not delete slivers if other copies of the blob are stored on Walrus possibly by other users.
It does not delete blobs from caches, slivers from past storage nodes, or copies
that could have been made by users before the blob was deleted.</p>
</div>
</div>
<h2 id="shared-blobs"><a class="header" href="#shared-blobs">Shared blobs</a></h2>
<p><em>Shared blobs</em> are shared Sui objects wrapping "standard" <code>Blob</code> objects that can be funded and
whose lifetime can be extended by anyone. See the <a href="https://github.com/MystenLabs/walrus/tree/main/contracts/walrus/sources/system/shared_blob.move">shared blobs
contracts</a>
for further details.</p>
<p>You can create a shared blob from an existing <code>Blob</code> object you own with the <code>walrus share</code> command:</p>
<pre><code class="language-sh">walrus share --blob-obj-id &lt;BLOB_OBJ_ID&gt;
</code></pre>
<p>The resulting shared blob can be directly funded by adding an <code>--amount</code>, or you can fund an
existing shared blob with the <code>walrus fund-shared-blob</code> command. Additionally, you can immediately
share a newly created blob by adding the <code>--share</code> option to the <code>walrus store</code> command.</p>
<p>Shared blobs can only contain permanent blobs and as such cannot be deleted before their expiry.</p>
<p>See <a href="usage/client-cli.html#extending-the-lifetime-of-a-blob">this section</a> for more on blob extension.</p>
<h2 id="batch-storing-blobs-with-quilts"><a class="header" href="#batch-storing-blobs-with-quilts">Batch-storing blobs with quilts</a></h2>
<p><strong>Note:</strong> The <em>quilt</em> feature is only available in Walrus version <em>v1.29</em> or higher.</p>
<div id="admonition-warning-1" class="admonition admonish-warning" role="note" aria-labelledby="admonition-warning-1-title">
<div class="admonition-title">
<div id="admonition-warning-1-title">
<p>Warning</p>
</div>
<a class="admonition-anchor-link" href="usage/client-cli.html#admonition-warning-1"></a>
</div>
<div>
<ul>
<li>Blobs within a quilt are retrieved by a <code>QuiltPatchId</code>, not their standard <code>BlobId</code>. This ID
is generated based on all blobs in the quilt, so a blob's <code>QuiltPatchId</code> will change if it's
moved to a different quilt.</li>
<li>Standard blob operations like <code>delete</code>, <code>extend</code>, or <code>share</code> cannot target individual blobs
inside a quilt; they must be applied to the entire quilt.</li>
</ul>
</div>
</div>
<p>For efficiently storing large numbers of small blobs, Walrus provides the Quilt. It batches
multiple blobs into a single storage unit, significantly reducing overhead and cost. You can find
a more detailed overview of the feature <a href="usage/./quilt.html">Quilt</a>.</p>
<p>You can interact with quilts using a dedicated set of <code>walrus</code> subcommands.</p>
<h3 id="storing-blobs-as-a-quilt"><a class="header" href="#storing-blobs-as-a-quilt">Storing Blobs as a Quilt</a></h3>
<p>To batch-store multiple files as a single quilt, use the <code>store-quilt</code> command. You can specify
the files to include in two ways:</p>
<div id="admonition-warning-2" class="admonition admonish-warning" role="note" aria-labelledby="admonition-warning-2-title">
<div class="admonition-title">
<div id="admonition-warning-2-title">
<p>Warning</p>
</div>
<a class="admonition-anchor-link" href="usage/client-cli.html#admonition-warning-2"></a>
</div>
<div>
<p>You must ensure that all the identifiers are unique within a quilt, the operation will fail otherwise.
Identifiers are the unique names used to retrieve individual blobs from within a quilt.</p>
</div>
</div>
<h4 id="using---paths"><a class="header" href="#using---paths">Using <code>--paths</code></a></h4>
<p>To store all files from one or more directories recursively. The filename of each file will be
used as its unique identifier within the quilt. Regular expressions are supported for uploading from
multiple paths, same as the <code>walrus store</code> command.</p>
<p>Like the regular <code>store</code> command, you can specify the storage duration using <code>--epochs</code>,
<code>--earliest-expiry-time</code>, or <code>--end-epoch</code>.</p>
<pre><code class="language-sh">walrus store-quilt --epochs &lt;EPOCHS&gt; --paths &lt;path-to-directory-1&gt; &lt;path-to-directory-2&gt; &lt;path-to-blob&gt;
</code></pre>
<h4 id="using---blobs"><a class="header" href="#using---blobs">Using <code>--blobs</code></a></h4>
<p>To specify a list of blobs as JSON objects. This gives you more control, allowing you to set a
custom <code>identifier</code> and <code>tags</code> for each file. If <code>identifier</code> is <code>null</code> or omitted, the file's
name is used instead.</p>
<pre><code class="language-sh">walrus store-quilt \
  --blobs '{"path":"&lt;path-to-blob-1&gt;","identifier":"walrus","tags":{"color":"grey","size":"medium"}}' \
          '{"path":"&lt;path-to_blob-2&gt;","identifier":"seal","tags":{"color":"grey","size":"small"}}' \
  --epochs &lt;EPOCHS&gt;
</code></pre>
<h3 id="reading-blobs-from-a-quilt"><a class="header" href="#reading-blobs-from-a-quilt">Reading Blobs from a Quilt</a></h3>
<p>You can retrieve individual blobs (formally "patches") from a quilt without downloading the
entire quilt. The <code>read-quilt</code> command allows you to query for specific blobs by their identifier,
tags, or unique patch ID.</p>
<p>To read blobs by their identifiers, use the <code>--identifiers</code> flag:</p>
<pre><code class="language-sh">walrus read-quilt --out &lt;download dir&gt; \
  --quilt-id 057MX9PAaUIQLliItM_khR_cp5jPHzJWf-CuJr1z1ik --identifiers walrus.jpg another-walrus.jpg
</code></pre>
<p>Blobs within a quilt can be accessed and filtered based on their tags. For instance, if you have a
collection of animal images stored in a quilt, each labeled with a species tag such as "species=cat,"
you can download <strong>all</strong> images labeled as cats with the following command:</p>
<pre><code class="language-sh"># Read all blobs with tag "size: medium"
walrus read-quilt --out &lt;download dir&gt; \
  --quilt-id 057MX9PAaUIQLliItM_khR_cp5jPHzJWf-CuJr1z1ik --tag species cat
</code></pre>
<p>You can also read a blob using its QuiltPatchId, which can be retrieved using
<a href="usage/client-cli.html#list-patches-in-a-quilt"><code>list-patches-in-quilt</code></a>.</p>
<pre><code class="language-sh">walrus read-quilt --out &lt;download dir&gt; \
  --quilt-patch-ids GRSuRSQ_hLYR9nyo7mlBlS7MLQVSSXRrfPVOxF6n6XcBuQG8AQ \
  GRSuRSQ_hLYR9nyo7mlBlS7MLQVSSXRrfPVOxF6n6XcBwgHHAQ
</code></pre>
<h3 id="list-patches-in-a-quilt"><a class="header" href="#list-patches-in-a-quilt">List patches in a Quilt</a></h3>
<p>To see all the patches contained within a quilt, along with their identifiers and QuiltPatchIds, use
the <code>list-patches-in-quilt</code> command.</p>
<pre><code class="language-sh">walrus list-patches-in-quilt 057MX9PAaUIQLliItM_khR_cp5jPHzJWf-CuJr1z1ik
</code></pre>
<h2 id="blob-object-and-blob-id-utilities"><a class="header" href="#blob-object-and-blob-id-utilities">Blob object and blob ID utilities</a></h2>
<p>The command <code>walrus blob-id &lt;FILE&gt;</code> may be used to derive the blob ID of any file. The blob ID is a
commitment to the file, and any blob with the same ID will decode to the same content. The blob
ID is a 256 bit number and represented on some Sui explorer as a decimal large number. The
command <code>walrus convert-blob-id &lt;BLOB_ID_DECIMAL&gt;</code> may be used to convert it to a base64 URL safe
encoding used by the command line tools and other APIs.</p>
<p>The <code>walrus list-blobs</code> command lists all the non expired Sui blob object that the current account
owns, including their blob ID, object ID, and metadata about expiry and deletable status.
The option <code>--include-expired</code> also lists expired blob objects.</p>
<p>The Sui storage cost associated with blob objects may be reclaimed by burning the Sui blob object.
This does not lead to the Walrus blob being deleted, but means that operations such as extending
its lifetime, deleting it, or modifying attributes are no more available.
The <code>walrus burn-blobs --object-ids &lt;BLOB_OBJ_IDS&gt;</code> command may be used to burn a specific list of
blobs object IDs. The <code>--all</code> flag burns all blobs under the user account,
and <code>--all-expired</code> burns all expired blobs under the user account.</p>
<h2 id="blob-attributes"><a class="header" href="#blob-attributes">Blob attributes</a></h2>
<p>Walrus allows a set of key-value attribute pairs to be associated with a blob object. While the key
and values may be arbitrary strings to accommodate any needs of dapps, specific keys are converted
to HTTP headers when serving blobs through aggregators. Each aggregator can decide which headers it
allows through the <code>--allowed-headers</code> CLI option; the defaults can be viewed through <code>walrus aggregator --help</code>.</p>
<p>The command</p>
<pre><code class="language-sh">walrus set-blob-attribute &lt;BLOB_OBJ_ID&gt; --attr "key1" "value1" --attr "key2" "value2"
</code></pre>
<p>sets attributes <code>key1</code> and <code>key2</code> to values <code>value1</code> and <code>value2</code>, respectively. The command
<code>walrus get-blob-attribute &lt;BLOB_OBJ_ID&gt;</code> returns all attributes associated with a blob ID. Finally,</p>
<pre><code class="language-sh">walrus remove-blob-attribute-fields &lt;BLOB_OBJ_ID&gt; --keys "key1,key2"
</code></pre>
<p>deletes the attributes with
keys listed (separated by commas or spaces). All attributes of a blob object may be deleted by
the command <code>walrus remove-blob-attribute &lt;BLOB_OBJ_ID&gt;</code>.</p>
<p>Note that attributes are associated with blob object IDs on Sui, rather than the blob themselves on
Walrus. This means that the gas for storage is reclaimed by deleting attributes. And also that the
same blob contents may have different attributes for different blob objects for the same blob ID.</p>
<h2 id="changing-the-default-configuration"><a class="header" href="#changing-the-default-configuration">Changing the default configuration</a></h2>
<p>Use the <code>--config</code> option to specify a custom path to the
<a href="usage/../usage/setup.html#configuration">configuration location</a>.</p>
<p>The <code>--wallet &lt;WALLET&gt;</code> argument may be used to specify a non-standard Sui wallet configuration
file. And a <code>--gas-budget &lt;GAS_BUDGET&gt;</code> argument may be used to change the maximum amount of Sui (in
MIST) that the command is allowed to use.</p>
<h2 id="logging-and-metrics"><a class="header" href="#logging-and-metrics">Logging and metrics</a></h2>
<p>The <code>walrus</code> CLI allows for multiple levels of logging, which can be turned on via an env variable:</p>
<pre><code class="language-sh">RUST_LOG=walrus=trace walrus info
</code></pre>
<p>By default <code>info</code> level logs are enabled, but <code>debug</code> and <code>trace</code> can give a more intimate
understanding of what a command does, or how it fails.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="json-mode"><a class="header" href="#json-mode">JSON mode</a></h1>
<p>All Walrus client commands are also available in JSON mode. In this mode, all the command-line flags
of the original CLI command can be specified in JSON format. The JSON mode therefore simplifies
programmatic access to the CLI.</p>
<p>For example, to store a blob, run:</p>
<pre><code class="language-sh">walrus json \
    '{
        "config": "path/to/client_config.yaml",
        "command": {
            "store": {
                "files": ["README.md", "LICENSE"],
                "epochs": 100
            }
        }
    }'
</code></pre>
<p>Or, to read a blob knowing the blob ID:</p>
<pre><code class="language-sh">walrus json \
    '{
        "config": "path/to/client_config.yaml",
        "command": {
            "read": {
                "blobId": "4BKcDC0Ih5RJ8R0tFMz3MZVNZV8b2goT6_JiEEwNHQo"
            }
        }
    }'
</code></pre>
<p>All options, default values, and commands are equal to those of the "standard" CLI mode, except that
they are written in "camelCase" instead of "kebab-case".</p>
<p>The <code>json</code> command also accepts input from <code>stdin</code>.</p>
<p>The output of a <code>json</code> command will itself be JSON-formatted, again to simplify parsing the results
in a programmatic way. For example, the JSON output can be piped to the <code>jq</code> command for parsing and
manually extracting relevant fields.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="client-daemon-mode--http-api"><a class="header" href="#client-daemon-mode--http-api">Client Daemon mode &amp; HTTP API</a></h1>
<p>In addition to the CLI and JSON modes, the Walrus client offers a <em>daemon mode</em>. In this mode, it
runs a simple web server offering HTTP interfaces to store and read blobs in an <em>aggregator</em> and
<em>publisher</em> role respectively. We also offer
<a href="usage/web-api.html#public-services">public aggregator and publisher services</a> to try the Walrus HTTP APIs without
the need to run a local client. See how to
<a href="usage/../operator-guide/aggregator.html">operate an aggregator or publisher</a> in the operator documentation.</p>
<h2 id="http-api-usage"><a class="header" href="#http-api-usage">HTTP API Usage</a></h2>
<p>For the following examples, we assume you set the <code>AGGREGATOR</code> and <code>PUBLISHER</code> environment variables
to your desired aggregator and publisher, respectively. For example, the instances run by Mysten
Labs on Walrus Testnet (see <a href="usage/web-api.html#public-services">below</a> for further public options):</p>
<pre><code class="language-sh">AGGREGATOR=https://aggregator.walrus-testnet.walrus.space
PUBLISHER=https://publisher.walrus-testnet.walrus.space
</code></pre>
<div id="admonition-api-specification" class="admonition admonish-tip" role="note" aria-labelledby="admonition-api-specification-title">
<div class="admonition-title">
<div id="admonition-api-specification-title">
<p>API specification</p>
</div>
<a class="admonition-anchor-link" href="usage/web-api.html#admonition-api-specification"></a>
</div>
<div>
<p>Walrus aggregators and publishers expose their API specifications at the path <code>/v1/api</code>. You can
view this in the browser, for example, at <a href="https://aggregator.walrus-testnet.walrus.space/v1/api">https://aggregator.walrus-testnet.walrus.space/v1/api</a>.</p>
</div>
</div>
<h3 id="store"><a class="header" href="#store">Store</a></h3>
<p>You can interact with the daemon through simple HTTP PUT requests. For example, with
<a href="https://curl.se">cURL</a>, you can store blobs using a publisher or daemon as follows:</p>
<pre><code class="language-sh"># store the string `some string` for 1 storage epoch
curl -X PUT "$PUBLISHER/v1/blobs" -d "some string"
# store file `some/file` for 5 storage epochs
curl -X PUT "$PUBLISHER/v1/blobs?epochs=5" --upload-file "some/file"
# store file `some/file` and send the blob object to $ADDRESS
curl -X PUT "$PUBLISHER/v1/blobs?send_object_to=$ADDRESS" --upload-file "some/file"
# store file `some/file` as a deletable blob, instead of a permanent one and send the blob object to $ADDRESS
curl -X PUT "$PUBLISHER/v1/blobs?deletable=true&amp;send_object_to=$ADDRESS" --upload-file "some/file"
</code></pre>
<p>The store HTTP API end points return information about the blob stored in JSON format. When a blob
is stored for the first time, a <code>newlyCreated</code> field contains information about the
new blob:</p>
<pre><code class="language-sh">$ curl -X PUT "$PUBLISHER/v1/blobs" -d "some other string"
{
  "newlyCreated": {
    "blobObject": {
      "id": "0xe91eee8c5b6f35b9a250cfc29e30f0d9e5463a21fd8d1ddb0fc22d44db4eac50",
      "registeredEpoch": 34,
      "blobId": "M4hsZGQ1oCktdzegB6HnI6Mi28S2nqOPHxK-W7_4BUk",
      "size": 17,
      "encodingType": "RS2",
      "certifiedEpoch": 34,
      "storage": {
        "id": "0x4748cd83217b5ce7aa77e7f1ad6fc5f7f694e26a157381b9391ac65c47815faf",
        "startEpoch": 34,
        "endEpoch": 35,
        "storageSize": 66034000
      },
      "deletable": false
    },
    "resourceOperation": {
      "registerFromScratch": {
        "encodedLength": 66034000,
        "epochsAhead": 1
      }
    },
    "cost": 132300
  }
}
</code></pre>
<p>The information returned is the content of the <a href="usage/../dev-guide/sui-struct.html">Sui blob object</a>.</p>
<p>When the publisher finds a certified blob with the same blob ID and a sufficient validity period,
it returns a <code>alreadyCertified</code> JSON structure:</p>
<pre><code class="language-sh">$ curl -X PUT "$PUBLISHER/v1/blobs" -d "some other string"
{
  "alreadyCertified": {
    "blobId": "M4hsZGQ1oCktdzegB6HnI6Mi28S2nqOPHxK-W7_4BUk",
    "event": {
      "txDigest": "4XQHFa9S324wTzYHF3vsBSwpUZuLpmwTHYMFv9nsttSs",
      "eventSeq": "0"
    },
    "endEpoch": 35
  }
}
</code></pre>
<p>The field <code>event</code> returns the <a href="usage/../dev-guide/sui-struct.html">Sui event ID</a> that can be used to
find the transaction that created the Sui Blob object on the Sui explorer or using a Sui SDK.</p>
<h3 id="read"><a class="header" href="#read">Read</a></h3>
<p>Blobs may be read from an aggregator or daemon using HTTP GET using their blob ID.
For example, the following cURL command reads a blob and writes it to an output file:</p>
<pre><code class="language-sh">curl "$AGGREGATOR/v1/blobs/&lt;some blob ID&gt;" -o &lt;some file name&gt;
</code></pre>
<p>Alternatively you may print the contents of a blob in the terminal with the cURL command:</p>
<pre><code class="language-sh">curl "$AGGREGATOR/v1/blobs/&lt;some blob ID&gt;"
</code></pre>
<div id="admonition-content-sniffing" class="admonition admonish-tip" role="note" aria-labelledby="admonition-content-sniffing-title">
<div class="admonition-title">
<div id="admonition-content-sniffing-title">
<p>Content sniffing</p>
</div>
<a class="admonition-anchor-link" href="usage/web-api.html#admonition-content-sniffing"></a>
</div>
<div>
<p>Modern browsers will attempt to sniff the content type for such resources, and will generally do a
good job of inferring content types for media. However, the aggregator on purpose prevents such
sniffing from inferring dangerous executable types such as JavaScript or style sheet types.</p>
</div>
</div>
<p>Blobs may also be read by using the object ID of a Sui blob object or a shared blob.
For example the following
cURL command downloads the blob corresponding to a Sui blob with a specific object ID:</p>
<pre><code class="language-sh">curl "$AGGREGATOR/v1/blobs/by-object-id/&lt;object-id&gt;" -o &lt;some file name&gt;
</code></pre>
<p>Downloading blobs by object ID allows the use of attributes to set some HTTP headers.
The aggregator recognizes the attribute keys <code>content-disposition</code>, <code>content-encoding</code>,
<code>content-language</code>, <code>content-location</code>, <code>content-type</code>, and <code>link</code>, and when present returns
the values in the corresponding HTTP headers.</p>
<h3 id="quilt-http-apis"><a class="header" href="#quilt-http-apis">Quilt HTTP APIs</a></h3>
<p>Walrus supports storing and retrieving multiple blobs as a single unit called a <a href="usage/./quilt.html">quilt</a>.
The publishers and aggregators support <em>quilt</em> related operations.</p>
<p><strong>Note</strong> Quilt APIs are supported with Walrus <em>1.29</em> and higher.</p>
<h4 id="storing-quilts"><a class="header" href="#storing-quilts">Storing quilts</a></h4>
<div id="admonition-tip" class="admonition admonish-tip" role="note" aria-labelledby="admonition-tip-title">
<div class="admonition-title">
<div id="admonition-tip-title">
<p>Tip</p>
</div>
<a class="admonition-anchor-link" href="usage/web-api.html#admonition-tip"></a>
</div>
<div>
<p>All the query parameters available for storing regular blobs (see <a href="usage/web-api.html#store">Store</a> section above) can
also be used when storing quilts.</p>
</div>
</div>
<p>Use the following publisher API to store multiple blobs as a quilt:</p>
<pre><code class="language-sh"># Store two files `document.pdf` and `image.png`, with custom identifiers `contract-v2` and
# `logo-2024, respectively.
curl -X PUT "$PUBLISHER/v1/quilts?epochs=5" \
  -F "contract-v2=@document.pdf" \
  -F "logo-2024=@image.png"

# Store two files with Walrus-native metadata. The metadata are assigned to the blob with
# the same identifier. Note: `_metadata` must be used as the field name for Walrus-native metadata.
curl -X PUT "$PUBLISHER/v1/quilts?epochs=5" \
  -F "quilt-manual=@document.pdf" \
  -F "logo-2025=@image.png" \
  -F '_metadata=[
    {"identifier": "quilt-manual", "tags": {"creator": "walrus", "version": "1.0"}},
    {"identifier": "logo-2025", "tags": {"type": "logo", "format": "png"}}
  ]'
</code></pre>
<div id="admonition-warning" class="admonition admonish-warning" role="note" aria-labelledby="admonition-warning-title">
<div class="admonition-title">
<div id="admonition-warning-title">
<p>Warning</p>
</div>
<a class="admonition-anchor-link" href="usage/web-api.html#admonition-warning"></a>
</div>
<div>
<p>Identifiers must be unique within a quilt.</p>
</div>
</div>
<div id="admonition-info" class="admonition admonish-info" role="note" aria-labelledby="admonition-info-title">
<div class="admonition-title">
<div id="admonition-info-title">
<p>Info</p>
</div>
<a class="admonition-anchor-link" href="usage/web-api.html#admonition-info"></a>
</div>
<div>
<p>Since identifiers cannot start with <code>_</code>, the field name <code>_metadata</code> is reserved for Walrus native
metadata and won't conflict with user-defined identifiers. See
<a href="usage/./quilt.html">Quilt documentation</a> for complete identifier restrictions.</p>
</div>
</div>
<p>The quilt store API returns a JSON response with information about the stored quilt, including
the quilt ID (blobId) and individual blob patch IDs that can be used to retrieve specific blobs
later. The following example shows the command and response (the actual JSON output is returned
as a single line; it's formatted here for readability):</p>
<pre><code class="language-console">$ curl -X PUT "http://127.0.0.1:31415/v1/quilts?epochs=1" \
  -F "walrus.jpg=@./walrus-33.jpg" \
  -F "another_walrus.jpg=@./walrus-46.jpg"
{
  "blobStoreResult": {
    "newlyCreated": {
      "blobObject": {
        "id": "0xe6ac1e1ac08a603aef73a34328b0b623ffba6be6586e159a1d79c5ef0357bc02",
        "registeredEpoch": 103,
        "blobId": "6XUOE-Q5-nAXHRifN6n9nomVDtHZQbGuAkW3PjlBuKo",
        "size": 1782224,
        "encodingType": "RS2",
        "certifiedEpoch": null,
        "storage": {
          "id": "0xbc8ff9b4071927689d59468f887f94a4a503d9c6c5ef4c4d97fcb475a257758f",
          "startEpoch": 103,
          "endEpoch": 104,
          "storageSize": 72040000
        },
        "deletable": false
      },
      "resourceOperation": {
        "registerFromScratch": {
          "encodedLength": 72040000,
          "epochsAhead": 1
        }
      },
      "cost": 12075000
    }
  },
  "storedQuiltBlobs": [
    {
      "identifier": "another_walrus.jpg",
      "quiltPatchId": "6XUOE-Q5-nAXHRifN6n9nomVDtHZQbGuAkW3PjlBuKoBAQDQAA"
    },
    {
      "identifier": "walrus.jpg",
      "quiltPatchId": "6XUOE-Q5-nAXHRifN6n9nomVDtHZQbGuAkW3PjlBuKoB0AB7Ag"
    }
  ]
}
</code></pre>
<h4 id="reading-quilts"><a class="header" href="#reading-quilts">Reading quilts</a></h4>
<p>There are two ways to retrieve blobs from a quilt via the aggregator APIs:</p>
<div id="admonition-info-1" class="admonition admonish-info" role="note" aria-labelledby="admonition-info-1-title">
<div class="admonition-title">
<div id="admonition-info-1-title">
<p>Info</p>
</div>
<a class="admonition-anchor-link" href="usage/web-api.html#admonition-info-1"></a>
</div>
<div>
<p>Currently, only one blob can be retrieved per request. Bulk retrieval of multiple blobs from a
quilt in a single request is not yet supported.</p>
</div>
</div>
<h5 id="by-quilt-patch-id"><a class="header" href="#by-quilt-patch-id">By quilt patch ID</a></h5>
<p>Each blob in a quilt has a unique patch ID. You can retrieve a specific blob using its patch ID:</p>
<pre><code class="language-sh"># Retrieve a blob using its quilt patch ID.
curl "$AGGREGATOR/v1/blobs/by-quilt-patch-id/6XUOE-Q5-nAXHRifN6n9nomVDtHZQbGuAkW3PjlBuKoBAQDQAA" \
</code></pre>
<div id="admonition-tip-1" class="admonition admonish-tip" role="note" aria-labelledby="admonition-tip-1-title">
<div class="admonition-title">
<div id="admonition-tip-1-title">
<p>Tip</p>
</div>
<a class="admonition-anchor-link" href="usage/web-api.html#admonition-tip-1"></a>
</div>
<div>
<p>QuiltPatchIds can be obtained from the store quilt output (as shown above) or by using the
<a href="usage/./client-cli.html#batch-storing-blobs-with-quilt"><code>list-patches-in-quilt</code></a> CLI command.</p>
</div>
</div>
<h5 id="by-quilt-id-and-identifier"><a class="header" href="#by-quilt-id-and-identifier">By quilt ID and identifier</a></h5>
<p>You can also retrieve a blob using the quilt ID and the blob's identifier:</p>
<pre><code class="language-sh"># Retrieve a blob with identifier `walrus.jpg` from the quilt.
curl "$AGGREGATOR/v1/blobs/by-quilt-id/6XUOE-Q5-nAXHRifN6n9nomVDtHZQbGuAkW3PjlBuKo/walrus.jpg" \
</code></pre>
<p>Both methods return the raw blob bytes in the response body. Metadata such as the blob identifier
and tags are returned as HTTP headers:</p>
<ul>
<li><code>X-Quilt-Patch-Identifier</code>: The identifier of the blob within the quilt</li>
<li><code>ETag</code>: The patch ID or quilt ID for caching purposes</li>
<li>Additional custom headers from blob tags (if configured)</li>
</ul>
<h2 id="public-services"><a class="header" href="#public-services">Using a public aggregator or publisher</a></h2>
<p>For some use cases (e.g., a public website), or to just try out the HTTP API, a publicly accessible
aggregator and/or publisher is required. On Walrus Testnet, many entities run public aggregators and
publishers. On Mainnet, there are no public publishers without authentication, as they consume both
SUI and WAL.</p>
<p>See the following subsections for <a href="usage/web-api.html#mainnet">public aggregators on Mainnet</a> and public
<a href="usage/web-api.html#aggregators-testnet">aggregators</a> and <a href="usage/web-api.html#publishers-testnet">publishers</a> on Testnet. We also
provide the <a href="usage/../assets/operators.json">operator lists in JSON format</a>.</p>
<div id="admonition-tip-2" class="admonition admonish-tip" role="note" aria-labelledby="admonition-tip-2-title">
<div class="admonition-title">
<div id="admonition-tip-2-title">
<p>Tip</p>
</div>
<a class="admonition-anchor-link" href="usage/web-api.html#admonition-tip-2"></a>
</div>
<div>
<p>The operator list in JSON format includes additional info about aggregators, namely whether they are
deployed with caching functionality and whether they are found to be functional. The list is updated
once per week.</p>
</div>
</div>
<!-- markdownlint-disable proper-names -->
<h3 id="mainnet"><a class="header" href="#mainnet">Mainnet</a></h3>
<p>The following is a list of known public aggregators on Walrus Mainnet; they are checked
periodically, but each of them may still be temporarily unavailable:</p>
<ul>
<li><code>https://agg.walrus.eosusa.io</code></li>
<li><code>https://aggregator.mainnet.walrus.mirai.cloud</code></li>
<li><code>https://aggregator.suicore.com</code></li>
<li><code>https://aggregator.walrus-mainnet.h2o-nodes.com</code></li>
<li><code>https://aggregator.walrus-mainnet.tududes.com</code></li>
<li><code>https://aggregator.walrus-mainnet.walrus.space</code></li>
<li><code>https://aggregator.walrus.atalma.io</code></li>
<li><code>https://aggregator.walrus.mainnet.mozcomputing.dev</code></li>
<li><code>https://aggregator.walrus.silentvalidator.com</code></li>
<li><code>https://mainnet-aggregator.hoh.zone</code></li>
<li><code>https://mainnet-aggregator.walrus.graphyte.dev</code></li>
<li><code>https://mainnet-walrus-aggregator.kiliglab.io</code></li>
<li><code>https://sm1-walrus-mainnet-aggregator.stakesquid.com</code></li>
<li><code>https://sui-walrus-mainnet-aggregator.bwarelabs.com</code></li>
<li><code>https://suiftly.mhax.io</code></li>
<li><code>https://wal-aggregator-mainnet.staketab.org</code></li>
<li><code>https://walmain.agg.chainflow.io</code></li>
<li><code>https://walrus-agg.mainnet.obelisk.sh</code></li>
<li><code>https://walrus-aggregator-mainnet.chainode.tech:9002</code></li>
<li><code>https://walrus-aggregator.brightlystake.com</code></li>
<li><code>https://walrus-aggregator.chainbase.online</code></li>
<li><code>https://walrus-aggregator.n1stake.com</code></li>
<li><code>https://walrus-aggregator.natsai.xyz</code></li>
<li><code>https://walrus-aggregator.rockfin.io</code></li>
<li><code>https://walrus-aggregator.rubynodes.io</code></li>
<li><code>https://walrus-aggregator.stakely.io</code></li>
<li><code>https://walrus-aggregator.stakin-nodes.com</code></li>
<li><code>https://walrus-aggregator.staking4all.org</code></li>
<li><code>https://walrus-aggregator.starduststaking.com</code></li>
<li><code>https://walrus-aggregator.talentum.id</code></li>
<li><code>https://walrus-aggregator.thcloud.ai</code></li>
<li><code>https://walrus-aggregator.thepassivetrust.com</code></li>
<li><code>https://walrus-cache-mainnet.latitude.sh</code></li>
<li><code>https://walrus-cache-mainnet.overclock.run</code></li>
<li><code>https://walrus-main-aggregator.4everland.org</code></li>
<li><code>https://walrus-mainnet-aggregator-1.zkv.xyz</code></li>
<li><code>https://walrus-mainnet-aggregator.crouton.digital</code></li>
<li><code>https://walrus-mainnet-aggregator.dzdaic.com</code></li>
<li><code>https://walrus-mainnet-aggregator.everstake.one</code></li>
<li><code>https://walrus-mainnet-aggregator.imperator.co</code></li>
<li><code>https://walrus-mainnet-aggregator.luckyresearch.org</code></li>
<li><code>https://walrus-mainnet-aggregator.nami.cloud</code></li>
<li><code>https://walrus-mainnet-aggregator.nodeinfra.com</code></li>
<li><code>https://walrus-mainnet-aggregator.redundex.com</code></li>
<li><code>https://walrus-mainnet-aggregator.rpc101.org</code></li>
<li><code>https://walrus-mainnet-aggregator.stakecraft.com</code></li>
<li><code>https://walrus-mainnet-aggregator.stakeengine.co.uk</code></li>
<li><code>https://walrus-mainnet-aggregator.stakingdefenseleague.com.</code></li>
<li><code>https://walrus-mainnet-aggregator.trusted-point.com</code></li>
<li><code>https://walrus.aggregator.stakepool.dev.br</code></li>
<li><code>https://walrus.blockscope.net</code></li>
<li><code>https://walrus.globalstake.io</code></li>
<li><code>https://walrus.lakestake.io</code></li>
<li><code>https://walrus.lionscraft.blockscape.network:9000</code></li>
<li><code>https://walrus.prostaking.com:9443</code></li>
<li><code>https://walrus.veera.com</code></li>
<li><code>https://walrusagg.pops.one</code></li>
<li><code>http://walrus-aggregator.winsnip.site:9000</code></li>
<li><code>http://walrus.equinoxdao.xyz:9000</code></li>
<li><code>http://67.220.194.10:9000</code></li>
</ul>
<h3 id="testnet"><a class="header" href="#testnet">Testnet</a></h3>
<h4 id="aggregators-testnet"><a class="header" href="#aggregators-testnet">Aggregators</a></h4>
<p>The following is a list of known public aggregators on Walrus Testnet; they are checked
periodically, but each of them may still be temporarily unavailable:</p>
<ul>
<li><code>https://agg.test.walrus.eosusa.io</code></li>
<li><code>https://aggregator.testnet.walrus.atalma.io</code></li>
<li><code>https://aggregator.testnet.walrus.mirai.cloud</code></li>
<li><code>https://aggregator.walrus-01.tududes.com</code></li>
<li><code>https://aggregator.walrus-testnet.h2o-nodes.com</code></li>
<li><code>https://aggregator.walrus-testnet.walrus.space</code></li>
<li><code>https://aggregator.walrus.banansen.dev</code></li>
<li><code>https://aggregator.walrus.testnet.mozcomputing.dev</code></li>
<li><code>https://sm1-walrus-testnet-aggregator.stakesquid.com</code></li>
<li><code>https://sui-walrus-tn-aggregator.bwarelabs.com</code></li>
<li><code>https://suiftly-testnet-agg.mhax.io</code></li>
<li><code>https://testnet-aggregator-walrus.kiliglab.io</code></li>
<li><code>https://testnet-aggregator.walrus.graphyte.dev</code></li>
<li><code>https://testnet-walrus.globalstake.io</code></li>
<li><code>https://testnet.aggregator.walrus.silentvalidator.com</code></li>
<li><code>https://wal-aggregator-testnet.staketab.org</code></li>
<li><code>https://walrus-agg-test.bucketprotocol.io</code></li>
<li><code>https://walrus-agg-testnet.chainode.tech:9002</code></li>
<li><code>https://walrus-agg.testnet.obelisk.sh</code></li>
<li><code>https://walrus-aggregator-testnet.cetus.zone</code></li>
<li><code>https://walrus-aggregator-testnet.haedal.xyz</code></li>
<li><code>https://walrus-aggregator-testnet.n1stake.com</code></li>
<li><code>https://walrus-aggregator-testnet.staking4all.org</code></li>
<li><code>https://walrus-aggregator-testnet.suisec.tech</code></li>
<li><code>https://walrus-aggregator.thcloud.dev</code></li>
<li><code>https://walrus-test-aggregator.thepassivetrust.com</code></li>
<li><code>https://walrus-testnet-aggregator-1.zkv.xyz</code></li>
<li><code>https://walrus-testnet-aggregator.brightlystake.com</code></li>
<li><code>https://walrus-testnet-aggregator.chainbase.online</code></li>
<li><code>https://walrus-testnet-aggregator.chainflow.io</code></li>
<li><code>https://walrus-testnet-aggregator.crouton.digital</code></li>
<li><code>https://walrus-testnet-aggregator.dzdaic.com</code></li>
<li><code>https://walrus-testnet-aggregator.everstake.one</code></li>
<li><code>https://walrus-testnet-aggregator.luckyresearch.org</code></li>
<li><code>https://walrus-testnet-aggregator.natsai.xyz</code></li>
<li><code>https://walrus-testnet-aggregator.nodeinfra.com</code></li>
<li><code>https://walrus-testnet-aggregator.nodes.guru</code></li>
<li><code>https://walrus-testnet-aggregator.redundex.com</code></li>
<li><code>https://walrus-testnet-aggregator.rpc101.org</code></li>
<li><code>https://walrus-testnet-aggregator.rubynodes.io</code></li>
<li><code>https://walrus-testnet-aggregator.stakecraft.com</code></li>
<li><code>https://walrus-testnet-aggregator.stakeengine.co.uk</code></li>
<li><code>https://walrus-testnet-aggregator.stakely.io</code></li>
<li><code>https://walrus-testnet-aggregator.stakeme.pro</code></li>
<li><code>https://walrus-testnet-aggregator.stakin-nodes.com</code></li>
<li><code>https://walrus-testnet-aggregator.stakingdefenseleague.com.</code></li>
<li><code>https://walrus-testnet-aggregator.starduststaking.com</code></li>
<li><code>https://walrus-testnet-aggregator.talentum.id</code></li>
<li><code>https://walrus-testnet-aggregator.trusted-point.com</code></li>
<li><code>https://walrus-testnet.blockscope.net</code></li>
<li><code>https://walrus-testnet.lionscraft.blockscape.network:9000</code></li>
<li><code>https://walrus-testnet.validators.services.kyve.network/aggregate</code></li>
<li><code>https://walrus-testnet.veera.com</code></li>
<li><code>https://walrus-tn.juicystake.io:9443</code></li>
<li><code>https://walrus.testnet.aggregator.stakepool.dev.br</code></li>
<li><code>https://walrusagg.testnet.pops.one</code></li>
<li><code>http://cs74th801mmedkqu25ng.bdnodes.net:8443</code></li>
<li><code>http://walrus-storage.testnet.nelrann.org:9000</code></li>
<li><code>http://walrus-testnet.equinoxdao.xyz:9000</code></li>
<li><code>http://walrus-testnet.suicore.com:9000</code></li>
</ul>
<h4 id="publishers-testnet"><a class="header" href="#publishers-testnet">Publishers</a></h4>
<p>The following is a list of known public publishers on Walrus Testnet; they are checked
periodically, but each of them may still be temporarily unavailable:</p>
<ul>
<li><code>https://publisher.testnet.walrus.atalma.io</code></li>
<li><code>https://publisher.walrus-01.tududes.com</code></li>
<li><code>https://publisher.walrus-testnet.h2o-nodes.com</code></li>
<li><code>https://publisher.walrus-testnet.walrus.space</code></li>
<li><code>https://publisher.walrus.banansen.dev</code></li>
<li><code>https://sm1-walrus-testnet-publisher.stakesquid.com</code></li>
<li><code>https://sui-walrus-testnet-publisher.bwarelabs.com</code></li>
<li><code>https://suiftly-testnet-pub.mhax.io</code></li>
<li><code>https://testnet-publisher-walrus.kiliglab.io</code></li>
<li><code>https://testnet-publisher.walrus.graphyte.dev</code></li>
<li><code>https://testnet.publisher.walrus.silentvalidator.com</code></li>
<li><code>https://wal-publisher-testnet.staketab.org</code></li>
<li><code>https://walrus-publish-testnet.chainode.tech:9003</code></li>
<li><code>https://walrus-publisher-testnet.n1stake.com</code></li>
<li><code>https://walrus-publisher-testnet.staking4all.org</code></li>
<li><code>https://walrus-publisher.rubynodes.io</code></li>
<li><code>https://walrus-publisher.thcloud.dev</code></li>
<li><code>https://walrus-testnet-published.luckyresearch.org</code></li>
<li><code>https://walrus-testnet-publisher-1.zkv.xyz</code></li>
<li><code>https://walrus-testnet-publisher.chainbase.online</code></li>
<li><code>https://walrus-testnet-publisher.crouton.digital</code></li>
<li><code>https://walrus-testnet-publisher.dzdaic.com</code></li>
<li><code>https://walrus-testnet-publisher.everstake.one</code></li>
<li><code>https://walrus-testnet-publisher.nami.cloud</code></li>
<li><code>https://walrus-testnet-publisher.natsai.xyz</code></li>
<li><code>https://walrus-testnet-publisher.nodeinfra.com</code></li>
<li><code>https://walrus-testnet-publisher.nodes.guru</code></li>
<li><code>https://walrus-testnet-publisher.redundex.com</code></li>
<li><code>https://walrus-testnet-publisher.rpc101.org</code></li>
<li><code>https://walrus-testnet-publisher.stakecraft.com</code></li>
<li><code>https://walrus-testnet-publisher.stakeengine.co.uk</code></li>
<li><code>https://walrus-testnet-publisher.stakely.io</code></li>
<li><code>https://walrus-testnet-publisher.stakeme.pro</code></li>
<li><code>https://walrus-testnet-publisher.stakingdefenseleague.com.</code></li>
<li><code>https://walrus-testnet-publisher.starduststaking.com</code></li>
<li><code>https://walrus-testnet-publisher.trusted-point.com</code></li>
<li><code>https://walrus-testnet.blockscope.net:11444</code></li>
<li><code>https://walrus-testnet.validators.services.kyve.network/publish</code></li>
<li><code>https://walrus.testnet.publisher.stakepool.dev.br</code></li>
<li><code>http://walrus-publisher-testnet.cetus.zone:9001</code></li>
<li><code>http://walrus-publisher-testnet.haedal.xyz:9001</code></li>
<li><code>http://walrus-publisher-testnet.suisec.tech:9001</code></li>
<li><code>http://walrus-storage.testnet.nelrann.org:9001</code></li>
<li><code>http://walrus-testnet.equinoxdao.xyz:9001</code></li>
<li><code>http://walrus-testnet.suicore.com:9001</code></li>
<li><code>http://walrus.testnet.pops.one:9001</code></li>
<li><code>http://waltest.chainflow.io:9001</code></li>
</ul>
<!-- markdownlint-enable proper-names -->
<p>Most of these limit requests to 10 MiB by default. If you want to upload larger files, you need to
<a href="usage/../operator-guide/aggregator.html#local-daemon">run your own publisher</a> or use
the <a href="usage/./client-cli.html">CLI</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="software-development-kits-sdks-and-other-tools"><a class="header" href="#software-development-kits-sdks-and-other-tools">Software development kits (SDKs) and other tools</a></h1>
<h2 id="sdks-maintained-by-mysten-labs"><a class="header" href="#sdks-maintained-by-mysten-labs">SDKs maintained by Mysten Labs</a></h2>
<p>Mysten Labs has built and published a <a href="https://sdk.mystenlabs.com/walrus">Walrus TypeScript SDK</a>,
which supports a wide variety of operations. See also the related
<a href="https://github.com/MystenLabs/ts-sdks/tree/main/packages/walrus/examples">examples</a>.</p>
<p>The Walrus core team is also actively working on a Rust SDK for Walrus, which will be made available
some time after the Mainnet launch.</p>
<p>For data security, use the <a href="https://www.npmjs.com/package/@mysten/seal">TypeScript SDK</a> for Seal.
It provides threshold encryption and onchain access control for decentralized data protection.
Also, refer to <a href="usage/../dev-guide/data-security.html">Data security</a> for details.</p>
<h2 id="community-maintained-sdks"><a class="header" href="#community-maintained-sdks">Community-maintained SDKs</a></h2>
<p>Besides these official SDKs, there also exist a few unofficial third-party SDKs for interacting
with the <a href="usage/./web-api.html#http-api-usage">HTTP API</a> exposed by Walrus aggregators and publishers:</p>
<ul>
<li><a href="https://github.com/namihq/walrus-go">Walrus Go SDK</a> (maintained by the <em>Nami Cloud</em> team)</li>
<li><a href="https://github.com/suicore/walrus-sdk-php">Walrus PHP SDK</a> (maintained by the <em>Suicore</em> team)</li>
<li><a href="https://github.com/standard-crypto/walrus-python">Walrus Python SDK</a> (maintained by the <em>Standard
Crypto</em> team)</li>
</ul>
<p>Finally, there is <a href="https://docs.tusky.io/about/about-tusky">Tusky</a>, a complete data storage platform
built on Walrus, including encryption, HTTP APIs, sharing capabilities, and more.
Tusky maintains its own <a href="https://github.com/tusky-io/ts-sdk">TypeScript SDK</a>.</p>
<h2 id="explorers"><a class="header" href="#explorers">Explorers</a></h2>
<p>There is currently the <a href="https://walruscan.com/">Walruscan</a> blob explorer built and maintained by the
<em>Staketab</em> team, which supports exploring blobs, blob events, operators, etc. It also supports
staking operations.</p>
<p>See the <a href="https://github.com/MystenLabs/awesome-walrus?tab=readme-ov-file#visualization"><em>Awesome Walrus</em> repository</a>
for more visualization tools.</p>
<h2 id="other-tools"><a class="header" href="#other-tools">Other tools</a></h2>
<p>There are many other tools built by the community for visualization, monitoring, etc. For a full
list, see the <a href="https://github.com/MystenLabs/awesome-walrus"><em>Awesome Walrus</em> repository</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="developer-guide"><a class="header" href="#developer-guide">Developer guide</a></h1>
<p>This guide introduces all the concepts needed to build applications that use Walrus as a storage
or availability layer. The <a href="dev-guide/../design/overview.html">overview</a> provides more background and explains
in more detail how Walrus operates internally.</p>
<p>This developer guide describes the following:</p>
<ul>
<li><a href="dev-guide/components.html">Components</a> of Walrus of interest to developers that wish to use it for
storage or availability.</li>
<li><a href="dev-guide/dev-operations.html">Operations</a> supported through client binaries, APIs, or Sui operations.</li>
<li><a href="dev-guide/costs.html">Cost</a> components of storage, how they are measured, and considerations for managing those.</li>
<li><a href="dev-guide/sui-struct.html">The Sui structures</a> Walrus uses to store metadata, and how they can be read
from Sui smart contracts, or through the Sui SDK.</li>
<li><a href="dev-guide/data-security.html">Data security</a> guidance for encryption and access control of data stored on Walrus.</li>
</ul>
<p>Refer again to the <a href="dev-guide/../glossary.html">glossary</a> of terms as a reference.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="components"><a class="header" href="#components">Components</a></h1>
<p>From a developer perspective, some Walrus components are objects and smart contracts on
Sui, and some components are Walrus-specific binaries and services. As a rule, Sui is used to
manage blob and storage node metadata, while Walrus-specific services are used to store and
read blob contents, which can be very large.</p>
<p>Walrus defines a number of objects and smart contracts on Sui:</p>
<ul>
<li>A shared <em>system object</em> records and manages the current committee of storage nodes.</li>
<li><em>Storage resources</em> represent empty storage space that may be used to store blobs.</li>
<li><em>Blob resources</em> represent blobs being registered and certified as stored.</li>
<li>Changes to these objects emit <em>Walrus-related events</em>.</li>
</ul>
<p>The Walrus system object ID can be found in the Walrus <code>client_config.yaml</code> file (see
<a href="dev-guide/../usage/setup.html#configuration">Configuration</a>). You may use any Sui explorer to look at its
content, as well as explore the content of blob objects. There is more information about these in
the <a href="dev-guide/sui-struct.html">quick reference to the Walrus Sui structures</a>.</p>
<p>Walrus is also composed of a number of Walrus-specific services and binaries:</p>
<ul>
<li>A client (binary) can be executed locally and provides a
<a href="dev-guide/../usage/client-cli.html">Command Line Interface (CLI)</a>, a <a href="dev-guide/../usage/json-api.html">JSON API</a>
and an <a href="dev-guide/../usage/web-api.html">HTTP API</a> to perform Walrus operations.</li>
<li>Aggregator services allow reading blobs via HTTP requests.</li>
<li>Publisher services are used to store blobs to Walrus.</li>
<li>A set of storage nodes store encoded blobs. These nodes form the decentralized
storage infrastructure of Walrus.</li>
</ul>
<p>Aggregators, publishers, and other services use the client APIs to interact with Walrus. End users
of services using Walrus interact with the store via custom services, aggregators, or publishers
that expose HTTP APIs to avoid the need to run locally a binary client.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="operations"><a class="header" href="#operations">Operations</a></h1>
<h2 id="blob-encoding-and-blob-id"><a class="header" href="#blob-encoding-and-blob-id">Blob encoding and blob ID</a></h2>
<p>Walrus stores blobs across storage nodes in an <a href="dev-guide/../design/encoding.html">encoded form</a>, and refers
to blobs by their <em>blob ID</em>. The blob ID is deterministically derived from the content of a blob
and the Walrus configuration. The blob ID of two files with the same content will be the same.</p>
<p>You can derive the blob ID of a file locally using the command: <code>walrus blob-id &lt;file path&gt;</code>.</p>
<h2 id="store-1"><a class="header" href="#store-1">Store</a></h2>
<p>Walrus may be used to <strong>store a blob</strong>, via the native client APIs or a publisher.</p>
<div id="admonition-public-access" class="admonition admonish-danger" role="note" aria-labelledby="admonition-public-access-title">
<div class="admonition-title">
<div id="admonition-public-access-title">
<p>Public access</p>
</div>
<a class="admonition-anchor-link" href="dev-guide/dev-operations.html#admonition-public-access"></a>
</div>
<div>
<p><strong>All blobs stored in Walrus are public and discoverable by all.</strong> Therefore you must not use Walrus
to store anything that contains secrets or private data without additional measures to protect
confidentiality.</p>
</div>
</div>
<p>Under the hood a number of operations happen both on Sui as well as on storage nodes:</p>
<ul>
<li>The client or publisher encodes the blob and derives a <em>blob ID</em> that identifies the blob. This
is a <code>u256</code> often encoded as a URL-safe base64 string.</li>
<li>A transaction is executed on Sui to purchase some storage from the system object, and then to
<em>register the blob ID</em> occupying this storage. Client APIs return the <em>Sui blob object ID</em>. The
transactions use SUI to purchase storage and pay for gas.</li>
<li>Encoded slivers of the blob are distributed to all storage nodes. They each sign a receipt.</li>
<li>Signed receipts are aggregated and submitted to the Sui blob object to <em>certify the blob</em>.
Certifying a blob emits a Sui event with the blob ID and the period of availability.</li>
</ul>
<p>A blob is considered available on Walrus once the corresponding Sui blob object has been
certified in the final step. The steps involved in a store operation can be executed by the binary
client, or a publisher that accepts and publishes blobs via HTTP.</p>
<p>Walrus currently allows the storage of blobs up to a maximum size that may be determined
through the <a href="dev-guide/../usage/client-cli.html#walrus-system-information"><code>walrus info</code></a> CLI command. The
maximum blob size is currently 13.3 GiB. You may store larger blobs by splitting them into
smaller chunks.</p>
<p>Blobs are stored for a certain number of <em>epochs</em>, as specified at the time they were stored. Walrus
storage nodes ensure that within these epochs a read succeeds. The current Mainnet uses an epoch
duration of 2 weeks.</p>
<h2 id="read-1"><a class="header" href="#read-1">Read</a></h2>
<p>Walrus can also be used to <strong>read a blob</strong> after it is stored by providing its blob ID.
A read is executed by performing the following steps:</p>
<ul>
<li>The system object on Sui is read to determine the Walrus storage node committee.</li>
<li>A number of storage nodes are queried for blob metadata and the slivers they store.</li>
<li>The blob is reconstructed from the recovered slivers and checked against the blob ID.</li>
</ul>
<p>The steps involved in the read operation are performed by the binary client, or the aggregator
service that exposes an HTTP interface to read blobs. Reads are extremely resilient and will succeed
in recovering the blob in all cases even if up to one-third of storage nodes are unavailable. In
most cases, after synchronization is complete, blob can be read even if two-thirds of storage nodes
are down.</p>
<h2 id="certify-availability"><a class="header" href="#certify-availability">Certify Availability</a></h2>
<p>Walrus can be used to <strong>certify the availability of a blob</strong> using Sui. Checking that this happened
may currently be done in 3 different ways:</p>
<ul>
<li>A Sui SDK read can be
used to authenticate the certified blob event emitted when the blob ID was certified on Sui. The
client <code>walrus blob-status</code> command may be used to identify the event ID that needs to be checked.</li>
<li>A Sui SDK read may be
used to authenticate the Sui blob object corresponding to the blob ID, and check it is certified,
before the expiry epoch, and not deletable.</li>
<li>A Sui smart contract can read the blob object on Sui (or a reference to it) to check
it is certified, before the expiry epoch, and not deletable.</li>
</ul>
<p>The underlying protocol of the
<a href="https://github.com/MystenLabs/sui/tree/main/crates/sui-light-client">Sui light client</a>
returns digitally signed evidence for emitted events
or objects, and can be used by off-line or non-interactive applications as a proof of availability
for the blob ID for a certain number of epochs.</p>
<p>Once a blob is certified, Walrus will ensure that sufficient slivers will always be
available on storage nodes to recover it within the specified epochs.</p>
<h2 id="delete"><a class="header" href="#delete">Delete</a></h2>
<p>Stored blobs can be optionally set as deletable by the user that creates them. This metadata is
stored in the Sui blob object, and whether a blob is deletable or not is included in certified blob
events. A deletable blob may be deleted by the owner of the blob object, to reclaim and re-use
the storage resource associated with it.</p>
<p>If no other copies of the blob exist in Walrus, deleting a blob will eventually make it
unrecoverable using read commands. However, if other copies of the blob exist on Walrus, a delete
command will reclaim storage space for the user that invoked it, but will not make the blob
unavailable until all other copies have been deleted or expire.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="storage-costs"><a class="header" href="#storage-costs">Storage costs</a></h1>
<p>Storing blobs on Walrus Mainnet consumes WAL for the storage operation, and SUI for executing
transactions on Sui. This section provides a summary of the costs involved, and also some
advice on how to manage or minimize them for specific scenarios.</p>
<p>This document deals with costs of storage specifically. You can find a wider discussion about
the <a href="https://www.walrus.xyz/wal-token">WAL tokenonmics</a>, and the role it plays in the
<a href="dev-guide/../walrus.pdf">Walrus delegated proof of stake system</a> elsewhere.</p>
<h2 id="understanding-the-4-sources-of-cost"><a class="header" href="#understanding-the-4-sources-of-cost">Understanding the 4 sources of cost</a></h2>
<p>The four sources of cost associated with Walrus Storage are acquiring storage resources, uploads,
Sui transactions, and Sui objects on chain:</p>
<ul>
<li>
<p><strong>Storage resources.</strong> A storage resource is needed to store a blob, with an appropriate capacity
and epoch duration.
Storage resources can be acquired from the Walrus system contract while there is free space
available on the system against some WAL. Other options are also available, such as receiving it
from other parties, or splitting a larger resource bought occasionally into smaller ones (see
discussion below).</p>
</li>
<li>
<p><strong>Upload costs.</strong> Upon blob registration, some WAL is charged to cover the costs of data upload.
This ensures that deleting blobs and reusing the same storage resource for storing a new blob is
sustainable for the system.</p>
</li>
<li>
<p><strong>Sui transactions.</strong> Storing a blob involves up to three on-chain actions on Sui.
One to acquire a storage resource, another (possibly combined with the first) to
register the blob and associate it with a blob ID, and a final one to certify the blob
as available. These incur some Sui gas costs in SUI to cover the costs of
computation.</p>
</li>
<li>
<p><strong>On chain objects.</strong> Finally, Walrus blobs are represented as Sui objects
on-chain. Creating these objects sets aside some SUI into the Sui storage fund,
and most of it is refunded when the objects are deleted after they are not needed
any more.</p>
</li>
</ul>
<p>The size of the storage resource needed to store a blob, and the size taken into account to pay
for the upload costs, corresponds to the <em>encoded size</em> of a
blob. The encoded size of a blob is the size of the erasure coded blob, which is about 5x larger
than the unencoded original blob size, and the size of some metadata that is independent of the
size of the blob. Since the fixed size per-blob metadata is quite large (about 64MB in the worse
case), the cost of storing small blobs (&lt; 10MB) is dominated by this, and the size of storing
larger blobs is dominated by their increasing size. See
<a href="dev-guide/costs.html#reducing-costs-for-small-blobs">Reducing costs for small blobs</a> for more information on cost
optimization strategies.</p>
<p>The Walrus CLI uses some strategies to lower costs but is not guaranteed to be optimal for all
use-cases. For high volume or other cost sensitive users there may be strategies that further
lower costs, which we discuss below.</p>
<h2 id="measuring-costs"><a class="header" href="#measuring-costs">Measuring costs</a></h2>
<!-- WAL-723: Update this after changes are made to cost outputs. -->
<p>The most accurate way to measure the costs of a store for a certain size is to perform a store
for a blob of the same size, and observe the costs in SUI and WAL in a Sui explorer (or directly
through Sui RPC calls). Blob contents do not affect costs.</p>
<p>A <code>walrus store &lt;FILENAME&gt; --epochs 1</code> command will result in 2 transactions:</p>
<ul>
<li>
<p>The first transaction will perform a <code>reserve_space</code> (if no storage resource of
appropriate size exists) and <code>register_blob</code>; and will affect the balances of both
SUI and WAL.</p>
</li>
<li>
<p>The second will perform a single call to <code>certify_blob</code> and will only change the SUI balance.</p>
</li>
</ul>
<p>You can observe the storage rebate on an explorer by burning the resulting blob objects
using the command <code>walrus burn-blobs --object-ids &lt;BLOB_OBJECT_ID&gt;</code>. As discussed below,
burning the object on Sui does not delete the blob on Walrus.</p>
<p>As a rule of thumb, the SUI costs of <code>register_blob</code> and <code>certify_blob</code> are independent of
blob size or epoch lifetime. The WAL costs of <code>register_blob</code> are linear in the encoded size of
the blob (both erasure coding and metadata). Calls to <code>reserve_space</code> have SUI costs that
grow in the number of epochs, and WAL costs linear with both encoded size and the number of epochs.</p>
<p>A few commands output information that can assist in cost estimations, without submitting
transactions:</p>
<ul>
<li>
<p>The <code>walrus info</code> command displays the current costs for buying storage resources from the
system contract and also cost of uploads.</p>
</li>
<li>
<p>The <code>walrus store --dry-run ...</code> command outputs the encoded size that is used in calculations
of WAL costs. The <code>--dry-run</code> parameter ensures no transactions are submitted on chain.</p>
</li>
</ul>
<h2 id="managing-and-minimizing-costs"><a class="header" href="#managing-and-minimizing-costs">Managing and minimizing costs</a></h2>
<p>There are multiple ways of acquiring storage resources, which impact their costs.</p>
<p>The primary means is by sending some WAL to the Walrus system contract to "buy" a storage resource
for some size in bytes and a defined lifetime in epochs.</p>
<p>Furthermore, before acquiring a storage resource, the CLI client will use any user-owned storage
resource of an appropriate length (in epochs and size in bytes). However, the current implementation
does not make any attempts yet to properly split or merge storage resources.</p>
<!-- TODO(WAL-363): Update this as soon as better storage management is implemented. -->
<p>There are a few ways to minimize costs associated with the need for storage resources. First,
acquiring resources from the system contract involves at least one Sui
transaction interacting with a relatively complex shared object Sui smart contract. Therefore,
acquiring larger storage resources at once both in length and size minimizes the SUI gas costs.
Storage resources can then be split and merged to store smaller blobs or blobs for shorter time
periods. Packing multiple smart contract calls into a single Sui PTB to manage storage resource
acquisition, splitting and merging can also keep costs down.</p>
<p>Storage resources can be reclaimed and reused for the remainder of their validity period,
by deleting non-expired blobs that were created as <em>deletable</em>.
Therefore, dapps that only need to store data for less time
than a multiple of full epochs (two weeks on Mainnet), can potentially reduce costs by actively
deleting blobs, and re-using the storage for other blobs.</p>
<p>Storage resources can be transferred and traded, and we foresee other markets and ways to
acquire them to exist in the future.</p>
<p>Registering blobs and certifying them costs SUI to cover gas costs, and WAL to cover upload costs.
Each blob needs to go through both of these and therefore not much may be done about these costs.
However, multiple blobs may be registered or certified in a single Sui PTB both to reduce latency
and, possibly, costs when storing multiple blobs. The CLI client uses this approach when uploading
multiple blobs simultaneously. Within the same PTB storage resource management actions can also be
performed to acquire storage or split/merge storage resources to further reduce latency and costs.</p>
<p>Each blob stored on Walrus also creates a Sui object representing the blob. While these objects are
not large and only contains metadata, storage on Sui is comparatively expensive and object costs
can add up. Once the blob validity period expires the blob object has no use and can be burned.
This will reclaim most of the storage costs associated with storage on Sui.</p>
<p>The blob objects are used to manage blob lifecycle, such as extending blob lifetimes, deleting
them to reclaim storage resources, or adding attributes. In case none of these actions are needed
anymore, the blob object may be burned through the CLI or a smart contract call, to save on Sui
storage costs. This does not delete the blob on Walrus. Depending on the relative costs of SUI and
WAL it might be cheaper to burn a long lived blob object, and subsequently re-registering and
re-certifying them close to the end of its lifetime to extend it.</p>
<h3 id="reducing-costs-for-small-blobs"><a class="header" href="#reducing-costs-for-small-blobs">Reducing costs for small blobs</a></h3>
<p>Walrus <a href="dev-guide/../usage/quilt.html">Quilt</a> is a batch storage tool that reduces storage costs for small
blobs. When multiple blobs are stored together, the metadata costs are amortized across the batch.
Quilt can also significantly reduce Sui computation and storage costs, as detailed in the
<a href="dev-guide/../usage/quilt.html#lower-cost">Lower Cost</a> section.</p>
<h2 id="the-future"><a class="header" href="#the-future">The future</a></h2>
<p>The Walrus team has planned initiatives to reduce costs for all blob sizes by making metadata
smaller, as well as further improving the efficiency of Quilt for small blob storage.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="sui-structures"><a class="header" href="#sui-structures">Sui Structures</a></h1>
<p>This section is optional and enables advanced use cases, leveraging Sui smart contract interactions
with the Walrus smart contract.</p>
<p>You can interact with Walrus purely through the client CLI, and JSON or HTTP APIs provided, without
querying or executing transactions on Sui directly. However, Walrus uses Sui to manage its metadata
and smart contract developers can read information about the Walrus system, as well as stored blobs,
on Sui.</p>
<p>The
<a href="https://github.com/MystenLabs/walrus/tree/main/contracts">Move code of the Walrus system contracts</a>
is available and you can find an
<a href="https://github.com/MystenLabs/walrus/tree/main/docs/examples">example smart contract</a> that
implements a wrapped blob. The following sections provide further insights into the contract and an
overview of how you may use Walrus objects in your own Sui smart contracts.</p>
<h2 id="blob-and-storage-objects"><a class="header" href="#blob-and-storage-objects">Blob and storage objects</a></h2>
<p>Walrus blobs are represented as Sui objects of type <code>Blob</code>. A blob is first registered, indicating
that the storage nodes should expect slivers from a Blob ID to be stored. Then a blob is certified,
indicating that a sufficient number of slivers have been stored to guarantee the blob's
availability. When a blob is certified, its <code>certified_epoch</code> field contains the epoch in which it
was certified.</p>
<p>A <code>Blob</code> object is always associated with a <code>Storage</code> object, reserving enough space for
a long enough period for the blob's storage. A certified blob is available for the period the
underlying storage resource guarantees storage.</p>
<p>Concretely, <code>Blob</code> and <code>Storage</code> objects have the following fields, which can be read through the
Sui SDKs:</p>
<pre><code class="language-move">/// Reservation for storage for a given period, which is inclusive start, exclusive end.
public struct Storage has key, store {
    id: UID,
    start_epoch: u32,
    end_epoch: u32,
    storage_size: u64,
}

/// The blob structure represents a blob that has been registered to with some storage,
/// and then may eventually be certified as being available in the system.
public struct Blob has key, store {
    id: UID,
    registered_epoch: u32,
    blob_id: u256,
    size: u64,
    encoding_type: u8,
    // Stores the epoch first certified if any.
    certified_epoch: option::Option&lt;u32&gt;,
    storage: Storage,
    // Marks if this blob can be deleted.
    deletable: bool,
}
</code></pre>
<p>Public functions associated with these objects can be found in the respective <a href="https://github.com/MystenLabs/walrus/tree/main/contracts/walrus/sources/system/storage_resource.move"><code>storage_resource</code>
move module</a>
and <a href="https://github.com/MystenLabs/walrus/tree/main/contracts/walrus/sources/system/blob.move"><code>blob</code> move module</a>.
Storage resources can be split and merged in time and data capacity, and can be transferred between
users allowing complex contracts to be created.</p>
<h2 id="events"><a class="header" href="#events">Events</a></h2>
<p>Walrus uses <a href="https://github.com/MystenLabs/walrus/blob/main/contracts/walrus/sources/system/events.move">custom Sui events</a>
extensively to notify storage nodes of updates concerning stored Blobs and the state of the network.
Applications may also use Sui RPC facilities to observe Walrus related events.</p>
<p>When a blob is first registered, a <code>BlobRegistered</code> event is emitted that informs storage nodes
that they should expect slivers associated with its Blob ID. Eventually when the blob is
certified, a <code>BlobCertified</code> is emitted containing information about the blob ID and the epoch
after which the blob will be deleted. Before that epoch the blob is guaranteed to be available.</p>
<p>The <code>BlobCertified</code> event with <code>deletable</code> set to false and an <code>end_epoch</code> in the future indicates
that the blob will be available until this epoch. A light client proof that this event was emitted
for a blob ID constitutes a proof of availability for the data with this blob ID. When a deletable
blob is deleted, a <code>BlobDeleted</code> event is emitted.</p>
<p>The <code>InvalidBlobID</code> event is emitted when storage nodes detect an incorrectly encoded blob.
Anyone attempting a read on such a blob is guaranteed to also detect it as invalid.</p>
<p>System level events such as <code>EpochChangeStart</code> and <code>EpochChangeDone</code> indicate transitions
between epochs. And associated events such as <code>ShardsReceived</code>, <code>EpochParametersSelected</code>,
and <code>ShardRecoveryStart</code> indicate storage node level events related to epoch transitions,
shard migrations and epoch parameters.</p>
<h2 id="system-and-staking-information"><a class="header" href="#system-and-staking-information">System and staking information</a></h2>
<p>The <a href="https://github.com/MystenLabs/walrus/blob/main/contracts/walrus/sources/system/system_state_inner.move">Walrus system object</a>
contains metadata about the available and used storage, as well as the price of storage per KiB of
storage in FROST. The committee structure within the system object can be used to read the current
epoch number, as well as information about the committee. Committee changes between epochs are
managed by a set of <a href="https://github.com/MystenLabs/walrus/tree/main/contracts/walrus/sources/staking">staking contracts</a>
that implement a full delegated proof of stake system based on the WAL token.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="data-security"><a class="header" href="#data-security">Data security</a></h1>
<p>Walrus provides decentralized storage for application and user data.
Walrus ensures availability and integrity but does not provide native encryption for data.
By default, all blobs stored in Walrus are public and discoverable by all.
If your app needs encryption or access control, secure data before uploading to Walrus.</p>
<h2 id="securing-data-with-seal"><a class="header" href="#securing-data-with-seal">Securing data with Seal</a></h2>
<p>Use <a href="https://github.com/MystenLabs/seal">Seal</a> for encryption and onchain access control.</p>
<p>Seal allows you to:</p>
<ul>
<li>Encrypt data using threshold encryption, where no single party holds the full decryption key.</li>
<li>Define onchain access policies that determine who can decrypt the data and under what conditions.</li>
<li>Store encrypted content on Walrus while keeping decryption logic verifiable and flexible.</li>
</ul>
<p>Seal integrates naturally with Walrus and is recommended for any use case involving:</p>
<ul>
<li>Sensitive offchain content (e.g., user documents, game assets, private messages)</li>
<li>Time-locked or token-gated data</li>
<li>Data shared between trusted parties or roles</li>
</ul>
<p>To get started, refer to the <a href="https://www.npmjs.com/package/@mysten/seal">Seal SDK</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="quilt-walrus-native-batch-store-tool"><a class="header" href="#quilt-walrus-native-batch-store-tool">Quilt: Walrus native batch store tool</a></h1>
<p><em>Quilt</em> is a batch storage feature, aiming to optimize the storage cost and efficiency of large
numbers of small blobs. Prior to <em>quilt</em>, storing small blobs (less than 10MB) in Walrus
involved higher per-byte costs due to internal system data overhead. <em>Quilt</em> addresses this by
encoding multiple (up to 666 for QuiltV1) blobs into a single unit called a quilt, significantly
reducing Walrus storage overhead and lowering costs to purchase Walrus/Sui storage, as well as Sui
computation gas fees.</p>
<p>Importantly, each blob within a quilt can be accessed and retrieved individually, without needing
to download the entire quilt. Moreover, the blob boundaries in a quilt align with Walrus
internal structures as well as Walrus storage nodes, this allows for retrieval latency that is
comparable to, or even lower than, that of a regular blob.</p>
<p>In addition, <em>quilt</em> introduces custom, immutable <code>Walrus-native</code> blob metadata, allowing user to
assign different types of <code>metadata</code> to each blob in a quilt, for example, unique identifiers, as
well as tags of key-value pairs. Note, this metadata is functionally similar to the existing
Blob Metadata store on-chain, however, there are some fundamental distinctions. First,
<code>Walrus-native</code> metadata is stored alongside the blob data, and hence it reduces costs and
simplifies management. Second, this metadata can be used for efficient lookup of blobs within a
quilt, for example, reading blobs with a particular tag. When storing a quilt, users can set
the <code>Walrus-native</code> metadata via the <em>quilt</em> APIs.</p>
<div id="admonition-warning" class="admonition admonish-warning" role="note" aria-labelledby="admonition-warning-title">
<div class="admonition-title">
<div id="admonition-warning-title">
<p>Warning</p>
</div>
<a class="admonition-anchor-link" href="usage/quilt.html#admonition-warning"></a>
</div>
<div>
<p>An identifier must start with an alphanumeric character, contain no trailing whitespace,
and not exceed 64 KB in length.</p>
<p>The total size of all tags combined must not exceed 64 KB.</p>
</div>
</div>
<h2 id="important-considerations"><a class="header" href="#important-considerations">Important considerations</a></h2>
<p>It's important to note that blobs stored in a quilt are assigned a unique ID, called <code>QuiltPatchId</code>,
that differs from the <code>BlobId</code> used for regular Walrus blobs, and a <code>QuiltPatchId</code> is determined by
the composition of the entire quilt, ranther than the single blob, and hence it may change if the
blob is stored in a different quilt. Moreover, individual blobs cannot be deleted, extended or shared
separately; these operations can only be applied to the entire quilt.</p>
<h2 id="target-use-cases"><a class="header" href="#target-use-cases">Target use cases</a></h2>
<p>Using <em>quilt</em> requires minimal additional effort beyond standard procedures. The primary
considerations are that the unique ID assigned to each blob within a quilt cannot be
directly derived from its contents, unlike a regular Walrus blob_id, deletion, extension
and share operations are not allowed on individual blobs in the quilt, only the quilt
can be the target.</p>
<h3 id="lower-cost"><a class="header" href="#lower-cost">Lower cost</a></h3>
<p>This is the most clear and significant use case. <em>Quilt</em> is especially advantageous for
managing large volumes of small blobs, as long as they can be grouped together by the
user. The cost savings come from two sources:</p>
<ul>
<li>
<p><strong>Walrus storage and write fees</strong>: By consolidating multiple small blobs into a single
quilt, storage costs can be reduced dramatically—more than 400x for files around 10KB—making
it an efficient solution for cost-sensitive applications.</p>
</li>
<li>
<p><strong>Sui computation and object storage fees</strong>: Storing many blobs as a single quilt
significantly reduces Sui gas costs. In our test runs with 600 files stored in a quilt,
we observed <strong>238x</strong> savings in Sui fees compared to storing them as individual blobs.
Notably, Sui cost savings only depend on the number of files per quilt rather than the
individual file sizes.</p>
</li>
</ul>
<p>The following table demonstrates the potential cost savings in WAL when storing 600 small
blobs for 1 epoch as a quilt compared to storing them as separate blobs.</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: right">Blob size</th><th style="text-align: right">Regular blob storage cost</th><th style="text-align: right">Quilt storage cost</th><th style="text-align: right">Cost saving factor</th></tr></thead><tbody>
<tr><td style="text-align: right">10KB</td><td style="text-align: right">2.088 WAL</td><td style="text-align: right">0.005 WAL</td><td style="text-align: right">409x</td></tr>
<tr><td style="text-align: right">50KB</td><td style="text-align: right">2.088 WAL</td><td style="text-align: right">0.011 WAL</td><td style="text-align: right">190x</td></tr>
<tr><td style="text-align: right">100KB</td><td style="text-align: right">2.088 WAL</td><td style="text-align: right">0.020 WAL</td><td style="text-align: right">104x</td></tr>
<tr><td style="text-align: right">200KB</td><td style="text-align: right">2.088 WAL</td><td style="text-align: right">0.036 WAL</td><td style="text-align: right">58x</td></tr>
<tr><td style="text-align: right">500KB</td><td style="text-align: right">2.136 WAL</td><td style="text-align: right">0.084 WAL</td><td style="text-align: right">25x</td></tr>
<tr><td style="text-align: right">1MB</td><td style="text-align: right">2.208 WAL</td><td style="text-align: right">0.170 WAL</td><td style="text-align: right">13x</td></tr>
</tbody></table>
</div>
<blockquote>
<p><strong>Note:</strong> The costs shown in this table are for illustrative purposes only and were obtained
from test runs on Walrus Testnet. Actual costs may vary due to changes in smart contract
parameters, networks, and other factors. The comparison is between storing 600 files as a single
quilt versus storing them as individual blobs in batches of 25.</p>
</blockquote>
<h3 id="organizing-collections"><a class="header" href="#organizing-collections">Organizing collections</a></h3>
<p><em>Quilt</em> provides a straightforward way to organize and manage collections of small blobs
within a single unit. This can simplify data handling and improve operational efficiency
when working with related small files, such as NFT image collections.</p>
<h3 id="walrus-native-blob-metadata"><a class="header" href="#walrus-native-blob-metadata">Walrus native blob metadata</a></h3>
<p><em>Quilt</em> supports immutable, custom metadata stored directly in Walrus, including
identifiers and tags. These features facilitate better organization, enable flexible
lookup, and assist in managing blobs within each quilt, enhancing retrieval and
management processes.</p>
<p>For details on how to use the CLI to interact with <em>quilt</em>, see the
<a href="usage/./client-cli.html#batch-storing-blobs-with-quilt">Batch-storing blobs with quilts</a> section.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="operator-guide"><a class="header" href="#operator-guide">Operator guide</a></h1>
<p>This guide contains information about operating services in the network, specifically storage nodes,
aggregators and publishers.</p>
<p>This operator guide describes the following:</p>
<ul>
<li><a href="operator-guide/aggregator.html">Operating an aggregator or publisher</a></li>
<li><a href="operator-guide/storage-node.html">Operating a storage node</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="operating-an-aggregator-or-publisher"><a class="header" href="#operating-an-aggregator-or-publisher">Operating an aggregator or publisher</a></h1>
<!-- TODO (WAL-118): Add further details and example cache setup. -->
<p>This page describes how you can run a Walrus aggregator or publisher exposing the <a href="operator-guide/../usage/web-api.html">HTTP
API</a>.</p>
<h2 id="local-daemon"><a class="header" href="#local-daemon">Starting the daemon locally</a></h2>
<p>You can run a local Walrus daemon through the <code>walrus</code> binary. There are three different commands:</p>
<ul>
<li><code>walrus aggregator</code> starts an "aggregator" that offers an HTTP interface to read blobs from
Walrus.</li>
<li><code>walrus publisher</code> starts a "publisher" that offers an HTTP interface to store blobs in Walrus.</li>
<li><code>walrus daemon</code> offers the combined functionality of an aggregator and publisher on the same
address and port.</li>
</ul>
<p>The aggregator does not perform any on-chain actions, and only requires specifying the address on
which it listens:</p>
<pre><code class="language-sh">walrus aggregator --bind-address "127.0.0.1:31415"
</code></pre>
<p>The publisher and daemon perform on-chain actions and thus require a Sui Testnet wallet with
sufficient SUI and WAL balances. To enable handling many parallel requests without object
conflicts, they create internal sub-wallets since version 1.4.0, which are funded from the main
wallet. These sub-wallets are persisted in a directory specified with the <code>--sub-wallets-dir</code>
argument; any existing directory can be used. If it already contains sub-wallets, they will be
reused.</p>
<p>By default, 8 sub-wallets are created and funded. This can be changed with the <code>--n-clients</code>
argument. For simple local testing, 1 or 2 sub-wallets are usually sufficient.</p>
<p>For example, you can run a publisher with a single sub-wallet stored in the Walrus configuration
directory with the following command:</p>
<pre><code class="language-sh">PUBLISHER_WALLETS_DIR=~/.config/walrus/publisher-wallets
mkdir -p "$PUBLISHER_WALLETS_DIR"
walrus publisher \
  --bind-address "127.0.0.1:31416" \
  --sub-wallets-dir "$PUBLISHER_WALLETS_DIR" \
  --n-clients 1
</code></pre>
<p>Replace <code>publisher</code> by <code>daemon</code> to run both an aggregator and publisher on the same address and
port.</p>
<div id="admonition-warning" class="admonition admonish-warning" role="note" aria-labelledby="admonition-warning-title">
<div class="admonition-title">
<div id="admonition-warning-title">
<p>Warning</p>
</div>
<a class="admonition-anchor-link" href="operator-guide/aggregator.html#admonition-warning"></a>
</div>
<div>
<p>While the aggregator does not perform Sui on-chain actions, and therefore consumes no gas, the
publisher does perform actions on-chain and will consume both SUI and WAL tokens. It is therefore
important to ensure only authorized parties may access it, or other measures to manage gas costs,
especially in a future Mainnet deployment.</p>
</div>
</div>
<p>By default, <a href="operator-guide/../usage/web-api.html#store">store blob</a> requests are limited to 10 MiB; you can
increase this limit through the <code>--max-body-size</code> option.
<a href="operator-guide/../usage/web-api.html#storing-quilts">Store quilt</a> requests are limited to 100 MiB by default, and
can be increased using the <code>--max-quilt-body-size</code> option.</p>
<h3 id="daemon-metrics"><a class="header" href="#daemon-metrics">Daemon metrics</a></h3>
<p>Services by default export a metrics end-point accessible via <code>curl http://127.0.0.1:27182/metrics</code>.
It can be changed using the <code>--metrics-address &lt;METRICS_ADDRESS&gt;</code> CLI option.</p>
<h3 id="sample-systemd-configuration"><a class="header" href="#sample-systemd-configuration">Sample systemd configuration</a></h3>
<p>Below is an example of an aggregator node which hosts a HTTP endpoint that can be used
to fetch data from Walrus over the web.</p>
<p>The aggregator process is run via the <code>walrus</code> client binary as discussed above.
It can be run in many ways, one example being via a systemd service:</p>
<pre><code class="language-ini">[Unit]
Description=Walrus Aggregator

[Service]
User=walrus
Environment=RUST_BACKTRACE=1
Environment=RUST_LOG=info
ExecStart=/opt/walrus/bin/walrus --config /opt/walrus/config/client_config.yaml aggregator --bind-address 0.0.0.0:9000
Restart=always

LimitNOFILE=65536
</code></pre>
<h2 id="publisher-operation-and-configuration"><a class="header" href="#publisher-operation-and-configuration">Publisher operation and configuration</a></h2>
<p>We list here a few important details on how the publisher deals with funds and objects on Sui.</p>
<h3 id="number-of-sub-wallets-and-upload-concurrency"><a class="header" href="#number-of-sub-wallets-and-upload-concurrency">Number of sub-wallets and upload concurrency</a></h3>
<p>As mentioned above, the publisher uses sub-wallets to allow storing blobs in parallel. By default,
the publisher uses 8 sub-wallets, meaning it can handle 8 blob store HTTP requests concurrently.</p>
<p>In order to operate a high performance and concurrency publisher the following options may be of
interest.</p>
<ul>
<li>
<p>The <code>--n-clients &lt;NUM&gt;</code> option creates a number of separate wallets used to perform concurrent
Sui chain operations. Increase this to allow more parallel uploads. Note that a higher number
will require more SUI and WAL coins initially too, to be distributed to more wallets.</p>
</li>
<li>
<p>The <code>--max-concurrent-requests &lt;NUM&gt;</code> determines how many concurrent requests can be handled
including Sui operations (limited by number of clients) but also uploads. After this is exceeded
more requests are queued up to the <code>--max-buffer-size &lt;NUM&gt;</code>, after which requests are rejected
with a HTTP 429 code.</p>
</li>
</ul>
<h3 id="sui-coin-management-in-sub-wallets"><a class="header" href="#sui-coin-management-in-sub-wallets">SUI coin management in sub-wallets</a></h3>
<p>Each of the sub-wallets requires funds to interact with the chain and purchase storage. For this
reason, a background process checks periodically if the sub-wallets have enough funds. In steady
state, each of the sub-wallets will have a balance of 0.5-1.0 SUI and WAL. The amount and triggers
for coin refills can be configured through CLI arguments.</p>
<p>To tweak how refills are handled you may use the <code>--refill-interval &lt;REFILL_INTERVAL&gt;</code>,
<code>--gas-refill-amount &lt;GAS_REFILL_AMOUNT&gt;</code>, <code>--wal-refill-amount &lt;WAL_REFILL_AMOUNT&gt;</code> and
<code>--sub-wallets-min-balance &lt;SUB_WALLETS_MIN_BALANCE&gt;</code> arguments.</p>
<h3 id="lifecycle-of-created-blob-on-chain-objects"><a class="header" href="#lifecycle-of-created-blob-on-chain-objects">Lifecycle of created <code>Blob</code> on-chain objects</a></h3>
<p>Each store operation in Walrus creates a <code>Blob</code> object on Sui. This blob object represents the
(partial) ownership over the associated data, and allows certain data management operations (e.g.,
in the case of deletable blobs).</p>
<p>When the publisher stores a blob on behalf of a client, the <code>Blob</code> object is initially owned by the
sub-wallet that stored the blob. Then, the following cases are possible, depending on the
configuration:</p>
<ul>
<li>If the client requests to store a blob and specifies the <code>send_object_to</code> query parameter (see
<a href="operator-guide/../usage/web-api.html#store">the relevant section</a> for examples),
then the <code>Blob</code> object is transferred to the
specified address. This is a way for clients to get back the created object for their data.</li>
<li>If the <code>send_object_to</code> query parameter is not specified, two cases are possible:
<ul>
<li>By default the sub-wallet transfers the
newly-created blob object to the main wallet, such that all these objects are kept there.
This behavior can be changed by setting the <code>--burn-after-store</code> flag, and the blob object
is then immediately deleted.</li>
<li>However, note that this flag <em>does not affect</em> the use of the <code>send_object_to</code> query parameter:
Regardless of this flag's status, the publisher will send created objects to the address in
the <code>send_object_to</code> query parameter, if it is specified in the PUT request.</li>
</ul>
</li>
</ul>
<h3 id="advanced-publisher-uses"><a class="header" href="#advanced-publisher-uses">Advanced publisher uses</a></h3>
<p>The setup and use of an "authenticated publisher" is covered in a <a href="operator-guide/./auth-publisher.html">separate section</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="the-authenticated-publisher"><a class="header" href="#the-authenticated-publisher">The authenticated publisher</a></h1>
<p>We now describe the authenticated publisher, which requires the HTTP request to store a blob to be
authenticated. Such an authenticated publisher can be used as a building block for services that
require storing over HTTP on Walrus <code>mainnet</code>, where an "open" publisher is undesirable (because of
the <code>SUI</code> and <code>WAL</code> cost of publishing to Walrus).</p>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>The Walrus Publisher can be configured to require a JWT (JSON web Token) with each HTTP request, for
user authentication. The authentication system ensures that only authorized clients can store blobs
and allows for fine-grained control over storage parameters through JWT claims.</p>
<p>The authenticated publishing flow occurs, at a high level, as follows:</p>
<ol>
<li><strong>Publisher setup</strong>: The publisher operator:
<ul>
<li>Funds the publisher's wallet with sufficient <code>SUI</code> and <code>WAL</code>;</li>
<li>Configures the publisher to only accept authenticated requests. This entails setting the
algorithm to authenticate JWTs, the expiration time for JWTs, and the JWT authentication
secret.</li>
</ul>
</li>
<li><strong>Authentication channel setup</strong>: The publisher operator sets up a channel through which users
can obtain the JWT tokens. This step can be performed in any way that produces a valid JWT, and
is not provided in this implementation.</li>
<li><strong>Client authentication</strong>: The client obtains a JWT token from the channel set up in the previous
step. The JWT token can specify Walrus-relevant constraints, such as the maximum number of epochs
the JWT can be used to store for, and the maximum size of the blobs being stored.</li>
<li><strong>Publish request</strong>: The client requests to store a blob using the publisher. This is done
through an HTTP PUT request containing the JWT in an Authorization Bearer HTTP header.</li>
<li><strong>Store to Walrus</strong>: The publisher checks the JWT, and checks that the store request is compliant
with the constraints specified in the JWT (e.g., the blob being stored is smaller than the
authorized max size).</li>
<li>(Optional) <strong>Asset return:</strong>: If so specified, the publisher returns the newly-created <code>Blob</code>
object to the Sui Address set in the request.</li>
</ol>
<h3 id="request-authentication-flow"><a class="header" href="#request-authentication-flow">Request authentication flow</a></h3>
<p>We now provide an example of how the authenticated publisher can be used in a webapp that allows
users to upload files to Walrus through a web frontend. This is especially useful if the users are
<em>not</em> required to have a wallet, and therefore cannot store blobs to Walrus on their own.</p>
<ul>
<li>The user connects to the webapp, authenticates (e.g., through name and password, as they have no
wallet).</li>
<li>The user uploads the file it wants to store, and selects the number of epochs for which it would
like to store it.</li>
<li>The webapp frontend sends information on the size of the file and the number of epochs to the
backend.</li>
<li>With this information, the backend computes if the user is authorized to store the given amount of
data for the selected number of epochs, and possibly reduces the user quota. This accounting can
be done locally, but also directly on Sui. Importantly, at this point the backend can also check
the cost of the upload (in terms of SUI and WAL), and check if it is within the user's budget.</li>
<li>If the user is authorized to store, the backend returns a JWT token with the size and epoch limits
to the frontend.</li>
<li>The frontend sends the file to the publisher via a <code>PUT</code> request, setting the JWT in the
Authorization header as a Bearer token.</li>
<li>Upon receipt, the publisher verifies:
<ul>
<li>The token signature using the configured secret;</li>
<li>Token expiration;</li>
<li>Token uniqueness (prevents replay attacks);</li>
<li>Upload parameters against claims (if enabled).</li>
</ul>
</li>
<li>If all checks succeed, the publisher stores the file on Walrus.</li>
<li>If set, the publisher finally returns the created <code>Blob</code> object to the address specified by the
user.</li>
</ul>
<p>One important note here is that the JWT token itself is a "single use" token, and should not be used
for accounting purposes. I.e., one token can be used to store only one file, and after that the
token is rejected by the replay suppression system.</p>
<h2 id="publisher-setup"><a class="header" href="#publisher-setup">Publisher setup</a></h2>
<p>The publisher is configured at startup using the following command line arguments:</p>
<ul>
<li><code>--jwt-decode-secret</code>: The secret key used to verify JWT signatures. If set, the publisher will
only store blobs with valid JWTs.</li>
<li><code>--jwt-algorithm</code>: The algorithm used for JWT verification (defaults to HMAC).</li>
<li><code>--jwt-expiring-sec</code>: Duration in seconds after which the JWT is considered expired.</li>
<li><code>--jwt-verify-upload</code>: Enable verification of upload parameters against JWT claims.</li>
</ul>
<p>Additional details follow.</p>
<h3 id="the-jwt-decode-secret"><a class="header" href="#the-jwt-decode-secret">The JWT decode secret</a></h3>
<p>The secret can be hex string, starting with <code>0x</code>. If this parameter is not specified, the
authentication will be disabled.</p>
<p>All JWT tokens are expected to have the <code>jti</code> (JWT ID) set in the claim to a unique value. The JWT
is used for replay suppression, i.e., to avoid malicious users storing multiple times using the same
JWT. Therefore, the JWT creator must ensure that this value is unique among all requests to the
publisher. We recommend using large nonces to avoid collisions.</p>
<h3 id="authentication-algorithm"><a class="header" href="#authentication-algorithm">Authentication algorithm</a></h3>
<p>The following algorithms are supported: "HS256", "HS384", "HS512", "ES256", "ES384", "RS256",
"RS384", "PS256", "PS384", "PS512", "RS512", "EdDSA". The default JWT authentication algorithm will
be HS256.</p>
<h3 id="jwt-expiration"><a class="header" href="#jwt-expiration">JWT Expiration</a></h3>
<p>If the parameter is set and greater than 0, the publisher will check if the JWT token is expired
based on the "issued at" (<code>iat</code>) value in the JWT token.</p>
<h3 id="upload-parameters-verification"><a class="header" href="#upload-parameters-verification">Upload parameters verification</a></h3>
<p>If set, the publisher will verify that the requested upload matches the claims in the JWT. This
<em>does not</em> enable or disable the cryptographic authentication of the JWT; it just enables or
disables the checks that ensure the contents of the JWT claim match the requested blob upload.</p>
<p>Specifically, the publisher will:</p>
<ul>
<li>Verify that the number of <code>epochs</code> in query is the the same as <code>epochs</code> in the JWT, if present;</li>
<li>Verify that the <code>send_object_to</code> field in the query is the same as the <code>send_object_to</code> in the
JWT, if present;</li>
<li>Verify the size of uploaded file;</li>
<li>Verify the uniqueness of the <code>jti</code> claim.</li>
</ul>
<p>Disabiling the parameter verification may be useful in case the source of the store requests is
trusted, but the publisher mayy be contacted by untrusted sources. In that case, the authentication
of the JWT is necessary, but not the verification of the upload parameters.</p>
<h3 id="replay-suppression-configuration"><a class="header" href="#replay-suppression-configuration">Replay-suppression configuration</a></h3>
<p>As mentioned above, the publisher supports replay suppression to avoid the malicious reuse of JWT
tokens.</p>
<p>The replay suppression supports the following configuration parameters:</p>
<ul>
<li><code>--jwt-cache-size</code>: The maximum size of the publisher's JWT cache, where the <code>jti</code> JWT IDs of the
"used" JWTs are kept until their expiration. This is a hard upperbound on the number of entries in
the cache, after which additional requests to store are rejected. This hard bound is introduced to
avoid DoS attacks on the publisher through the cache.</li>
<li><code>--jwt-cache-refresh-interval</code>: The interval (in seconds) after which the cache is refreshed, and
expired JWTs are removed (possibly creating space for additional JWTs to be inserted).</li>
</ul>
<h2 id="details-on-the-jwt"><a class="header" href="#details-on-the-jwt">Details on the JWT</a></h2>
<h3 id="jwt-fields"><a class="header" href="#jwt-fields">JWT Fields</a></h3>
<p>The current authenticated publisher implementation does not provide a way to generate the JWTs and
distribute them to the clients. These can be generated with any tool (examples on how to create a
JWT are given in the next section), as long as they respect the following constraints.</p>
<h4 id="mandatory-fields"><a class="header" href="#mandatory-fields">Mandatory fields</a></h4>
<ul>
<li><code>exp</code> (Expiration): timestamp when the token expires;</li>
<li><code>jti</code> (JWT ID): unique identifier for the token to prevent replay attacks;</li>
</ul>
<h4 id="optional-fields"><a class="header" href="#optional-fields">Optional fields</a></h4>
<ul>
<li><code>iat</code> (Issued At): Optional timestamp when the token was issued;</li>
<li><code>send_object_to</code>: Optional Sui address where the newly-created <code>Blob</code> object should be sent;</li>
<li><code>epochs</code>: Optional exact number of epochs the blob should be stored for</li>
<li><code>max_epochs</code>: Optional maximum number of epochs the blob can be stored for</li>
<li><code>max_size</code>: Optional maximum size of the blob in bytes</li>
<li><code>size</code>: Optional exact size of the blob in bytes</li>
</ul>
<p>Note: The <code>epochs</code> and <code>max_epochs</code> claims cannot be used together, and neither can <code>size</code> and
<code>max_size</code>. Using both in either case will result in token rejection.</p>
<p>Importanlty, the JWT (at the moment) can only encode information on the size and epochs of the blob
to store, and not on the "amount of SUI and WAL" the user is allowed to consume. This should be done
on the backend, before issuing the JWT.</p>
<h3 id="creating-a-valid-jwt-in-the-backend"><a class="header" href="#creating-a-valid-jwt-in-the-backend">Creating a valid JWT in the backend[</a></h3>
<p>We provide here a few examples on how to create JWTs that can be consumed by the authenticated
publisher.</p>
<h4 id="rust"><a class="header" href="#rust">Rust</a></h4>
<p>In Rust, the <a href="https://docs.rs/jsonwebtoken/latest/jsonwebtoken/"><code>jsonwebtoken</code></a> crate can be
used to create JWTs.</p>
<p>In our code, we use the following struct to deserialize the incoming tokens in the publisher (see
the the
<a href="https://github.com/MystenLabs/walrus/blob/main/crates/walrus-service/src/client/daemon/auth.rs">code</a>
for the complete version).</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct Claim {
    pub iat: Option&lt;i64&gt;,
    pub exp: i64,
    pub jti: String,
    pub send_object_to: Option&lt;SuiAddress&gt;,
    pub epochs: Option&lt;u32&gt;,
    pub max_epochs: Option&lt;u32&gt;,
    pub size: Option&lt;u64&gt;,
    pub max_size: Option&lt;u64&gt;,
}
<span class="boring">}</span></code></pre></pre>
<p>The same struct can be used to create and then encode valid tokens in Rust. This will be something
along the lines of:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use jsonwebtoken::{encode, Algorithm, EncodingKey, Header};

...

let encoding_key = EncodingKey::from_secret("my_secret".as_bytes());
let claim = Claim { /* set here the parameters for the Claim struct above */ };
let jwt = encode(&amp;Header::default(), &amp;claim, &amp;encode_key).expect("a valid claim and key");
<span class="boring">}</span></code></pre></pre>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="operating-a-storage-node"><a class="header" href="#operating-a-storage-node">Operating a storage node</a></h1>
<p>This section contains information about operating a storage node. Currently, this guide contains
information about</p>
<ul>
<li><a href="operator-guide/commission-governance.html">storage node commissions and governance</a> and</li>
<li><a href="operator-guide/backup-restore-guide.html">storage node backup and restore</a>.</li>
</ul>
<p>In the future, it will be expanded with additional information about running a node.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="commission-and-governance"><a class="header" href="#commission-and-governance">Commission and governance</a></h1>
<p>While most node parameters can be changed using the StorageNodeCap and are automatically updated
based on the values in the node configuration, authorization for contract upgrades and for
withdrawing the storage node commission is handled separately, to ensure that the hot wallet on the
storage node does not need to be authorized for these operations.</p>
<p>We strongly recommend to all node operators to designate secure wallets for these operations that
are not stored on the storage node machines.</p>
<p>This page explains how to update the entities that are authorized for governance (i.e. contract
upgrade) and commission operations and how these operations are performed.</p>
<h2 id="update-the-commission-receiver-and-entity-authorized-for-governance"><a class="header" href="#update-the-commission-receiver-and-entity-authorized-for-governance">Update the commission receiver and entity authorized for governance</a></h2>
<p>It is possible to either designate an arbitrary object as a capability for governance/commission
operations or to designate an address to be authorized.</p>
<div id="admonition-warning" class="admonition admonish-warning" role="note" aria-labelledby="admonition-warning-title">
<div class="admonition-title">
<div id="admonition-warning-title">
<p>Warning</p>
</div>
<a class="admonition-anchor-link" href="operator-guide/commission-governance.html#admonition-warning"></a>
</div>
<div>
<p>Once set, only the authorized entity (either based on the address or capability) can
change the authorization again, so only set it to addresses/objects that you control and make sure
they remain accessible.</p>
</div>
</div>
<p>To set the authorization to receive the commission and perform governance operations you can either
use the <code>walrus</code> binary in your CLI, or you can use the <a href="https://stake-wal.wal.app/node-operations">node operations web interface</a>.</p>
<h3 id="using-the-cli"><a class="header" href="#using-the-cli">Using the CLI</a></h3>
<p>The following assumes that you have the <code>walrus</code> binary <a href="operator-guide/../usage/setup.html">correctly set up</a>, using
the wallet that is currently authorized to perform these operations. If this is the first time
updating the authorized entities, this will be the wallet that you used to setup the storage node.
To specify a wallet and/or config that are not in the standard locations, you can specify them using
the <code>--wallet</code> and <code>--config</code> command line arguments.</p>
<p>Note that the authorized entities for commission and governance are independent, i.e., they do not
need to be set to the same address or object.</p>
<pre><code class="language-sh">NODE_ID=            # Set this to your node ID.
COMMISSION_AUTHORIZED_ADDRESS= # Set this to a secure wallet address that you control.
GOVERNANCE_AUTHORIZED_ADDRESS= # Set this to a secure wallet address that you control.
walrus node-admin set-commission-authorized --node-id $NODE_ID --address $COMMISSION_AUTHORIZED_ADDRESS
walrus node-admin set-governance-authorized --node-id $NODE_ID --address $GOVERNANCE_AUTHORIZED_ADDRESS
</code></pre>
<p>Instead of specifying an authorized address using the <code>--address</code> flag, an arbitrary object can be
designated as capability, using the <code>--object</code> flag:</p>
<pre><code class="language-sh">NODE_ID=           # Set this to your node ID.
COMMISSION_AUTHORIZED_OBJECT= # Set this to the ID of an object that you own in a secure wallet.
GOVERNANCE_AUTHORIZED_OBJECT= # Set this to the ID of an object that you own in a secure wallet.
walrus node-admin set-commission-authorized --node-id $NODE_ID --object $COMMISSION_AUTHORIZED_OBJECT
walrus node-admin set-governance-authorized --node-id $NODE_ID --object $GOVERNANCE_AUTHORIZED_OBJECT
</code></pre>
<h3 id="using-the-web-interface"><a class="header" href="#using-the-web-interface">Using the web interface</a></h3>
<p>Go to the <a href="https://stake-wal.wal.app/node-operations">operator panel on the staking dApp</a>, connect
your wallet and select your node either through the drop-down menu or by pasting your node ID.
Then select <code>Set Commission Receiver</code> or <code>Set Governance Authorized</code> and follow the steps to send
the transaction.</p>
<h2 id="collecting-commission"><a class="header" href="#collecting-commission">Collecting commission</a></h2>
<p>To collect your commission, you can again either use the CLI or the web interface. To use the CLI,
make sure that <code>walrus</code> is configured to use the authorized wallet and run the following command:</p>
<pre><code class="language-sh">NODE_ID=           # Set this to your node ID.
walrus node-admin --node-id $NODE_ID collect-commission
</code></pre>
<p>To use the web interface, go to the
<a href="https://stake-wal.wal.app/node-operations">operator panel on the staking dApp</a>, connect
your wallet and select your node either through the drop-down menu or by pasting your node ID.
Then select <code>Collect Commission</code> and follow the steps to send the transaction.</p>
<h2 id="contract-upgrades"><a class="header" href="#contract-upgrades">Contract upgrades</a></h2>
<p>Contract upgrades in Walrus are managed through a quorum-based voting system. This ensures that
upgrades are only applied after sufficient consensus among node operators. The process requires
computing a digest of the proposed upgrade and voting on it.</p>
<h3 id="voting-for-quorum-based-upgrades"><a class="header" href="#voting-for-quorum-based-upgrades">Voting for quorum-based upgrades</a></h3>
<p>When a contract upgrade is proposed, the proposer will generally share the code of the proposed
upgrade with other node operators. For example, if the Walrus Foundation proposes an upgrade, it
will share a specific commit hash in a branch on the <a href="https://github.com/MystenLabs/walrus">Walrus GitHub Repository</a>
that contains the proposed change in either the <code>testnet-contracts/walrus</code> or the
<code>mainnet-contracts/walrus</code> directory, depending on whether the Testnet or Mainnet contracts are
being upgraded.</p>
<p>The vote needs to complete within one epoch, otherwise the committee changes and the vote needs to
be repeated. To vote for an upgrade, complete the following steps.</p>
<h4 id="computing-the-upgrade-digest"><a class="header" href="#computing-the-upgrade-digest">Computing the upgrade digest</a></h4>
<p>Operators should compute the package digest of the package to upgrade. It is important here that
the same compiler version is used and the correct Sui network is specified. If you use a standard
<a href="operator-guide/../usage/setup.html#configuration">Walrus Configuration</a>, the Sui network will be selected
automatically when specifying the Walrus network using the <code>--context</code> flag and using the up-to-date
<code>walrus</code> version will ensure that the compiler version is consistent across all voters.</p>
<p>To compute the digest of a proposed upgrade, you should use the <code>walrus node-admin</code> command.
Assuming that your current working directory is the root of the Walrus repository and you have
checked out the correct commit, you would use the following command for Testnet upgrades:</p>
<pre><code class="language-sh">walrus node-admin package-digest --package-path testnet-contracts/walrus --context testnet
</code></pre>
<p>And the following for Mainnet upgrades:</p>
<pre><code class="language-sh">walrus node-admin package-digest --package-path mainnet-contracts/walrus --context mainnet
</code></pre>
<p>The command will output a digest (as Hex and Base64) that you can use to verify the proposal and
vote on the upgrade.</p>
<h4 id="voting-on-upgrades-using-the-web-interface"><a class="header" href="#voting-on-upgrades-using-the-web-interface">Voting on upgrades using the web interface</a></h4>
<p>Voting on an upgrade using the web interface is the easiest way and also allows you to use any
wallet supported by your browser (e.g. hardware wallets) To vote through the web interface:</p>
<ol>
<li>Go to the <a href="https://stake-wal.wal.app/node-operations">operator panel on the staking dApp</a>.</li>
<li>Connect your wallet and select your node.</li>
<li>Navigate to the "Vote on Upgrade" section.</li>
<li>Paste the Base64 package digest from the previous step.</li>
<li>Follow the prompts to submit your vote.</li>
</ol>
<h4 id="voting-on-upgrades-using-the-cli"><a class="header" href="#voting-on-upgrades-using-the-cli">Voting on upgrades using the CLI</a></h4>
<p>To vote on an upgrade using the CLI, ensure that your <code>walrus</code> binary is configured with the authorized
wallet, and that you are on the correct branch in the root directory of the Walrus repository.
Then run the following for Testnet:</p>
<pre><code class="language-sh">NODE_ID=   # Set this to your node ID.
PACKAGE_PATH=testnet-contracts/walrus
UPGRADE_MANAGER_OBJECT_ID=0xc768e475fd1527b7739884d7c3a3d1bc09ae422dfdba6b9ae94c1f128297283c
walrus node-admin vote-for-upgrade \
    --node-id $NODE_ID \
    --upgrade-manager-object-id $UPGRADE_MANAGER_OBJECT_ID \
    --package-path $PACKAGE_PATH \
    --context testnet
</code></pre>
<p>And for Mainnet upgrades:</p>
<pre><code class="language-sh">NODE_ID=   # Set this to your node ID.
PACKAGE_PATH=mainnet-contracts/walrus
UPGRADE_MANAGER_OBJECT_ID=0xc42868ad4861f22bd1bcd886ae1858d5c007458f647a49e502d44da8bbd17b51
walrus node-admin vote-for-upgrade \
    --node-id $NODE_ID \
    --upgrade-manager-object-id $UPGRADE_MANAGER_OBJECT_ID \
    --package-path $PACKAGE_PATH \
    --context mainnet
</code></pre>
<h4 id="upgrade-completion"><a class="header" href="#upgrade-completion">Upgrade completion</a></h4>
<p>Once a quorum of node operators (by number of shards) has voted in favor of a proposal, the contract
upgrade can be finalized. This will usually be done by the proposer using a PTB that calls the
respective functions to authorize, execute, and commit the upgrade. Then, depending on the upgrade,
either at the start of the next epoch or immediately, the system and staking objects are migrated to
the new version, by calling the <code>migrate</code> function in the <code>init</code> module of the <code>walrus</code> package.
The upgrade and migration can both be performed using the <code>walrus-deploy</code> binary.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="backup-and-restore-guide"><a class="header" href="#backup-and-restore-guide">Backup and restore guide</a></h1>
<h2 id="overview-1"><a class="header" href="#overview-1">Overview</a></h2>
<p>Walrus storage nodes provide backup and restore functionality for the primary database containing
blob data. This guide covers configuration requirements, operational procedures, and best practices
for both automated and manual backup processes, as well as restore operations.</p>
<div id="admonition-info" class="admonition admonish-info" role="note" aria-labelledby="admonition-info-title">
<div class="admonition-title">
<div id="admonition-info-title">
<p>Info</p>
</div>
<a class="admonition-anchor-link" href="operator-guide/backup-restore-guide.html#admonition-info"></a>
</div>
<div>
<p>The current backup implementation creates full copies of the database files. This means backups
require substantial disk space (approximately the same size as your active database). A
checkpoint-based solution is planned for a future release.</p>
</div>
</div>
<h2 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites</a></h2>
<ul>
<li>Storage node must be running with appropriate permissions to create backups</li>
<li>Sufficient disk space for backup storage (recommended: separate physical volume)</li>
<li>Unix/Linux operating system with support for Unix domain sockets</li>
<li><code>walrus</code> user account with appropriate permissions</li>
</ul>
<h3 id="local-administration-socket-configuration"><a class="header" href="#local-administration-socket-configuration">Local administration socket configuration</a></h3>
<p>The backup system communicates with running storage nodes through a Unix domain socket. To enable
this functionality:</p>
<ol>
<li>
<p><strong>Configure the administration socket path</strong> in your node configuration file:</p>
<pre><code class="language-yaml">admin_socket_path: /opt/walrus/admin.socket
</code></pre>
</li>
<li>
<p><strong>Restart the storage node</strong> to initialize the socket:</p>
<pre><code class="language-bash">sudo systemctl restart walrus-node.service
</code></pre>
</li>
<li>
<p><strong>Verify socket creation</strong>:</p>
<pre><code class="language-bash">ls -la /opt/walrus/admin.socket
</code></pre>
</li>
</ol>
<div id="admonition-warning" class="admonition admonish-warning" role="note" aria-labelledby="admonition-warning-title">
<div class="admonition-title">
<div id="admonition-warning-title">
<p>Warning</p>
</div>
<a class="admonition-anchor-link" href="operator-guide/backup-restore-guide.html#admonition-warning"></a>
</div>
<div>
<p>The storage node creates the socket with permissions <code>srw------- 1 walrus walrus</code>, ensuring
that only the <code>walrus</code> user can send operations to it. This is critical for security, as
operations sent to this socket are executed directly on the running storage node.</p>
<p>Currently supported operations include:</p>
<ul>
<li><strong>local-admin checkpoint</strong></li>
<li><strong>local-admin log-level</strong></li>
</ul>
</div>
</div>
<h2 id="automated-periodic-backups"><a class="header" href="#automated-periodic-backups">Automated periodic backups</a></h2>
<p>Storage nodes support scheduled automatic backups through checkpoint configuration. Add the
following configs to your node configuration:</p>
<pre><code class="language-yaml">checkpoint_config:
  # Directory where backups will be stored
  db_checkpoint_dir: /opt/walrus/checkpoints

  # Number of backups to retain (oldest will be deleted)
  max_db_checkpoints: 2

  # Backup frequency (example: 4-hour interval)
  db_checkpoint_interval:
    secs: 14400  # 4 hours in seconds
    nanos: 0

  # Sync in-memory data to disk before creating a bakcup
  sync: true

  # Maximum concurrent backup operations
  max_background_operations: 1

  # Enable/disable automated backups
  periodic_db_checkpoints: true
</code></pre>
<div id="admonition-tip" class="admonition admonish-tip" role="note" aria-labelledby="admonition-tip-title">
<div class="admonition-title">
<div id="admonition-tip-title">
<p>Tip</p>
</div>
<a class="admonition-anchor-link" href="operator-guide/backup-restore-guide.html#admonition-tip"></a>
</div>
<div>
<p>To disable automated backups, set <code>periodic_db_checkpoints: false</code> in your configuration.</p>
</div>
</div>
<h2 id="manual-backup-creation"><a class="header" href="#manual-backup-creation">Manual backup creation</a></h2>
<p>Create on-demand backups using the <code>local-admin</code> command:</p>
<div id="admonition-info-1" class="admonition admonish-info" role="note" aria-labelledby="admonition-info-1-title">
<div class="admonition-title">
<div id="admonition-info-1-title">
<p>Info</p>
</div>
<a class="admonition-anchor-link" href="operator-guide/backup-restore-guide.html#admonition-info-1"></a>
</div>
<div>
<p>The following commands assume <code>walrus-node</code> is in your system's PATH. If it's not, replace
<code>walrus-node</code> with the full path to the binary, for example:</p>
<ul>
<li><code>/opt/walrus/bin/walrus-node</code></li>
</ul>
</div>
</div>
<pre><code class="language-bash"># Basic backup command
sudo -u walrus walrus-node local-admin \
  --socket-path /opt/walrus/admin.socket \
  checkpoint create \
  --path /opt/walrus/backups/manual-backup-name
</code></pre>
<div id="admonition-tip-1" class="admonition admonish-tip" role="note" aria-labelledby="admonition-tip-1-title">
<div class="admonition-title">
<div id="admonition-tip-1-title">
<p>Tip</p>
</div>
<a class="admonition-anchor-link" href="operator-guide/backup-restore-guide.html#admonition-tip-1"></a>
</div>
<div>
<p>The backup operation runs in the background within the storage node. Once the backup creation is
initialized, the process continues independently even if the command-line interface is terminated.</p>
</div>
</div>
<h2 id="list-available-backups"><a class="header" href="#list-available-backups">List Available Backups</a></h2>
<pre><code class="language-bash">sudo -u walrus walrus-node local-admin \
  --socket-path /opt/walrus/admin.socket \
  checkpoint list \
  --path /opt/walrus/checkpoints
</code></pre>
<p><strong>Sample output:</strong></p>
<pre><code class="language-console">Backups:
Backup ID: 1, Size: 85.9 GB, Files: 1055, Created: 2025-07-02T00:25:48Z
Backup ID: 2, Size: 86.2 GB, Files: 1058, Created: 2025-07-02T04:25:52Z
</code></pre>
<h2 id="restore-from-a-backup"><a class="header" href="#restore-from-a-backup">Restore from a backup</a></h2>
<div id="admonition-warning-1" class="admonition admonish-warning" role="note" aria-labelledby="admonition-warning-1-title">
<div class="admonition-title">
<div id="admonition-warning-1-title">
<p>Warning</p>
</div>
<a class="admonition-anchor-link" href="operator-guide/backup-restore-guide.html#admonition-warning-1"></a>
</div>
<div>
<p>Do not copy backup directories directly to the storage node's data path. The restore tool must be
used to properly reconstruct the database from checkpoint files. Directly copied content cannot be
recognized by the storage engine.</p>
</div>
</div>
<p>Follow these steps to restore from a backup:</p>
<ol>
<li>
<p><strong>Stop the storage node service</strong>:</p>
<pre><code class="language-bash">sudo systemctl stop walrus-node.service

# Verify the service is stopped
sudo systemctl status walrus-node.service
</code></pre>
</li>
<li>
<p><strong>Optional: Backup current database</strong></p>
<pre><code class="language-bash"># Assuming the Walrus storage path is: `storage_path: /opt/walrus/db`
sudo -u walrus cp -r /opt/walrus/db /opt/walrus/db.backup.$(date +%Y%m%d-%H%M%S)
</code></pre>
<p>This command saves:</p>
<ul>
<li>Main database files</li>
<li>Events database (<code>/opt/walrus/db/events/</code>)</li>
<li>Event blob data (<code>/opt/walrus/db/event_blob_writer/</code>)</li>
</ul>
</li>
<li>
<p><strong>Clear existing data</strong> (if performing a clean restore):</p>
<p>Remove all existing database files to ensure a clean restore,</p>
<pre><code class="language-bash"># Assuming the Walrus storage path is: `storage_path: /opt/walrus/db`
sudo -u walrus rm -rf /opt/walrus/db/*
</code></pre>
<p>This command removes:</p>
<ul>
<li>Main database files</li>
<li>Events database (<code>/opt/walrus/db/events/</code>)</li>
<li>Event blob data (<code>/opt/walrus/db/event_blob_writer/</code>)</li>
</ul>
</li>
<li>
<p><strong>Restore main database</strong>:</p>
<div id="admonition-warning-2" class="admonition admonish-warning" role="note" aria-labelledby="admonition-warning-2-title">
<div class="admonition-title">
<div id="admonition-warning-2-title">
<p>Warning</p>
</div>
<a class="admonition-anchor-link" href="operator-guide/backup-restore-guide.html#admonition-warning-2"></a>
</div>
<div>
<p>The restore process can take significant time depending on database size. Run the restore command
in a persistent session using <code>tmux</code> or <code>screen</code> to prevent interruption if your connection drops.</p>
</div>
</div>
<div id="admonition-note" class="admonition admonish-note" role="note" aria-labelledby="admonition-note-title">
<div class="admonition-title">
<div id="admonition-note-title">
<p>Note</p>
</div>
<a class="admonition-anchor-link" href="operator-guide/backup-restore-guide.html#admonition-note"></a>
</div>
<div>
<p>As mentioned earlier, if <code>walrus-node</code> is not in your PATH, use the full path to the binary.</p>
</div>
</div>
<pre><code class="language-bash"># Restore from specific checkpoint
sudo -u walrus walrus-node \
  restore \
  --db-checkpoint-path /opt/walrus/checkpoints \
  --db-path /opt/walrus/db \
  --checkpoint-id 2

# Or restore from latest checkpoint (omit --checkpoint-id)
sudo -u walrus walrus-node \
  restore \
  --db-checkpoint-path /opt/walrus/checkpoints \
  --db-path /opt/walrus/db
</code></pre>
</li>
<li>
<p><strong>Start the storage node</strong>:</p>
<pre><code class="language-bash">sudo systemctl start walrus-node.service

# Monitor startup logs
sudo journalctl -u walrus-node.service -f
</code></pre>
</li>
</ol>
<p>The storage node will begin downloading and replaying events. This process may take some time before
the node transitions to <code>Active</code> state.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="the-walrus-upload-relay"><a class="header" href="#the-walrus-upload-relay">The Walrus upload relay</a></h1>
<h2 id="overview-2"><a class="header" href="#overview-2">Overview</a></h2>
<p>A goal of Walrus is to enable dApps to <code>store</code> to Walrus from within their end-users’ browsers
having low to moderate machine specifications (mobile devices, low-powered laptops, etc.). This
browser-based scenario is difficult to achieve in practice with an in-browser process that directly
communicates with the storage nodes due to the high number of network connections required to upload
all slivers to all shards.</p>
<p>The upload relay is a downloadable program that community members, Mysten Labs, and/or dApp writers
themselves can run on internet-facing hosts to facilitate storing blob slivers onto the storage
nodes on behalf of the end-users, thus mitigating browser resource consumption and enabling
web-based <code>store</code> operations.</p>
<div id="admonition-public-upload-relays" class="admonition admonish-tip" role="note" aria-labelledby="admonition-public-upload-relays-title">
<div class="admonition-title">
<div id="admonition-public-upload-relays-title">
<p>Public upload relays</p>
</div>
<a class="admonition-anchor-link" href="operator-guide/upload-relay.html#admonition-public-upload-relays"></a>
</div>
<div>
<p>Mysten Labs runs two publicly-available upload relays, one for <code>testnet</code> and one for <code>mainnet</code>.
You can find them at the following addresses:</p>
<ul>
<li><code>testnet</code>: <code>https://upload-relay.testnet.walrus.space</code></li>
<li><code>mainnet</code>: <code>https://upload-relay.mainnet.walrus.space</code></li>
</ul>
</div>
</div>
<h2 id="design"><a class="header" href="#design">Design</a></h2>
<h3 id="outline"><a class="header" href="#outline">Outline</a></h3>
<p>At a high level, a client stores a blob using an upload relay as follows:</p>
<ol>
<li>First, the client locally encodes the blob and registers it on Sui;</li>
<li>then, the client sends the blob to the upload relay via an HTTP POST request to the blob-relay
endpoint (<code>/v1/blob-upload-relay</code>);</li>
<li>the upload relay then encodes the blob, sends the slivers to the storage nodes, collects a storage
confirmation certificate, and sends it back to the client;</li>
<li>finally, the client uses the confirmation certificate to certify the blob on Sui.</li>
</ol>
<p>Therefore, the upload relay <em>does not</em> perform any on-chain operation, and only helps clients
distribute the slivers of their blobs to storage nodes.</p>
<p>This flow between clients and the upload relay is already implemented in the Walrus CLI, Rust SDK,
and TS SDK, and therefore developers do not need to implement it themselves. For completeness, in
the following we discuss how the service is implemented, paid for, and used by clients.</p>
<h3 id="upload-relay-operation"><a class="header" href="#upload-relay-operation">Upload relay operation</a></h3>
<p>The upload relay can be operated in two ways:</p>
<ul>
<li><strong>Free service</strong>: It accepts simple HTTP POST requests with blobs from clients, and relays them to
the storage nodes for free.</li>
<li><strong>Paid service</strong> (for public relays): In this configuration, the upload relay requires a <em>tip</em> to
relay a blob. The tip can be used by the relay operator to cover the costs of running the
infrastructure and turn a profit on the service. At the moment, we allow a constant tip, and a tip
that is linear in the unencoded data size.</li>
</ul>
<p>Upload relays expose a tip-configuration endpoint (<code>/v1/tip-config</code>) that returns the tipping
configuration. For example:</p>
<pre><code class="language-json">{
  "send_tip": {
    "address": "0x1234...",
    "kind": {
      "const": 105
    }
  }
}
</code></pre>
<p>The configuration above specifies that every store operation requires a tip of <code>105 MIST</code> (arbitrary
value), paid to the set address (<code>0x1234..</code>). Note that this configuration is provided even for free
upload relays (returning <code>"no_tip"</code>).</p>
<h3 id="paying-the-tip"><a class="header" href="#paying-the-tip">Paying the tip</a></h3>
<p>This step is only necessary if the relay requires a tip.</p>
<p>To pay the tip, the client proceeds as follows:</p>
<ol>
<li>it computes the <code>blob_digest = SHA256(blob)</code></li>
<li>it generates a random <code>nonce</code>, and hashes it <code>nonce_digest = SHA256(nonce)</code></li>
<li>it computes the <code>unencoded_length = blob.len()</code></li>
</ol>
<p>Then, it creates a PTB, where the first input (<code>input 0</code>) is the <code>bcs</code> encoded representation of
<code>blob_digest || nonce_digest || unencoded_length</code>. This will later be used by the relay to
authenticate the sender of the store request. In the same PTB, the client transfers the appropriate
tip amount to the relay’s wallet (also found through the <code>/v1/tip-config</code> endpoint). Usually, the
client would also register the blob in this transaction. This is not mandatory, and the blob can be
registered in another transaction, but it is commonly convenient and cheaper to perform all these
operations together.</p>
<p>Once the transaction is executed, the client keeps the transaction ID <code>tx_id</code> , the <code>nonce</code>, and the
<code>blob_id</code>, which are required for the next phase.</p>
<p>Note: the relay will enforce a freshness check on the transaction that paid the tip (currently 1h by
default, but each relay can independently configure this).</p>
<h3 id="sending-data-to-the-upload-relay"><a class="header" href="#sending-data-to-the-upload-relay">Sending data to the upload relay</a></h3>
<p>See the full OpenAPI spec for the upload relay for the full details
(<a href="https://github.com/mystenlabs/walrus/tree/main/crates/walrus-upload-relay/upload_relay_openapi.yaml">yaml</a>,
<a href="https://github.com/mystenlabs/walrus/tree/main/crates/walrus-upload-relay/upload_relay_openapi.html">html</a>)</p>
<p>Essentially, the client sends a POST request to the <code>/v1/blob-upload-relay</code> API endpoint on the relay,
containing the bytes of the blob to be stored in the body.</p>
<p>These additional parameters have to be specified in the URL’s query string:</p>
<ul>
<li><strong>blob_id</strong> (required): The blob ID of the blob to be stored. Example:
<code>blob_id=E7_nNXvFU_3qZVu3OH1yycRG7LZlyn1-UxEDCDDqGGU</code></li>
<li><strong>tx_id</strong> (required if the relay requires tip): The transaction ID (Base58 encoded) of the
transaction that transferred the TIP to the relay. Example:
<code>tx_id=EmcFpdozbobqH61w76T4UehhC4UGaAv32uZpv6c4CNyg</code></li>
<li><strong>nonce</strong> (required if the relay requires tip): The <code>nonce</code>, the preimage of the hash added to the
transaction inputs created above, as a Base64 URL-encoded string without padding.
<code>nonce=rw8xIuqxwMpdOcF_3jOprsD9TtPWfXK97tT_lWr1teQ</code></li>
<li><strong>deletable_blob_object</strong> (required if the blob is registered as deletable): If the blob being
stored is deletable, then the client must specify the object ID (as a Hex string) of the Blob. If
the blob is to be stored as a permanent one, this parameter should not be specified. Example:
<code>deletable_blob_object=0x56ae1c86e17db174ea002f8340e28880bc8a8587c56e8604a4fa6b1170b23a60</code></li>
<li><strong>encoding_type</strong> (optional): The encoding type to be used for the blob. The default value, and at
the moment the only value, is <code>RS2</code>.</li>
</ul>
<h2 id="receiving-the-certificate"><a class="header" href="#receiving-the-certificate">Receiving the certificate</a></h2>
<p>Once the relay is done storing the blob, it will collect the confirmation certificate from the
storage nodes.</p>
<p>Then, it will send a response to the client, containing the <code>blob_id</code> of the stored blob, along with
the <code>confirmation_certificate</code>. The client can then use this certificate to certify the blob on
chain.</p>
<h2 id="installation-1"><a class="header" href="#installation-1">Installation</a></h2>
<h3 id="download-the-binary"><a class="header" href="#download-the-binary">Download the binary</a></h3>
<p>If you'd like to download a pre-built binary in order manually run <code>walrus-upload-relay</code>, you'll
need to download it from <a href="https://github.com/MystenLabs/walrus/releases">the releases page</a>. Note
that <code>walrus-upload-relay</code> does not daemonize itself, and requires some supervisor process to ensure
boot at startup, to restart in the event of failures, etc.</p>
<h3 id="docker"><a class="header" href="#docker">Docker</a></h3>
<p>The docker image for <code>walrus-upload-relay</code> is available on Docker Hub as
<code>mysten/walrus-upload-relay</code>.</p>
<pre><code class="language-sh">docker run -it --rm mysten/walrus-upload-relay --help
</code></pre>
<h3 id="build-from-source-1"><a class="header" href="#build-from-source-1">Build from source</a></h3>
<p>Of course, if you'd like to build from sources, that is always an option, as well. The sources for
the <code>walrus-upload-relay</code> are available on <a href="https://github.com/MystenLabs/walrus">GitHub</a> in the
<code>crates/walrus-upload-relay</code> subdirectory. Running the following from the root of the Walrus repo
should get you a working binary.</p>
<pre><code class="language-sh">cargo build --release --bin walrus-upload-relay
./target/release/walrus-upload-relay --help
</code></pre>
<h2 id="configuration-1"><a class="header" href="#configuration-1">Configuration</a></h2>
<p>Notice that <code>walrus-upload-relay</code> requires some configuration to get started. Below is an example of
how you might place the configuration such that it is reachable when invoking Docker to run the
relay. For the sake of the example below, we're assuming that:</p>
<ul>
<li><code>$HOME/.config/walrus/walrus_upload_relay_config.yaml</code> exists on the host machine and contains the
configuration for the <code>walrus-upload-relay</code>, as described <a href="operator-guide/upload-relay.html#relay-specific-configuration">in the configuration
section</a>.</li>
<li><code>$HOME/.config/walrus/client_config.yaml</code> exists on the host machine and contains Walrus client
configuration as specified <a href="operator-guide/../usage/setup.html#configuration">in the CLI setup section</a>.</li>
<li>Port 3000 is available for the relay to bind to (change this to whichever port you'd like to
expose from your host.)</li>
</ul>
<pre><code class="language-sh">docker run \
  -p 3000:3000 \
  -v $HOME/.config/walrus/walrus_upload_relay_config.yaml:/opt/walrus/walrus_upload_relay_config.yaml \
  -v $HOME/.config/walrus/client_config.yaml:/opt/walrus/client_config.yaml \
  mysten/walrus-upload-relay \
    --context testnet \
    --walrus-config /opt/walrus/client_config.yaml \
    --server-address 0.0.0.0:3000 \
    --relay-config /opt/walrus/walrus_upload_relay_config.yaml
</code></pre>
<h3 id="relay-specific-configuration"><a class="header" href="#relay-specific-configuration">Relay-specific configuration</a></h3>
<p>Here is an example of the <code>walrus-upload-relay</code> configuration file:</p>
<pre><code class="language-yaml">tip_config: !send_tip
  address: 0x2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a
  kind: !const 42
tx_freshness_threshold_secs: 36000
tx_max_future_threshold_secs: 30
</code></pre>
<p>Currently, the options are the following:</p>
<ul>
<li><code>tip_config</code>: The configuration for the tip to be paid. It can be <code>!no_tip</code>, for the free service,
or <code>!send_tip</code>, to configure the requested tip. In that case:
<ul>
<li><code>address</code>: Contains the hex-encoded address of the upload relay owner, where the tip should be
sent to.</li>
<li><code>kind</code>: The kind of tip that should be paid. It can be <code>!const</code>, for a constant tip for each
store, or <code>!linear</code>, for a linear tip in the unencoded blob size.</li>
</ul>
</li>
<li><code>tx_freshness_threshold_secs</code>: The maximum amount of time (in seconds) for which a transaction
that pays the tip is considered valid.</li>
<li><code>tx_max_future_threshold_secs</code>: The maximum amount of time in the future for which the tip-paying
transaction is considered valid. This is simply to account for some clock skew.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="staking-and-unstaking"><a class="header" href="#staking-and-unstaking">Staking and unstaking</a></h1>
<p>In Walrus, anyone can delegate stake to storage nodes and, by doing so, influence, which storage
nodes get selected for the committee in future epochs, and how many shards these nodes will hold.
Shards are assigned to storage nodes every epoch, roughly proportional to the amount of stake
that was delegated to them. By staking with a storage node, users also earn rewards, as they
will receive a share of the storage fees.</p>
<p>Since moving shards from one storage node to another requires transferring a lot of data, and
storage nodes potentially need to expand their storage capacity, the selection of the committee
for the next epoch is done ahead of time, in the middle of the previous epoch. This provides
sufficient time to storage-node operators to provision additional resources, if needed.</p>
<p>For stake to affect the shard distribution in epoch <code>e</code> and become "active", it must be staked
before the committee for this epoch has been selected, meaning that it has to be staked before
the midpoint of epoch <code>e - 1</code>. If it is staked after that point in time, it will only influence
the committee selection for epoch <code>e + 1</code> and thus only become active, and accrue rewards, in
that epoch.</p>
<p>Unstaking has a similar delay: because unstaking funds only has an effect on the committee in
the next committee selection, the stake will remain active until that committee takes over.
This means that, to unstake at the start of epoch <code>e</code>, the user needs to "request withdrawal"
before the midpoint of epoch <code>e - 1</code>. Otherwise, that is, if the user unstakes after this point,
the stake will remain active, and continue to accrue rewards, throughout epoch <code>e</code>, and the
balance and rewards will be available to withdraw at the start of epoch <code>e + 1</code>.</p>
<h2 id="how-to-stake-with-the-walrus-staking-dapp"><a class="header" href="#how-to-stake-with-the-walrus-staking-dapp">How to stake with the Walrus Staking dApp</a></h2>
<p>The Walrus Staking dApp allows users to stake (or unstake) to any of the storage nodes of the
system.</p>
<p>To use the dApp, visit <a href="https://stake-wal.wal.app">https://stake-wal.wal.app</a> and connect your wallet:</p>
<ul>
<li>Click the <code>Connect Wallet</code> button at the top right corner.</li>
<li>Select the wallet (if the wallet was connected before, this and the next step won't be required).</li>
<li>Approve the connection.</li>
</ul>
<h3 id="exchange-testnet-sui-to-wal"><a class="header" href="#exchange-testnet-sui-to-wal">Exchange Testnet SUI to WAL</a></h3>
<p>To be able to stake you will need to have Testnet WAL in your wallet.
You can exchange your Testnet SUI to WAL using the dApp as follows:</p>
<ul>
<li>Click the <code>Get WAL</code> button.</li>
<li>Select the amount of SUI. This will be exchanged to WAL at a 1:1 rate.</li>
<li>And click <code>Exchange</code>.</li>
<li><em>Follow the instructions in your wallet to approve the transaction.</em></li>
</ul>
<h3 id="stake"><a class="header" href="#stake">Stake</a></h3>
<ul>
<li>Find the storage node that you want to stake to.
<ul>
<li>Below the system stats, there is the list of the "Current Committee" of storage nodes.</li>
<li>You can select one of the nodes in that list or, if the storage node is not in the current
committee, you find all the storage nodes at the bottom of the page.</li>
</ul>
</li>
<li>Once you selected the storage node, click the stake button.</li>
<li>Select the amount of WAL.</li>
<li>Click Stake.</li>
<li><em>Follow the instructions in your wallet to approve the transaction.</em></li>
</ul>
<h3 id="unstake"><a class="header" href="#unstake">Unstake</a></h3>
<ul>
<li>Find the <code>Staked WAL</code> you want to unstake.
<ul>
<li>Below the "Current Committee" list you will find all your <code>Staked WAL</code>.</li>
<li>Also you can expand a storage node and find all your stakes with that node.</li>
</ul>
</li>
<li>Depending on the state of the <code>Staked WAL</code> you will be able to unstake or Withdraw your funds.</li>
<li>Click the <code>Unstake</code> or <code>Withdraw</code> button.</li>
<li>Click continue to confirm your action.</li>
<li><em>Follow the instructions in your wallet to approve the transaction.</em></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="examples"><a class="header" href="#examples">Examples</a></h1>
<p>As inspiration, we provide several simple examples in different programming languages to interact
with Walrus through the various interfaces. They are located at
<a href="https://github.com/MystenLabs/walrus/tree/main/docs/examples">https://github.com/MystenLabs/walrus/tree/main/docs/examples</a> and described below.</p>
<p>In addition, we have built actual applications on top of Walrus. The prime example is <a href="usage/../walrus-sites/intro.html">Walrus
Sites</a>, with code available in the
<a href="https://github.com/MystenLabs/walrus-sites">https://github.com/MystenLabs/walrus-sites</a> repository.</p>
<p>And for an example of how to build a static website and store it as a Walrus Site with GitHub
actions, just look at the <a href="https://github.com/MystenLabs/walrus-docs/blob/main/.github/workflows/publish.yaml">CI
workflow</a> we use
to publish this very site. There is also a <a href="https://github.com/zktx-io/walrus-sites-ga">Walrus-Sites GitHub
Action</a> created by the community you can use to very
easily publish your own Walrus Sites using GitHub Actions (note that this is <em>not</em> created or
officially supported by the Walrus team at Mysten Labs).</p>
<p>See also our list of existing and upcoming <a href="usage/./sdks.html">SDKs and other tools</a>.</p>
<h2 id="python"><a class="header" href="#python">Python</a></h2>
<p>The <a href="https://github.com/MystenLabs/walrus/tree/main/docs/examples/python">Python examples</a> folder
contains a number of examples:</p>
<ul>
<li>How to <a href="https://github.com/MystenLabs/walrus/blob/main/docs/examples/python/hello_walrus_webapi.py">use the HTTP
API</a>
to store and read a blob.</li>
<li>How to <a href="https://github.com/MystenLabs/walrus/blob/main/docs/examples/python/hello_walrus_jsonapi.py">use the JSON
API</a>
to store, read, and check the availability of a blob. Checking the certification of a blob
illustrates reading the Blob Sui object that certifies (see the <a href="usage/../dev-guide/sui-struct.html">Walrus Sui
reference</a>).</li>
<li>How to <a href="https://github.com/MystenLabs/walrus/blob/main/docs/examples/python/track_walrus_events.py">track Walrus related
Events</a>.</li>
</ul>
<h2 id="javascript"><a class="header" href="#javascript">JavaScript</a></h2>
<p>A <a href="https://github.com/MystenLabs/walrus/tree/main/docs/examples/javascript">JavaScript example</a> is
provided showing how to upload and download a blob through a web form using the HTTP API.</p>
<h2 id="move"><a class="header" href="#move">Move</a></h2>
<p>For more complex applications, you may want to interact with Walrus on-chain objects. For that
purpose, the currently deployed Walrus contracts are included <a href="https://github.com/MystenLabs/walrus/tree/main/contracts">in our GitHub
repository</a>.</p>
<p>Furthermore, we provide a simple <a href="https://github.com/MystenLabs/walrus/tree/main/docs/examples/move">example
contract</a> that imports and uses
the Walrus objects.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="troubleshooting"><a class="header" href="#troubleshooting">Troubleshooting</a></h1>
<div id="admonition-debug-logging" class="admonition admonish-tip" role="note" aria-labelledby="admonition-debug-logging-title">
<div class="admonition-title">
<div id="admonition-debug-logging-title">
<p>Debug logging</p>
</div>
<a class="admonition-anchor-link" href="usage/troubleshooting.html#admonition-debug-logging"></a>
</div>
<div>
<p>You can enable debug logging for Walrus by setting the environment variable <code>RUST_LOG=walrus=debug</code>.</p>
</div>
</div>
<h2 id="latest-binary"><a class="header" href="#latest-binary">Latest binary</a></h2>
<p>Before undertaking any other steps, make sure you have the <a href="usage/./setup.html#installation">latest <code>walrus</code>
binary</a>. If you have multiple versions in different locations, find the
binary that will actually be used with <code>which walrus</code>.</p>
<h2 id="old-hardware-or-incompatible-vms"><a class="header" href="#old-hardware-or-incompatible-vms">Old hardware or incompatible VMs</a></h2>
<p>Our standard Ubuntu binary is known to cause problems on certain old hardware and in certain
virtualized environments. If you experience errors like "Illegal instruction (core dumped)",
<a href="usage/./setup.html#installation">install</a> the <code>ubuntu-x86_64-generic</code> version instead, which is compiled
specifically to be compatible with almost all physical and virtual x86-64 CPUs.</p>
<h2 id="correct-sui-network-configuration"><a class="header" href="#correct-sui-network-configuration">Correct Sui network configuration</a></h2>
<p>If you get an error like "the specified Walrus system object does not exist", make sure your wallet
is set up for the correct Sui network (Mainnet or Testnet as you may require) and you use the latest
<a href="usage/./setup.html#configuration">configuration</a>.</p>
<h2 id="latest-walrus-configuration"><a class="header" href="#latest-walrus-configuration">Latest Walrus configuration</a></h2>
<p>The Walrus Testnet is wiped periodically and requires updating to the latest binary and
configuration. If you get an error like "could not retrieve enough confirmations to certify the
blob", you are probably using an outdated configuration pointing to an inactive Walrus system. In
this case, update your configuration file with the latest <a href="usage/./setup.html#configuration">configuration</a>
and make sure the CLI uses the intended configuration.</p>
<div id="admonition-tip" class="admonition admonish-tip" role="note" aria-labelledby="admonition-tip-title">
<div class="admonition-title">
<div id="admonition-tip-title">
<p>Tip</p>
</div>
<a class="admonition-anchor-link" href="usage/troubleshooting.html#admonition-tip"></a>
</div>
<div>
<p>When setting <code>RUST_LOG=info</code>, the <code>walrus</code> client binary prints information about the used
configuration when starting execution, including the path to the Walrus configuration file and the
Sui wallet.</p>
</div>
</div>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="introduction-to-walrus-sites"><a class="header" href="#introduction-to-walrus-sites">Introduction to Walrus Sites</a></h1>
<p><em>Walrus Sites</em> are "web"-sites that use Sui and Walrus as their underlying technology. They are a
prime example of how Walrus can be used to build new and exciting decentralized applications. Anyone
can build and deploy a Walrus Site and make it accessible to the world! Interestingly, this documentation
is itself available as a Walrus Site at <a href="https://docs.wal.app/walrus-sites/intro.html">https://docs.wal.app/walrus-sites/intro.html</a> (if you
aren't there already).</p>
<p>At a high level, here are some of the most exciting features:</p>
<ul>
<li>Publishing a site does not require managing servers or complex configurations; just provide the
source files (produced by your favorite web framework), publish them to Walrus Sites using the
<a href="walrus-sites/./overview.html#the-site-builder">site-builder tool</a>, and you are done!</li>
<li>Sites can be linked to from ordinary Sui objects. This feature enables, for example, creating an
NFT collection in which <em>every single NFT</em> has a <em>personalized website dedicated to it</em>.</li>
<li>Walrus Sites are owned by addresses on Sui and can be exchanged, shared, and updated thanks to
Sui's flexible programming model. This means, among other things, that Walrus Sites can leverage
the <a href="https://suins.io/">SuiNS</a> naming system to have human-readable names. No more messing around
with DNS!</li>
<li>Thanks to Walrus's decentralization and extremely high data availability, there is no risk of
having your site wiped for any reason.</li>
<li>Since they live on Walrus, these sites cannot have a backend in the traditional sense, and can
therefore be considered "static" sites. However, the developer can integrate with Sui-compatible
wallets and harness Sui's programmability to add backend functionality to Walrus Sites!</li>
</ul>
<h2 id="show-me"><a class="header" href="#show-me">Show me</a></h2>
<p>To give you a very high-level view of how Walrus Sites work, let's look at an example: A simple
NFT collection on Sui that has a frontend dApp to mint the NFTs hosted on Walrus Sites, and in
which <em>each NFT</em> has a <em>specific, personalized Walrus Site</em>.</p>
<p>You can check out the mint page at <a href="https://flatland.wal.app/">https://flatland.wal.app/</a>. This site is served to your
browser through the Walrus Site <em>portal</em> <a href="https://wal.app">https://wal.app</a>. While the portal's operation is
explained in a <a href="walrus-sites/./portal.html">later section</a>, consider for now that there can be many portals (hosted
by whoever wants to have their own, and even on <code>localhost</code>). Further, the only function of the
portal is to retrieve the metadata (from Sui) and the resource files (from Walrus) that constitute
the site.</p>
<p>If you have a Sui wallet with some SUI, you can try and "mint a new Flatlander" from the site. This
creates an NFT from the collection and shows you two links: one to the explorer, and one to the
"Flatlander site". This latter site is a special Walrus Sites page that exists only for that NFT,
and has special characteristics (the background color, the image, ...) that are based on the
contents of the NFT.</p>
<p>The URL to this per-NFT site looks something like this:
<code>https://flatland.wal.app/0x811285f7bbbaad302e23a3467ed8b8e56324ab31294c27d7392dac649b215716</code>.
You'll notice that the domain remains <code>wal.app</code>, but the path is a long and random-looking
string. This string is actually the <a href="https://simple.wikipedia.org/wiki/Hexadecimal">hexadecimal</a>
encoding of the object ID of the NFT, which is <a href="https://suiscan.xyz/mainnet/object/0x811285f7bbbaad302e23a3467ed8b8e56324ab31294c27d7392dac649b215716">0x811285f7b...</a>. This path is unique to
each NFT and is used to fetch the metadata and resource files for its corresponding page. The page
is then rendered based on the characteristics of the NFT.</p>
<p>In summary:</p>
<ul>
<li>Walrus Sites are served through a portal; in this case, <code>https://wal.app</code>. There can be many
portals, and anyone can host one.</li>
<li>The subdomain on the URL points to a specific object on Sui that allows the browser to fetch and
render the site resources. This pointer should be a SuiNS name, such as <code>flatland</code> in
<code>https://flatland.wal.app</code>.</li>
<li>It is possible for each path to be mapped to a specific object on Sui that allows the browser to
fetch and render a page based on the characteristics of the NFT.</li>
</ul>
<p>Curious to know how this magic is possible? Read the <a href="walrus-sites/./overview.html">technical overview</a>! If you
just want to get started trying Walrus Sites out, check the <a href="walrus-sites/./tutorial.html">tutorial</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="your-first-walrus-site"><a class="header" href="#your-first-walrus-site">Your first Walrus Site</a></h1>
<p>This tutorial walks you through the steps necessary to publish a Walrus Site. We also provide the
instructions on how to add a SuiNS name to it for convenient browsing.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="installing-the-site-builder"><a class="header" href="#installing-the-site-builder">Installing the site builder</a></h1>
<p>This section describes the steps necessary to setup the Walrus Sites' <code>site-builder</code> tool and
prepare your environment for development.</p>
<h2 id="prerequisites-1"><a class="header" href="#prerequisites-1">Prerequisites</a></h2>
<p>Before you start, make sure you</p>
<ul>
<li>have a recent version of <a href="https://www.rust-lang.org/tools/install">Rust</a> installed;</li>
<li>followed all <a href="walrus-sites/../usage/setup.html">Walrus setup instructions</a>.</li>
</ul>
<p>Then, follow these additional setup steps.</p>
<h2 id="installation-2"><a class="header" href="#installation-2">Installation</a></h2>
<p>Similar to the <code>walrus</code> client CLI tool, we currently provide the <code>site-builder</code> client binary for
macOS (Intel and Apple CPUs), Ubuntu, and Windows:</p>
<h3 id="mainnet-binaries"><a class="header" href="#mainnet-binaries">Mainnet Binaries</a></h3>
<div class="table-wrapper"><table><thead><tr><th>OS</th><th>CPU</th><th>Architecture</th></tr></thead><tbody>
<tr><td>Ubuntu</td><td>Intel 64bit</td><td><a href="https://storage.googleapis.com/mysten-walrus-binaries/site-builder-mainnet-latest-ubuntu-x86_64"><code>site-builder-mainnet-latest-ubuntu-x86_64</code></a></td></tr>
<tr><td>MacOS</td><td>Apple Silicon</td><td><a href="https://storage.googleapis.com/mysten-walrus-binaries/site-builder-mainnet-latest-macos-arm64"><code>site-builder-mainnet-latest-macos-arm64</code></a></td></tr>
<tr><td>MacOS</td><td>Intel 64bit</td><td><a href="https://storage.googleapis.com/mysten-walrus-binaries/site-builder-mainnet-latest-macos-x86_64"><code>site-builder-mainnet-latest-macos-x86_64</code></a></td></tr>
<tr><td>Windows</td><td>Intel 64bit</td><td><a href="https://storage.googleapis.com/mysten-walrus-binaries/site-builder-mainnet-latest-windows-x86_64.exe"><code>site-builder-mainnet-latest-windows-x86_64.exe</code></a></td></tr>
</tbody></table>
</div>
<h3 id="testnet-binaries"><a class="header" href="#testnet-binaries">Testnet Binaries</a></h3>
<div class="table-wrapper"><table><thead><tr><th>OS</th><th>CPU</th><th>Architecture</th></tr></thead><tbody>
<tr><td>Ubuntu</td><td>Intel 64bit</td><td><a href="https://storage.googleapis.com/mysten-walrus-binaries/site-builder-testnet-latest-ubuntu-x86_64"><code>site-builder-testnet-latest-ubuntu-x86_64</code></a></td></tr>
<tr><td>MacOS</td><td>Apple Silicon</td><td><a href="https://storage.googleapis.com/mysten-walrus-binaries/site-builder-testnet-latest-macos-arm64"><code>site-builder-testnet-latest-macos-arm64</code></a></td></tr>
<tr><td>MacOS</td><td>Intel 64bit</td><td><a href="https://storage.googleapis.com/mysten-walrus-binaries/site-builder-testnet-latest-macos-x86_64"><code>site-builder-testnet-latest-macos-x86_64</code></a></td></tr>
<tr><td>Windows</td><td>Intel 64bit</td><td><a href="https://storage.googleapis.com/mysten-walrus-binaries/site-builder-testnet-latest-windows-x86_64.exe"><code>site-builder-testnet-latest-windows-x86_64.exe</code></a></td></tr>
</tbody></table>
</div><div id="admonition-windows" class="admonition admonish-note" role="note" aria-labelledby="admonition-windows-title">
<div class="admonition-title">
<div id="admonition-windows-title">
<p>Windows</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/tutorial-install.html#admonition-windows"></a>
</div>
<div>
<p>We now offer a pre-built binary also for Windows. However, most of the remaining instructions assume
a UNIX-based system for the directory structure, commands, etc. If you use Windows, you may need to
adapt most of those.</p>
</div>
</div>
<p>You can download the latest build from our Google Cloud Storage (GCS) bucket (correctly setting the
<code>$SYSTEM</code> variable):</p>
<h3 id="mainnet-curl-request"><a class="header" href="#mainnet-curl-request">Mainnet curl request</a></h3>
<pre><code class="language-sh">SYSTEM= # set this to your system: ubuntu-x86_64, ubuntu-x86_64-generic, macos-x86_64, macos-arm64, windows-x86_64.exe
curl https://storage.googleapis.com/mysten-walrus-binaries/site-builder-mainnet-latest-$SYSTEM -o site-builder
chmod +x site-builder
</code></pre>
<h3 id="testnet-curl-request"><a class="header" href="#testnet-curl-request">Testnet curl request</a></h3>
<pre><code class="language-sh">SYSTEM= # set this to your system: ubuntu-x86_64, ubuntu-x86_64-generic, macos-x86_64, macos-arm64, windows-x86_64.exe
curl https://storage.googleapis.com/mysten-walrus-binaries/site-builder-testnet-latest-$SYSTEM -o site-builder
chmod +x site-builder
</code></pre>
<p>To be able to run it simply as <code>site-builder</code>, move the binary to any directory included in your
<code>$PATH</code> environment variable. Standard locations are <code>/usr/local/bin/</code>, <code>$HOME/bin/</code>, or
<code>$HOME/.local/bin/</code>.</p>
<div id="admonition-note" class="admonition admonish-note" role="note" aria-labelledby="admonition-note-title">
<div class="admonition-title">
<div id="admonition-note-title">
<p>Note</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/tutorial-install.html#admonition-note"></a>
</div>
<div>
<p>The site builder will look for the default configuration file <code>sites-config.yaml</code> in the current
directory, the <code>$XDG_HOME/walrus/sites-config.yaml</code> and <code>$HOME/walrus/sites-config.yaml</code> directory.
In case you want to use explicitly a different <code>sites-config.yaml</code>, use the <code>--config</code> flag to
specify the path to the configuration file.</p>
</div>
</div>
<p>Once this is done, you should be able to simply type <code>site-builder</code> in your terminal.</p>
<pre><code class="language-terminal">$ site-builder
Usage: site-builder [OPTIONS] &lt;COMMAND&gt;

Commands:
  publish  Publish a new site on Sui
  update   Update an existing site
  convert  Convert an object ID in hex format to the equivalent Base36
               format
  sitemap  Show the pages composing the Walrus site at the given object ID
  help     Print this message or the help of the given subcommand(s)

  ⋮
</code></pre>
<h2 id="configuration-2"><a class="header" href="#configuration-2">Configuration</a></h2>
<p>The <code>site-builder</code> tool needs a configuration file to work. This file is called <code>sites-config.yaml</code>
and looks like this:</p>
<pre><code class="language-yaml">contexts:
  testnet:
    # module: site
    # portal: wal.app
    package: 0xf99aee9f21493e1590e7e5a9aea6f343a1f381031a04a732724871fc294be799
    staking_object: 0xbe46180321c30aab2f8b3501e24048377287fa708018a5b7c2792b35fe339ee3
    general:
       wallet_env: testnet
       walrus_context: testnet # Assumes a Walrus CLI setup with a multi-config containing the "testnet" context.
       walrus_package: 0xd84704c17fc870b8764832c535aa6b11f21a95cd6f5bb38a9b07d2cf42220c66
       # wallet_address: 0x1234...
       # rpc_url: https://fullnode.testnet.sui.io:443
       # wallet: /path/to/.sui/sui_config/client.yaml
       # walrus_binary: /path/to/walrus
       # walrus_config: /path/to/testnet/client_config.yaml
       # gas_budget: 500000000
  mainnet:
    # module: site
    # portal: wal.app
    package: 0x26eb7ee8688da02c5f671679524e379f0b837a12f1d1d799f255b7eea260ad27
    staking_object: 0x10b9d30c28448939ce6c4d6c6e0ffce4a7f8a4ada8248bdad09ef8b70e4a3904
    general:
       wallet_env: mainnet
       walrus_context: mainnet # Assumes a Walrus CLI setup with a multi-config containing the "mainnet" context.
       walrus_package: 0xfdc88f7d7cf30afab2f82e8380d11ee8f70efb90e863d1de8616fae1bb09ea77
       # wallet_address: 0x1234...
       # rpc_url: https://fullnode.mainnet.sui.io:443
       # wallet: /path/to/.sui/sui_config/client.yaml
       # walrus_binary: /path/to/walrus
       # walrus_config: /path/to/mainnet/client_config.yaml
       # gas_budget: 500000000

default_context: mainnet
</code></pre>
<p>As you can see, the configuration file is quite simple. You can define here different contexts and
their configurations, with just the package id field being the mandatory one, representing the Sui
object ID of the Walrus Sites smart contract. You can find the latest version of the package in the
<a href="https://github.com/MystenLabs/walrus-sites/tree/mainnet">Walrus Sites repository</a> on the <code>mainnet</code>
branch.</p>
<div id="admonition-walrus-sites-stable-branch" class="admonition admonish-danger" role="note" aria-labelledby="admonition-walrus-sites-stable-branch-title">
<div class="admonition-title">
<div id="admonition-walrus-sites-stable-branch-title">
<p>Walrus Sites stable branch</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/tutorial-install.html#admonition-walrus-sites-stable-branch"></a>
</div>
<div>
<p>The stable branch of Walrus Sites is <code>mainnet</code>.
Make sure that you always pull the latest changes from there.</p>
</div>
</div>
<p>You can define the location of the <code>sites-config.yaml</code> file using the <code>--config</code> flag when running
the <code>site-builder</code> commands like so:</p>
<pre><code class="language-sh">site-builder --config /path/to/sites-config.yaml publish &lt;build-directory-of-a-site&gt;
</code></pre>
<p>However, if are not a fan of repeating the same flags over and over, it's always easier to have the
configuration file in one of the <a href="walrus-sites/./tutorial-install.html#admonition-note">default locations</a>.</p>
<p>Download the <code>sites-config.yaml</code> file from the repository, and place it in one of the aforementioned
default locations. To illustrate, we will use the <code>~/.config/walrus</code> directory, like so:</p>
<pre><code class="language-sh">curl https://raw.githubusercontent.com/MystenLabs/walrus-sites/refs/heads/mainnet/sites-config.yaml -o ~/.config/walrus/sites-config.yaml
</code></pre>
<p>You are now ready to start working on your Walrus Sites! 🎉</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="publishing-a-walrus-site"><a class="header" href="#publishing-a-walrus-site">Publishing a Walrus Site</a></h1>
<p>Now that everything is installed and configured, you should be able to start publishing your first
Walrus Site!</p>
<h2 id="select-the-source-material-for-the-site"><a class="header" href="#select-the-source-material-for-the-site">Select the source material for the site</a></h2>
<p>The <code>site-builder</code> works by uploading a directory of files produced by any web framework to Walrus
and adding the relevant metadata to Sui. This directory should have a file called <code>index.html</code> in
its root, which will be the entry point to the Walrus Site.</p>
<p>There is a very useful <a href="https://github.com/MystenLabs/example-walrus-sites">example-Walrus-sites</a>
repository that contains multiple kinds of sites that you can use for reference.</p>
<p>For simplicity, we will start by publishing the most frugal of the sites, the <code>walrus-snake</code> game.</p>
<p>First, clone the repository of the examples:</p>
<pre><code class="language-sh">git clone https://github.com/MystenLabs/example-walrus-sites.git &amp;&amp; cd example-walrus-sites
</code></pre>
<h2 id="publish-the-site"><a class="header" href="#publish-the-site">Publish the site</a></h2>
<p>Since we have placed the <code>walrus</code> and <code>site-builder</code> binaries and configuration in their default
locations, publishing the <code>./walrus-snake</code> site is as simple as calling the publishing command:</p>
<pre><code class="language-sh">site-builder deploy ./walrus-snake --epochs 1
</code></pre>
<div id="admonition-tip" class="admonition admonish-tip" role="note" aria-labelledby="admonition-tip-title">
<div class="admonition-title">
<div id="admonition-tip-title">
<p>Tip</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/tutorial-publish.html#admonition-tip"></a>
</div>
<div>
<p>Depending on the network, the duration of an epoch may vary. Currently on Walrus Testnet, the
duration of an epoch is one day. On Mainnet, the duration of an epoch is two weeks.</p>
</div>
</div>
<p>The end of the output should look like the following:</p>
<pre><code class="language-txt">Execution completed
Resource operations performed:
  - created resource /.DS_Store with blob ID PwNzE9_a9anYb8AZysafQZGqd4h0scsTGhzF2GPsWmQ
  - created resource /Oi-Regular.ttf with blob ID KUTTV_95_c68oQhaRP97tDPOYu0vqCWiGL7mzOq1faU
  - created resource /file.svg with blob ID oUpm044qBN1rkyIJYvMB4dUj6bRe3QEvJAN-cvlIFmk
  - created resource /index.html with blob ID AR03hvxSlyfYl-7MhXct4y3rnIIGPHdnjiIF03BK_XY
  - created resource /walrus.svg with blob ID xK8K1Q5khrl3eBT4jEiB-L_gyShEIOVWti8DcAoEjtw
The site routes were modified

Created new site: test site
New site object ID: 0xe674c144119a37a0ed9cef26a962c3fdfbdbfd86a3b3db562ee81d5542a4eccf
To browse the site, you have the following options:
        1. Run a local portal, and browse the site through it: e.g. http://5qs1ypn4wn90d6mv7d7dkwvvl49hdrlpqulr11ngpykoifycwf.localhost:3000
           (more info: https://docs.wal.app/walrus-sites/portal.html#running-the-portal-locally)
        2. Use a third-party portal (e.g. wal.app), which will require a SuiNS name.
           First, buy a SuiNS name at suins.io (e.g. example-domain), then point it to the site object ID.
           Finally, browse it with: https://example-domain.wal.app
</code></pre>
<div id="admonition-note" class="admonition admonish-note" role="note" aria-labelledby="admonition-note-title">
<div class="admonition-title">
<div id="admonition-note-title">
<p>Note</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/tutorial-publish.html#admonition-note"></a>
</div>
<div>
<p>Keep in mind that option 2 is only available on <code>mainnet</code>.</p>
</div>
</div>
<p>This output tells you that, for each file in the folder, a new Walrus blob was created, and the
respective blob ID. Further, it prints the object ID of the Walrus Site object on Sui (so you can
have a look in the explorer and use it to set the SuiNS name) and, finally, the URL at which you can
browse the site.
The deploy command will also save this new Site Object ID to the ws-resources.json</p>
<p>Note here that we are implicitly using the default <code>sites-config.yaml</code> as the config for the site
builder that we set up previously on the <a href="walrus-sites/./tutorial-install.html">installation section</a>. The
configuration file is necessary to ensure that the <code>site-builder</code> knows the correct Sui package for
the Walrus Sites logic.</p>
<p>More details on the configuration of the <code>site-builder</code> can be found under the <a href="walrus-sites/./builder-config.html">advanced
configuration</a> section.</p>
<h2 id="update-the-site"><a class="header" href="#update-the-site">Update the site</a></h2>
<p>Let's say now you want to update the content of the site, for example by changing the title from
"eat all the blobs!" to "Glob all the Blobs!".</p>
<p>First, make this edit on in the <code>./walrus-snake/index.html</code> file.</p>
<p>Then, you can update the existing site by running the <code>deploy</code> command again. The deploy command will
use the Site Object ID stored in ws-resources.json (from the initial deployment) to identify which site
to update. You do not need to specify the object ID manually:</p>
<pre><code class="language-sh">site-builder deploy --epochs 1 ./walrus-snake
</code></pre>
<p>The output this time should be:</p>
<pre><code class="language-txt">Execution completed
Resource operations performed:
  - deleted resource /index.html with blob ID LVLk9VSnBrEgQ2HJHAgU3p8IarKypQpfn38aSeUZzzE
  - created resource /index.html with blob ID pcZaosgEFtmP2d2IV3QdVhnUjajvQzY2ev8d9U_D5VY
The site routes were left unchanged

Site object ID: 0xe674c144119a37a0ed9cef26a962c3fdfbdbfd86a3b3db562ee81d5542a4eccf
To browse the site, you have the following options:
        1. Run a local portal, and browse the site through it: e.g. http://2ql9wtro4xf2x13pm9jjeyhhfj28okawz5hy453hkyfeholy6f.localhost:3000
           (more info: https://docs.wal.app/walrus-sites/portal.html#running-the-portal-locally)
        2. Use a third-party portal (e.g. wal.app), which will require a SuiNS name.
           First, buy a SuiNS name at suins.io (e.g. example-domain), then point it to the site object ID.
           Finally, browse it with: https://example-domain.wal.app
</code></pre>
<p>Compared to the when the site was first published, we can see that now the only actions performed
were to delete the old <code>index.html</code>, and update it with the newer one.</p>
<p>Browsing to the provided URL should reflect the change. You've updated the site!</p>
<div id="admonition-note-1" class="admonition admonish-note" role="note" aria-labelledby="admonition-note-1-title">
<div class="admonition-title">
<div id="admonition-note-1-title">
<p>Note</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/tutorial-publish.html#admonition-note-1"></a>
</div>
<div>
<p>The wallet you are using must be the <em>owner</em> of the Walrus Site object to be able to update it.</p>
</div>
</div>
<div id="admonition-extending-the-expiration-date-of-an-existing-site" class="admonition admonish-danger" role="note" aria-labelledby="admonition-extending-the-expiration-date-of-an-existing-site-title">
<div class="admonition-title">
<div id="admonition-extending-the-expiration-date-of-an-existing-site-title">
<p>Extending the expiration date of an existing site</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/tutorial-publish.html#admonition-extending-the-expiration-date-of-an-existing-site"></a>
</div>
<div>
<p>To extend the expiration date of a previously-stored site, use the <code>update</code> command with the
<code>--check-extend</code> flag. With this flag, the site-builder will force a check of the status of
all the Walrus blobs composing the site, and will extend the ones that expire before <code>--epochs</code>
epochs. This is useful to ensure all the resources in the site are available for the same amount
of epochs.</p>
</div>
</div>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="set-a-suins-name"><a class="header" href="#set-a-suins-name">Set a SuiNS name</a></h1>
<div id="admonition-note" class="admonition admonish-note" role="note" aria-labelledby="admonition-note-title">
<div class="admonition-title">
<div id="admonition-note-title">
<p>Note</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/tutorial-suins.html#admonition-note"></a>
</div>
<div>
<p>Browsing sites with b36 subdomains (e.g. <code>https://1lupgq2auevjruy7hs9z7tskqwjp5cc8c5ebhci4v57qyl4piy.wal.app</code>)
is no longer possible using the <code>wal.app</code> portal. B36 subdomains are still supported if you use
a local server, or an alternative portal.</p>
<p>To browse walrus sites using the <code>wal.app</code> portal, please
<a href="walrus-sites/./tutorial-suins.html#get-a-suins-name">use SuiNS names instead</a>.
``</p>
<p>Walrus Sites require to use SuiNS names (this is like DNS for Sui) to assign a human-readable name
to a Walrus Site. To do so, you simply have to get a SuiNS name you like, and point it to the
object ID of the Walrus Site (as provided by the <code>publish</code> or <code>update</code> commands).</p>
<p>Let's do this step by step.</p>
<h2 id="get-a-suins-name"><a class="header" href="#get-a-suins-name">Get a SuiNS name</a></h2>
<ul>
<li>
<p>Navigate to <a href="https://suins.io">https://suins.io</a> (mainnet) or <a href="https://testnet.suins.io">https://testnet.suins.io</a> (testnet) and buy
a domain name with your wallet. For example, <code>walrusgame</code> (this specific one is already
taken, choose another you like).</p>
<pre><code class="language-admonish note">At the moment, you can only select names that are composed of letters `a-z` and numbers `0-9`, but
no special characters (e.g., `-`).

</code></pre>
</li>
</ul>
</div>
</div>
<h2 id="map-the-suins-name-to-the-walrus-site"><a class="header" href="#map-the-suins-name-to-the-walrus-site">Map the SuiNS name to the Walrus Site</a></h2>
<p>Now, you can set the SuiNS name to point to the address of your Walrus Site. To do so, go to the
"names you own" section at <a href="https://suins.io/account/my-names">SuiNS.io</a> or
<a href="https://testnet.suins.io/account/my-names">Testnet.SuiNS.io</a> for Testnet, click on the "three
dots" menu icon above the name you want to map, and click "Link To Walrus Site". Paste in the bar
the object ID of the Walrus Site, check that it is correct, and click "Apply".</p>
<p>After approving the transaction, we can now browse <a href="https://walrusgame.wal.app">https://walrusgame.wal.app</a>!</p>
<div id="admonition-backwards-compatibility" class="admonition admonish-warning" role="note" aria-labelledby="admonition-backwards-compatibility-title">
<div class="admonition-title">
<div id="admonition-backwards-compatibility-title">
<p>Backwards compatibility</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/tutorial-suins.html#admonition-backwards-compatibility"></a>
</div>
<div>
<p>If you previously linked a SuiNS domain to a Walrus Site, you might recall clicking the "Link To
Wallet Address" button instead of the "Link To Walrus Site" button. These old links remain valid,
but we recommend using the procedure above for all new sites and updates to older sites. The portal
will first check if the domain is linked using the "Link to Walrus Site", and, if that is not set,
it will fall back to checking the "Link to Wallet Address".</p>
</div>
</div>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="advanced-functionality"><a class="header" href="#advanced-functionality">Advanced functionality</a></h1>
<p>Keep reading to learn about the advanced features of Walrus Sites, including configuring the site
builder, specifying headers and routing for site resources, and <em>redirecting Sui objects to Walrus
Sites</em> to create per-object websites!</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="site-builder-commands"><a class="header" href="#site-builder-commands">Site builder commands</a></h1>
<p>We now describe in more detail the commands available through the site builder.</p>
<div id="admonition-tip" class="admonition admonish-tip" role="note" aria-labelledby="admonition-tip-title">
<div class="admonition-title">
<div id="admonition-tip-title">
<p>Tip</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/commands.html#admonition-tip"></a>
</div>
<div>
<p>In general, the <code>--help</code> flag is your friend, you can add it to get further details for the whole
CLI (<code>site-builder --help</code>) or individual commands (e.g. <code>site-builder update --help</code>).</p>
</div>
</div>
<h2 id="deploy"><a class="header" href="#deploy"><code>deploy</code></a></h2>
<p>The <code>deploy</code> command is the primary and recommended command for managing your Walrus Site on Sui.
The command takes a directory as input and creates a new Walrus Site from the
resources contained within, and on subsequent calls, it updates the existing site.</p>
<h3 id="behavior"><a class="header" href="#behavior">Behavior</a></h3>
<p>The deploy command determines whether to publish a new site or update an existing one by looking for
a Site Object ID. It finds the ID with the following priority:</p>
<ul>
<li>An ID provided directly via the <code>--object-id &lt;OBJECT_ID&gt;</code> command-line flag.</li>
<li>An ID found in the object_id field of the ws-resources.json file.</li>
<li>If no ID is found by either method, deploy will publish a new site.</li>
</ul>
<p>When a new site is published, its object_id is automatically saved back to <code>ws-resources.json</code>,
streamlining future updates.</p>
<h3 id="usage"><a class="header" href="#usage">Usage</a></h3>
<p>As shown by the command's help information, the typical usage is:</p>
<pre><code class="language-sh">site-builder deploy [OPTIONS] --epochs &lt;EPOCHS&gt; &lt;DIRECTORY&gt;
</code></pre>
<p>The <code>deploy</code> command determines whether to publish or update based on the presence of an <code>object_id</code>
field in the <code>ws-resources.json</code> file. <a href="walrus-sites/./routing.html">specifying headers and routing</a>.</p>
<div id="admonition-info" class="admonition admonish-info" role="note" aria-labelledby="admonition-info-title">
<div class="admonition-title">
<div id="admonition-info-title">
<p>Info</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/commands.html#admonition-info"></a>
</div>
<div>
<p>The <code>object_id</code> field is automatically set by the <code>deploy</code>
command, when deploying a new site, so there is no need for manually tracking the Site's Object ID.</p>
</div>
</div>
<div id="admonition-note" class="admonition admonish-note" role="note" aria-labelledby="admonition-note-title">
<div class="admonition-title">
<div id="admonition-note-title">
<p>Note</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/commands.html#admonition-note"></a>
</div>
<div>
<p>The wallet you are using to update an existing Site must be the <em>owner</em> of the Walrus Site object to be able
to update it.</p>
</div>
</div>
<p>The <code>--epochs</code> flag specifies the number of epochs for which the site's resources will be stored
on Walrus (e.g., 10). You can also use max to store for the maximum allowed duration.</p>
<div id="admonition-warning" class="admonition admonish-warning" role="note" aria-labelledby="admonition-warning-title">
<div class="admonition-title">
<div id="admonition-warning-title">
<p>Warning</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/commands.html#admonition-warning"></a>
</div>
<div>
<p>The <code>--epochs</code> flag is required &amp; it's value must be greater than 0.</p>
</div>
</div>
<div id="admonition-epoch-duration-on-walrus" class="admonition admonish-danger" role="note" aria-labelledby="admonition-epoch-duration-on-walrus-title">
<div class="admonition-title">
<div id="admonition-epoch-duration-on-walrus-title">
<p>Epoch duration on Walrus</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/commands.html#admonition-epoch-duration-on-walrus"></a>
</div>
<div>
<p>On Walrus Testnet, the epoch duration is <strong>one day</strong>.
On Walrus Mainnet, the epoch duration is <strong>fourteen days</strong>.
Therefore, consider storing your site for a large number of epochs
if you want to make it available for the following months!
The maximum duration is set to 53 epochs.</p>
</div>
</div>
<p>If you are just uploading raw files without an <code>index.html</code>, you may want to use the
<code>--list-directory</code> flag, which will automatically create an index page to browse the files. See for
example <a href="https://bin.wal.app">https://bin.wal.app</a>.</p>
<h3 id="migrating-from-publishupdate"><a class="header" href="#migrating-from-publishupdate">Migrating from <code>publish</code>/<code>update</code></a></h3>
<p>If you have a site that was previously managed with the <code>publish</code> and <code>update</code> commands, you can
easily switch to the <code>deploy</code> command using one of the following methods:</p>
<ul>
<li><strong>Recommended</strong>: Use the <code>--object-id</code> cli flag
Simply run the <code>deploy</code> command and provide your existing Site's Object ID via the <code>--object-id</code> flag:</li>
</ul>
<pre><code class="language-sh">site-builder deploy --object-id &lt;YOUR_EXISTING_SITE_ID&gt; --epochs &lt;NUMBER&gt; ./path/to/your/site
</code></pre>
<p>On success, this will update your site and automatically create (or update if already existing) a
<code>ws-resources.json</code> file with the Site's Object ID saved in the <code>object_id</code> field.
Future deployments will then be as simple as:</p>
<pre><code class="language-sh">site-builder deploy --epochs &lt;NUMBER&gt; ./path/to/your/site
</code></pre>
<ul>
<li>Manual <code>ws-resources.json</code> setup.
You can manually create or update a <code>ws-resources.json</code> file in your site's root directory and add
the <code>object_id</code> field with your existing site's Object ID.</li>
</ul>
<pre><code class="language-json">{
  "object_id": "0x123...abc"
}
</code></pre>
<p>Then, you can simply run:</p>
<pre><code class="language-sh">site-builder deploy --epochs &lt;NUMBER&gt; ./path/to/your/site
</code></pre>
<h2 id="publish"><a class="header" href="#publish"><code>publish</code></a></h2>
<div id="admonition-note-1" class="admonition admonish-note" role="note" aria-labelledby="admonition-note-1-title">
<div class="admonition-title">
<div id="admonition-note-1-title">
<p>Note</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/commands.html#admonition-note-1"></a>
</div>
<div>
<p>The <code>deploy</code> command is the new standard for publishing and updating your Walrus Sites.
Users are encouraged to migrate to the <code>deploy</code> command for a simpler and more robust experience.</p>
</div>
</div>
<p>The <code>publish</code> command, as described in the <a href="walrus-sites/./tutorial-publish.html">previous section</a>, publishes a
new site on Sui. The command takes a directory as input and creates a new Walrus Site from the
resources contained within.</p>
<p>The <code>--epochs</code> flag allows you to specify for how long the site data will be stored on Walrus.</p>
<div id="admonition-epoch-duration-on-walrus-1" class="admonition admonish-danger" role="note" aria-labelledby="admonition-epoch-duration-on-walrus-1-title">
<div class="admonition-title">
<div id="admonition-epoch-duration-on-walrus-1-title">
<p>Epoch duration on Walrus</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/commands.html#admonition-epoch-duration-on-walrus-1"></a>
</div>
<div>
<p>On Walrus Testnet, the epoch duration is <strong>one day</strong>.
On Walrus Mainnet, the epoch duration is <strong>fourteen days</strong>.
Therefore, consider storing your site for a large number of epochs
if you want to make it available for the following months!
The maximum duration is set to 53 epochs.</p>
</div>
</div>
<p>If you are just uploading raw files without an <code>index.html</code>, you may want to use the
<code>--list-directory</code> flag, which will automatically create an index page to browse the files. See for
example <a href="https://bin.wal.app">https://bin.wal.app</a>.</p>
<p>The <code>publish</code> command will also respect the instructions in the <code>ws-resources.json</code> configuration
file. To know more, see the section on <a href="walrus-sites/./routing.html">specifying headers and routing</a>.</p>
<h2 id="update"><a class="header" href="#update"><code>update</code></a></h2>
<div id="admonition-note-2" class="admonition admonish-note" role="note" aria-labelledby="admonition-note-2-title">
<div class="admonition-title">
<div id="admonition-note-2-title">
<p>Note</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/commands.html#admonition-note-2"></a>
</div>
<div>
<p>The <code>deploy</code> command is the new standard for publishing and updating your Walrus Sites.
Users are encouraged to migrate to the <code>deploy</code> command for a simpler and more robust experience.</p>
</div>
</div>
<p>This command is the equivalent of <code>publish</code>, but for updating an existing site. It takes the same
arguments, with the addition of the Sui object ID of the site to update.</p>
<div id="admonition-note-3" class="admonition admonish-note" role="note" aria-labelledby="admonition-note-3-title">
<div class="admonition-title">
<div id="admonition-note-3-title">
<p>Note</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/commands.html#admonition-note-3"></a>
</div>
<div>
<p>The wallet you are using to call <code>update</code> must be the <em>owner</em> of the Walrus Site object to be able
to update it.</p>
</div>
</div>
<h2 id="convert"><a class="header" href="#convert"><code>convert</code></a></h2>
<p>The <code>convert</code> command converts an object ID in hex format to the equivalent Base36 format. This
command is useful if you have the Sui object ID of a Walrus Site, and want to know the subdomain
where you can browse it.</p>
<h2 id="site-map"><a class="header" href="#site-map"><code>site-map</code></a></h2>
<p>The <code>sitemap</code> command shows the resources that compose the Walrus Site at the given object ID.</p>
<h2 id="list-directory"><a class="header" href="#list-directory"><code>list-directory</code></a></h2>
<p>With <code>list-directory</code>, you can obtain the <code>index.html</code> file that would be generated by running
<code>publish</code> or <code>update</code> with the <code>--list-directory</code> flag. This is useful to see how the index page
would look like before publishing it—and possibly editing to make it look nicer!</p>
<h2 id="destroy"><a class="header" href="#destroy"><code>destroy</code></a></h2>
<p>Destroys both blockchain objects and Walrus assets of a site with the given object id.</p>
<h2 id="update-resource"><a class="header" href="#update-resource"><code>update-resource</code></a></h2>
<p>Adds or updates a single resource in a site, eventually replacing any pre-existing ones.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="configuring-the-site-builder"><a class="header" href="#configuring-the-site-builder">Configuring the site builder</a></h1>
<p>Configuring the <code>site-builder</code> tool is straightforward, but care is required to ensure that
everything works correctly.</p>
<p>The <code>site-builder</code> tool requires a configuration file to know which package to use on Sui, which
wallet to use, the gas budget, and other operational details. Most of these are abstracted away
through sensible defaults, so you should not need to touch them. Yet, for completeness, we provide
here the details for all the configuration options.</p>
<h2 id="minimal-configuration"><a class="header" href="#minimal-configuration">Minimal configuration</a></h2>
<p>The config file is expected to be in one of the <a href="walrus-sites/../usage/setup.html#config-custom-path">default
locations</a>, and it is possible to point elsewhere with the
<code>--config</code> flag. For your first run, it should be sufficient to call the <code>site-builder</code> without
specifying the config explicitly, which is already configured if you followed thoroughly the
<a href="walrus-sites/./tutorial-install.html#configuration">installation steps</a>.</p>
<p>If, for any reason, you didn't add <code>walrus</code> to <code>$PATH</code>, make sure to configure a pointer to the
binary, see below.</p>
<h2 id="additional-options"><a class="header" href="#additional-options">Additional options</a></h2>
<p>If you want to have more control over the behavior of the site builder, you can customize the
following variables in the config file:</p>
<ul>
<li><code>package</code>: the object ID of the Walrus Sites package on Sui. This must always be specified in the
config, and is already appropriately configured in <code>./sites-config.yaml</code>.</li>
<li><code>portal</code>: the name of the portal through which the site will be viewed; this only affects the
output of the CLI, and nothing else (default: <code>wal.app</code>). All Walrus Sites are accessible
through any portal independent of this setting.</li>
<li><code>general</code>: these are general options that can be configured both through the CLI and the config:
<ul>
<li><code>rpc_url</code>: The URL of the Sui RPC node to use. If not set, the <code>site-builder</code> will infer it from
the wallet.</li>
<li><code>wallet</code>: Pointer to the Sui wallet to be used. By default, it uses the system-wide wallet (the
one from <code>sui client addresses</code>).</li>
<li><code>walrus_binary</code>: Pointer to the <code>walrus</code> binary. By default, this is expected to be run from
<code>$PATH</code>.</li>
<li><code>walrus_config</code>: The configuration for the <code>walrus</code> client binary, see the <a href="walrus-sites/../usage/setup.html">relevant
chapter</a>.</li>
<li><code>gas_budget</code>: The maximum amount of gas to be spent for transactions (default: 500M MIST).</li>
</ul>
</li>
</ul>
<div id="admonition-note" class="admonition admonish-note" role="note" aria-labelledby="admonition-note-title">
<div class="admonition-title">
<div id="admonition-note-title">
<p>Note</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/builder-config.html#admonition-note"></a>
</div>
<div>
<p>From time to time there are package upgrades happening. This will require you to
update the <code>package</code> field in the config file.</p>
</div>
</div>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="specifying-headers-routing-and-metadata"><a class="header" href="#specifying-headers-routing-and-metadata">Specifying headers, routing, and metadata</a></h1>
<p>In its base configuration, Walrus Sites serves static assets through a portal. However, many modern
web applications require more advanced features, such as custom headers and client-side routing.</p>
<p>Therefore, the site-builder can read a <code>ws-resource.json</code> configuration file, in which you can
directly specify resource headers and routing rules.</p>
<h2 id="the-ws-resourcesjson-file"><a class="header" href="#the-ws-resourcesjson-file">The <code>ws-resources.json</code> file</a></h2>
<p>This file is optionally placed in the root of the site directory, and it is <em>not</em> uploaded with the
site's resources (in other words, the file is not part of the resulting Walrus Site and is not
served by the portal).</p>
<p>If you don't want to use this default location, you can specify the path to the configuration file
with the <code>--ws-resources</code> flag when running the <code>deploy</code>, <code>publish</code> or <code>update</code> commands.</p>
<p>The file is JSON-formatted, and looks like the following:</p>
<pre><code class="language-JSON">{
  "headers": {
    "/index.html": {
      "Content-Type": "text/html; charset=utf-8",
      "Cache-Control": "max-age=3500"
    }
  },
  "routes": {
    "/*": "/index.html",
    "/accounts/*": "/accounts.html",
    "/path/assets/*": "/assets/asset_router.html"
  },
  "metadata": {
      "link": "https://subdomain.wal.app",
      "image_url": "https://www.walrus.xyz/walrus-site",
      "description": "This is a walrus site.",
      "project_url": "https://github.com/MystenLabs/walrus-sites/",
      "creator": "MystenLabs"
  },
  "site_name": "My Walrus Site",
  "object_id": "0xe674c144119a37a0ed9cef26a962c3fdfbdbfd86a3b3db562ee81d5542a4eccf",
  "ignore": ["/private/*", "/secret.txt", "/images/tmp/*"]
}
</code></pre>
<div id="admonition-note" class="admonition admonish-note" role="note" aria-labelledby="admonition-note-title">
<div class="admonition-title">
<div id="admonition-note-title">
<p>Note</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/routing.html#admonition-note"></a>
</div>
<div>
<p>The <code>ws-resources.json</code> file, expects the field names to be in <code>snake_case</code></p>
</div>
</div>
<p>We now describe in detail six sections of the configuration file: <code>headers</code>, <code>routes</code>,
<code>metadata</code>, <code>site_name</code>, <code>object_id</code> and the <code>ignore</code> section.</p>
<h2 id="specifying-http-response-headers"><a class="header" href="#specifying-http-response-headers">Specifying HTTP response headers</a></h2>
<p>The <code>headers</code> section allows you to specify custom HTTP response headers for specific resources.
The keys in the <code>headers</code> object are the paths of the resources, and the values are lists of
key-value pairs corresponding to the headers that the portal will attach to the response.</p>
<p>For example, in the configuration above, the file <code>index.html</code> will be served with the
<code>Content-Type</code> header set to <code>text/html; charset=utf-8</code> and the <code>Cache-Control</code> header set to
<code>max-age=3500</code>.</p>
<p>This mechanism allows you to control various aspects of the resource delivery, such as caching,
encoding, and content types.</p>
<div id="admonition-note-1" class="admonition admonish-note" role="note" aria-labelledby="admonition-note-1-title">
<div class="admonition-title">
<div id="admonition-note-1-title">
<p>Note</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/routing.html#admonition-note-1"></a>
</div>
<div>
<p>The resource path is always represented as starting from the root <code>/</code>.</p>
</div>
</div>
<h3 id="default-headers"><a class="header" href="#default-headers">Default headers</a></h3>
<p>By default, no headers need to be specified, and the <code>ws-resources.json</code> file can be omitted. The
site-builder will automatically try to infer the <code>Content-Type</code> header based on the file extension,
and set the <code>Content-Encoding</code> to <code>identity</code> (no transformation).</p>
<p>In case the content type cannot be inferred, the <code>Content-Type</code> will be set to
<code>application/octet-stream</code>.</p>
<p>These defaults will be overridden by any headers specified in the <code>ws-resources.json</code> file.</p>
<h2 id="specifying-client-side-routing"><a class="header" href="#specifying-client-side-routing">Specifying client-side routing</a></h2>
<p>The <code>routes</code> section allows you to specify client-side routing rules for your site. This is useful
when you want to use a single-page application (SPA) framework, such as React or Angular.</p>
<p>The configuration in the <code>routes</code> object is a mapping from route keys to resource paths.</p>
<p>The <strong><code>routes</code> keys</strong> are path patterns in the form <code>/path/to/some/*</code>, where the <code>*</code> character
represents a wildcard.</p>
<div id="admonition-note-2" class="admonition admonish-note" role="note" aria-labelledby="admonition-note-2-title">
<div class="admonition-title">
<div id="admonition-note-2-title">
<p>Note</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/routing.html#admonition-note-2"></a>
</div>
<div>
<p>Currently, the wildcard <em>can only be specified at the end of the path</em>.
Therefore, <code>/path/*</code> is a valid path, while <code>/path/*/to</code> and <code>*/path/to/*</code> are not.</p>
</div>
</div>
<p>The <strong><code>routes</code> values</strong> are the resource paths that should be served when the route key is matched.</p>
<div id="admonition-important" class="admonition admonish-danger" role="note" aria-labelledby="admonition-important-title">
<div class="admonition-title">
<div id="admonition-important-title">
<p>Important</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/routing.html#admonition-important"></a>
</div>
<div>
<p>The paths in the values <strong>must</strong> be valid resource paths, meaning that they must be present among
the site's resources. The Walrus sites contract will <strong>abort</strong> if the user tries to create a route
that points to a non-existing resource.</p>
</div>
</div>
<p>The simple routing algorithm is as follows:</p>
<ul>
<li>Whenever a resource path <em>is not found among the sites resources</em>, the portal tries to match the
path to the <code>routes</code>.</li>
<li>All matching routes are then <em>lexicographically ordered</em>, and the <em>longest</em> match is chosen.</li>
<li>The resource corresponding to this longest match is then served.</li>
</ul>
<div id="admonition-note-3" class="admonition admonish-note" role="note" aria-labelledby="admonition-note-3-title">
<div class="admonition-title">
<div id="admonition-note-3-title">
<p>Note</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/routing.html#admonition-note-3"></a>
</div>
<div>
<p>In other words, the portal will <em>always</em> serve a resource if present, and if not present will serve
the resource with the <em>longest matching prefix</em> among the routes.</p>
</div>
</div>
<p>Recall the example above:</p>
<pre><code class="language-JSON">"routes": {
  "/*": "/index.html",
  "/path/*": "/accounts.html",
  "/path/assets/*": "/assets/asset_router.html"
}
</code></pre>
<p>The following matchings will occur:</p>
<ul>
<li>browsing <code>/any/other/test.html</code> will serve <code>/index.html</code>;</li>
<li>browsing <code>/path/test.html</code> will serve <code>/accounts.html</code>, as it is a more specific match than the
previous one;</li>
<li>similarly, browsing <code>/path/assets/test.html</code> will serve <code>/assets/asset_router.html</code>.</li>
</ul>
<p><code>/index.html</code>, <code>/accounts.html</code>, and <code>/assets/asset_router.html</code> are all existing resources on the
Walrus Sites object on Sui.</p>
<h2 id="displaying-the-site-object-on-wallets-and-explorers"><a class="header" href="#displaying-the-site-object-on-wallets-and-explorers">Displaying the Site Object on Wallets and Explorers</a></h2>
<p>It's possible to make your Site object prettier by displaying information about it on Sui explorers
and wallets by using the <code>metadata</code> field. This is useful for adding human-readable information
about the site. For example, you can add a link to your site's homepage, an image of your site's
logo, etc.</p>
<p>As you can see from the example above, the fields correspond to the basic set of properties
suggested by the
<a href="https://docs.sui.io/standards/display#display-properties">Sui Display object standard</a>.</p>
<pre><code class="language-JSON">"metadata": {
      "link": "https://subdomain.wal.app",
      "image_url": "https://www.walrus.xyz/walrus-site",
      "description": "This is a walrus site.",
      "project_url": "https://github.com/MystenLabs/walrus-sites/",
      "creator": "MystenLabs"
  }
</code></pre>
<p>All metadata fields are optional, and can be omitted if not needed. There are some default values
specified in the site-builder CLI, which can be overridden by the user.</p>
<p>It is recommended to use the above fields like this:</p>
<ul>
<li><code>link</code>: Add a link to your site's homepage.</li>
<li><code>image_url</code>: Include a URL to your site's logo which will be displayed on your wallet. For
example you can place a link to your sites favicon.</li>
<li><code>description</code>: Add a brief description of your site.</li>
<li><code>project_url</code>: If your site is open-source, add a link to your site's GitHub repository.</li>
<li><code>creator</code>: Add the name of your company, group, or individual creator of your site.</li>
</ul>
<h2 id="site-name-site_name"><a class="header" href="#site-name-site_name">Site Name (<code>site_name</code>)</a></h2>
<p>You can set a Name for your Walrus Site, via the optional <code>site_name</code> field in your
<code>ws-resources.json</code> file.</p>
<div id="admonition-note-4" class="admonition admonish-note" role="note" aria-labelledby="admonition-note-4-title">
<div class="admonition-title">
<div id="admonition-note-4-title">
<p>Note</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/routing.html#admonition-note-4"></a>
</div>
<div>
<p>In case you have also provided a Site Name via the <code>--site-name</code> cli flag, the cli flag
will take priority over the <code>site_name</code> field in the <code>ws-resources.json</code>, which will be
overwritten.</p>
</div>
</div>
<div id="admonition-note-5" class="admonition admonish-note" role="note" aria-labelledby="admonition-note-5-title">
<div class="admonition-title">
<div id="admonition-note-5-title">
<p>Note</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/routing.html#admonition-note-5"></a>
</div>
<div>
<p>If a Site Name is not provided at all (neither through the <code>--site-name</code> cli flag, nor
through the <code>site_name</code> field in <code>ws-resources.json</code>), then a default name will be used.</p>
</div>
</div>
<h2 id="site-object-id-object_id"><a class="header" href="#site-object-id-object_id">Site Object ID (<code>object_id</code>)</a></h2>
<p>The optional <code>object_id</code> field in your <code>ws-resources.json</code> file stores the Sui Object ID of your
deployed Walrus Site.</p>
<p><strong>Role in Deployment:</strong></p>
<p>The <code>site-builder deploy</code> command primarily uses this field to identify an existing site for updates.
If a valid <code>object_id</code> is present, <code>deploy</code> will target that site for modifications.
If this field is missing (and no <code>--object-id</code> CLI flag is used), <code>deploy</code> will publish a new site.
If successful, then the command automatically populates this <code>object_id</code> field in your <code>ws-resources.json</code>.</p>
<h2 id="ignoring-files-from-being-uploaded"><a class="header" href="#ignoring-files-from-being-uploaded">Ignoring files from being uploaded</a></h2>
<p>You can use the optional <code>ignore</code> field to exclude certain files or folders from being published.
This is useful when you want to keep development files, secrets, or temporary assets out of
the final build.</p>
<p>The <code>ignore</code> field is a list of resource paths to skip. Each pattern must start with a <code>/</code>,
and may end with a <code>*</code> to indicate a wildcard match.</p>
<p>For example:</p>
<pre><code class="language-json">"ignore": [
  "/private/*",
  "/secret.txt",
  "/images/tmp/*"
]
</code></pre>
<p>This configuration will skip all files inside the <code>/private/</code> and <code>/images/tmp/</code> directories,
as well as a specific file <code>/secret.txt</code>.</p>
<blockquote>
<p>Wildcards are only supported in the <strong>last position</strong> of the path (e.g., <code>/foo/*</code> is valid,
but <code>/foo/*/bar</code> is not).</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="linking-from-and-to-walrus-sites"><a class="header" href="#linking-from-and-to-walrus-sites">Linking from and to Walrus Sites</a></h1>
<div id="admonition-walrus-sites-links-are-currently-unavailable" class="admonition admonish-warning" role="note" aria-labelledby="admonition-walrus-sites-links-are-currently-unavailable-title">
<div class="admonition-title">
<div id="admonition-walrus-sites-links-are-currently-unavailable-title">
<p>Walrus Sites links are currently unavailable</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/linking.html#admonition-walrus-sites-links-are-currently-unavailable"></a>
</div>
<div>
<p>This feature is currently unavailable on server-side portals. So if you are browsing a Walrus Site
on <a href="https://wal.app">https://wal.app</a>, you will not be able to use Walrus Sites links.</p>
<p>We are working on enabling this feature. Stay tuned!</p>
</div>
</div>
<p>Links in Walrus Sites work <em>almost</em> as you would expect in a regular website. We specify here a few
of the details.</p>
<h2 id="linking-to-resources-within-the-same-site"><a class="header" href="#linking-to-resources-within-the-same-site">Linking to resources within the same site</a></h2>
<p>Relative and absolute links (<code>href="/path/to/resource.html"</code>) work as usual.</p>
<h2 id="linking-to-resources-on-the-web"><a class="header" href="#linking-to-resources-on-the-web">Linking to resources on the web</a></h2>
<p>Linking to a resource on the web (<code>href="https://some.cdn.example.com/stylesheet.css"</code>) also works
as usual.</p>
<h2 id="linking-to-resources-in-other-walrus-sites"><a class="header" href="#linking-to-resources-in-other-walrus-sites">Linking to resources in other Walrus Sites</a></h2>
<p>Here is the part that is a bit different. Assume there is some image that you can browse at
<code>https://gallery.wal.app/walrus_arctic.webp</code>, and you want to link it from your own Walrus Site.</p>
<p>Recall that, however, <code>https://wal.app</code> is just one of the possibly many portals. I.e., the same
resource is browsable from a local portal (<code>http://gallery.localhost:8080/walrus_arctic.webp</code>).
Therefore, how can you link the resource in a <em>portal-independent way</em>? This is important for
interoperability, availability, and respecting the user's choice of portal.</p>
<h3 id="the-solution-walrus-sites-links"><a class="header" href="#the-solution-walrus-sites-links">The solution: Walrus Sites links</a></h3>
<div id="admonition-warning" class="admonition admonish-warning" role="note" aria-labelledby="admonition-warning-title">
<div class="admonition-title">
<div id="admonition-warning-title">
<p>Warning</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/linking.html#admonition-warning"></a>
</div>
<div>
<p>This feature is only available for service-worker based portals.</p>
</div>
</div>
<p>We solve this problem by having the portals interpret special links that are normally invalid on
the web and redirect to the corresponding Walrus Sites resource in the portal itself.</p>
<p>Consider the example above, where the resource <code>/walrus_arctic.webp</code> is browsed from the Walrus Site
with SuiNS name <code>gallery</code>, which points to the object ID <code>abcd123…</code> (in Base36 encoding). Then,
the portal-independent link is: <code>https://gallery.suiobj/walrus_arctic.webp</code>. To fix the object ID
instead of the SuiNS name, you can use <code>https://abcd123….suiobj/walrus_arctic.webp</code>.</p>
<p>Another possibility is to directly point to the Walrus <em>blob ID</em> of the resource, and have the
browser "sniff" the content type. This works for images, for example, but not for script or
stylesheets. For example to point to the blob ID (e.g., containing an image) <code>qwer5678…</code>, use the
URL <code>https://blobid.walrus/qwer5678…</code>.</p>
<p>With such a link, the portal will extract the blob ID and redirect the request to the aggregator it
is using to fetch blobs.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="redirecting-objects-to-walrus-sites"><a class="header" href="#redirecting-objects-to-walrus-sites">Redirecting objects to Walrus Sites</a></h1>
<p>We have seen in the <a href="walrus-sites/./overview.html">overview</a> how a Walrus Site object on Sui looks like. We will
discuss now how you can create ensure that a <em>set of arbitrary objects</em> can all be tied to a
specific, and possibly unique, Walrus Site.</p>
<h2 id="the-goal"><a class="header" href="#the-goal">The goal</a></h2>
<p>Consider a collection of NFTs, such as the one published by <a href="https://flatland.wal.app">https://flatland.wal.app</a>. As we
show there, each minted NFT has its own Walrus Site, which can be personalized based on the contents
(e.g., the color) of the NFT itself. How can we achieve this?</p>
<h2 id="redirect-links"><a class="header" href="#redirect-links">Redirect links</a></h2>
<p>The solution is simple: We add a "redirect" in the NFT's
<a href="https://docs.sui.io/standards/display#sui-utility-objects"><code>Display</code></a> property. Each time an NFT's
object ID is browsed through a portal, the portal will check the <code>Display</code> of the NFT and, if it
encounters the <code>walrus site address</code> key, it will go fetch the Walrus Site that is at the
corresponding object ID.</p>
<h3 id="redirects-in-move"><a class="header" href="#redirects-in-move">Redirects in Move</a></h3>
<p>Practically speaking, when creating the <code>Display</code> of the NFT, you can include the key-value pair
that points to the Walrus Site that is to be used.</p>
<pre><code class="language-move">...
const VISUALIZATION_SITE: address = @0x901fb0...;
display.add(b"walrus site address".to_string(), VISUALIZATION_SITE.to_string());
...
</code></pre>
<h3 id="how-to-change-the-site-based-on-the-nft"><a class="header" href="#how-to-change-the-site-based-on-the-nft">How to change the site based on the NFT?</a></h3>
<p>The code above will only open the specified Walrus Site when browsing the object ID of the NFT. How
do we ensure that the properties of the NFT can be used to personalize the site?</p>
<p>This needs to be done in the <code>VISUALIZATION_SITE</code>: Since the subdomain is still pointing to the
NFT's object ID, the Walrus Site that is loaded can check its <code>origin</code> in JavaScript, and use the
subdomain to determine the NFT, fetch it from chain, and use its internal fields to modify the
displayed site.</p>
<p>For an end-to-end example, see the <code>flatland</code>
<a href="https://github.com/MystenLabs/example-walrus-sites/tree/main/flatland">repo</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="cicd"><a class="header" href="#cicd">CI/CD</a></h1>
<p>If you need to automate the deployment of your Walrus Sites, you can use a CI/CD pipeline. This
guide covers the essential steps to set up continuous deployment for your site.</p>
<h2 id="get-started"><a class="header" href="#get-started">Get started</a></h2>
<p>Follow the below in order:</p>
<ol>
<li><strong><a href="walrus-sites/./ci-cd-gh-secrets-vars.html">Preparing Your Deployment Credentials</a></strong> - Set up the necessary
secrets and variables in your GitHub repository</li>
<li><strong><a href="walrus-sites/./ci-cd-gh-workflow.html">Writing your workflow</a></strong> - Create and configure your GitHub Actions
workflow file</li>
</ol>
<h2 id="additional-examples"><a class="header" href="#additional-examples">Additional Examples</a></h2>
<p>You can find more examples of GitHub workflows here:</p>
<ol>
<li><a href="https://github.com/MystenLabs/walrus/blob/main/.github/workflows/publish-docs.yaml">Workflow for Deploying Walrus Documentation</a></li>
<li><a href="https://github.com/sui-potatoes/app/blob/main/.github/workflows/walrus.yml">Sui Potatoes Deployment Workflow</a></li>
<li><a href="https://github.com/zktx-io/walrus-sites-provenance">Community-Driven Walrus Sites Provenance</a></li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="preparing-your-deployment-credentials"><a class="header" href="#preparing-your-deployment-credentials">Preparing Your Deployment Credentials</a></h1>
<p>To allow the GitHub Action to deploy your Walrus Site, it needs to be able to sign transactions on
your behalf. This requires securely providing it with your private key and the corresponding public
address.</p>
<p>This guide will show you how to:</p>
<ol>
<li>Export a private key from your Sui Wallet or CLI.</li>
<li>Correctly format the key and add it as a <code>SUI_KEYSTORE</code> secret in your GitHub repository.</li>
<li>Add the matching public address as a <code>SUI_ADDRESS</code> variable in your GitHub repository.</li>
</ol>
<h2 id="prerequisites-2"><a class="header" href="#prerequisites-2">Prerequisites</a></h2>
<p>Before you start, you must have the <code>sui</code> binary installed. If you haven't installed it yet, please
follow the official <a href="https://docs.sui.io/guides/developer/getting-started/sui-install">Sui installation
guide</a>.</p>
<h2 id="exporting-your-private-key"><a class="header" href="#exporting-your-private-key">Exporting Your Private Key</a></h2>
<blockquote>
<p><strong>Best Practice</strong>: It's recommended to use a dedicated Sui address for each GitHub workflow rather
than reusing addresses across different projects or purposes. This provides better security
isolation and helps avoid <a href="https://docs.sui.io/guides/developer/sui-101/avoid-equivocation">gas-coin
equivocation</a> issues that can
occur when multiple workflows try to use the same gas coins concurrently.</p>
</blockquote>
<hr />
<div class="mdbook-tabs-container">
<nav class="mdbook-tabs">
<button class="mdbook-tab active" data-tabname="From Sui CLI">From Sui CLI</button>
<button class="mdbook-tab" data-tabname="From Slush Wallet">From Slush Wallet</button>
</nav>
<div class="mdbook-tab-content" data-tabname="From Sui CLI">
<p>To export a private key using the command line:</p>
<ol>
<li>
<p>Generate a new key by running the following command in your terminal:</p>
<pre><code class="language-sh">sui keytool generate ed25519 # Or secp256k1 or secp256r1
</code></pre>
</li>
<li>
<p>This command creates a file in your current directory named <code>&lt;SUI_ADDRESS&gt;.key</code> (e.g.,
<code>0x123...abc.key</code>). The filename is your new Sui Address.</p>
</li>
<li>
<p>The content of this file is the private key in the <code>base64WithFlag</code> format. This is the value
you need for the <code>SUI_KEYSTORE</code> secret.</p>
</li>
<li>
<p>You now have both the address (from the filename) for the <code>SUI_ADDRESS</code> variable and the key
(from the file's content) for the <code>SUI_KEYSTORE</code> secret.</p>
</li>
</ol>
<blockquote>
<p><strong>Note on existing keys</strong>
If you wish to use a key you already own, you can find it in the <code>~/.sui/sui_config/sui.keystore</code>
file. This file contains a JSON array of all your keys. To find the address for a specific key,
you would need to use the <code>sui keytool unpack "&lt;the base64 key from sui.keystore&gt;"</code> command.</p>
</blockquote>
</div>
<div class="mdbook-tab-content hidden" data-tabname="From Slush Wallet">
<p>This method is recommended if you manage your keys through the Slush browser extension.</p>
<ol>
<li>
<p>Open your Slush extension and select the account you want to use for deployments. Make sure to
copy the corresponding Sui Address, as you will need it later for the <code>SUI_ADDRESS</code> variable.</p>
</li>
<li>
<p>Navigate to the account management screen and select <strong>Export Private Key</strong>.</p>
</li>
<li>
<p>Copy the provided private key (it will be in bech32 format, starting with <code>suiprivkey</code>).</p>
</li>
<li>
<p>Use the <code>sui keytool convert &lt;suiprivkey...&gt;</code> command to transform your key into the required
Base64 format. Paste your copied key in place of <code>suiprivkey...</code>:</p>
<pre><code class="language-sh">sui keytool convert `suiprivkey...`
</code></pre>
</li>
<li>
<p>The command will produce an output similar to this:</p>
<pre><code class="language-text">╭────────────────┬──────────────────────────────────────────────────────────────────────────╮
│ bech32WithFlag │  suiprivkey............................................................  │
│ base64WithFlag │  A...........................................                            │
│ hexWithoutFlag │  ................................................................        │
│ scheme         │  ed25519                                                                 │
╰────────────────┴──────────────────────────────────────────────────────────────────────────╯
</code></pre>
<p>Copy the <strong><code>base64WithFlag</code></strong> value. This is what you will use for the <code>SUI_KEYSTORE</code> secret.</p>
</li>
</ol>
</div>
</div>
<hr />
<h2 id="funding-your-address"><a class="header" href="#funding-your-address">Funding Your Address</a></h2>
<p>Before the GitHub Action can deploy your site, the address you generated needs to be funded with
both SUI tokens (for network gas fees) and WAL tokens (for storing your site's data). The method for
acquiring these tokens differs between Testnet and Mainnet.</p>
<hr />
<div class="mdbook-tabs-container">
<nav class="mdbook-tabs">
<button class="mdbook-tab active" data-tabname="Testnet Funding">Testnet Funding</button>
<button class="mdbook-tab" data-tabname="Mainnet Funding">Mainnet Funding</button>
</nav>
<div class="mdbook-tab-content" data-tabname="Testnet Funding">
<ol>
<li><strong>Get SUI tokens</strong>: Use the <a href="https://faucet.sui.io/">official Sui faucet</a> to get free Testnet
SUI.</li>
<li><strong>Get WAL tokens</strong>: Exchange your new Testnet SUI for Testnet WAL at a 1:1 rate by running the
<code>walrus get-wal</code> command either using the <code>walrus get-wal</code> CLI command or visiting
<a href="https://stake-wal.wal.app/?network=testnet">stake-wal.wal.app</a> setting network to Testnet and
using the "Get WAL" button.</li>
</ol>
</div>
<div class="mdbook-tab-content hidden" data-tabname="Mainnet Funding">
<p>For a Mainnet deployment, you will need to acquire both SUI and WAL tokens from an exchange and
transfer them to your deployment address. You can also check Slush Wallet for token swaps to WAL,
and on-ramp services (availability may vary by region).</p>
</div>
</div>
<hr />
<h2 id="adding-credentials-to-github"><a class="header" href="#adding-credentials-to-github">Adding credentials to GitHub</a></h2>
<p>Now, let's add the key and address to your GitHub repository.</p>
<ol>
<li>
<p>Navigate to your GitHub repository in a web browser.</p>
</li>
<li>
<p>Click on the <strong>Settings</strong> tab (located in the top navigation bar of your repository).</p>
</li>
<li>
<p>In the left sidebar, click <strong>Secrets and variables</strong>, then select <strong>Actions</strong>.</p>
</li>
<li>
<p>You'll see two tabs: <strong>Secrets</strong> and <strong>Variables</strong>. Start with the <strong>Secrets</strong> tab.</p>
</li>
<li>
<p>Click the <strong>New repository secret</strong> button.</p>
</li>
<li>
<p>Name the secret <code>SUI_KEYSTORE</code>.</p>
</li>
<li>
<p>In the <strong>Value</strong> field, paste the <code>Base64 Key with Flag</code> you copied earlier. It must be
formatted as a JSON array containing a single string:</p>
<pre><code class="language-json">["AXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"]
</code></pre>
</li>
<li>
<p>Click <strong>Add secret</strong> to save it.</p>
<div id="admonition-warning" class="admonition admonish-warning" role="note" aria-labelledby="admonition-warning-title">
<div class="admonition-title">
<div id="admonition-warning-title">
<p>Warning</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/ci-cd-gh-secrets-vars.html#admonition-warning"></a>
</div>
<div>
<p>Make sure to format the keystore as a JSON array with a single string element, not just the raw
key value. Include the square brackets and quotes exactly as shown above.</p>
</div>
</div>
</li>
<li>
<p>Next, switch to the <strong>Variables</strong> tab and click <strong>New repository variable</strong>.</p>
</li>
<li>
<p>Name the variable <code>SUI_ADDRESS</code>.</p>
</li>
<li>
<p>In the <strong>Value</strong> field, paste the Sui address that corresponds to your private key (for example:
<code>0x123abc...def789</code>).</p>
</li>
<li>
<p>Click <strong>Add variable</strong> to save it.</p>
</li>
</ol>
<div id="admonition-security-reminder" class="admonition admonish-danger" role="note" aria-labelledby="admonition-security-reminder-title">
<div class="admonition-title">
<div id="admonition-security-reminder-title">
<p>Security reminder</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/ci-cd-gh-secrets-vars.html#admonition-security-reminder"></a>
</div>
<div>
<p>Never share your private key or commit it to version control. GitHub secrets are encrypted and only
accessible to your workflows, but always verify you're adding secrets correctly.</p>
</div>
</div>
<hr />
<p>For more information about managing secrets and variables in GitHub Actions, check the official
GitHub documentation:</p>
<ul>
<li><a href="https://docs.github.com/en/actions/concepts/security/about-secrets">About secrets</a></li>
<li><a href="https://docs.github.com/en/actions/security-for-github-actions/security-guides/using-secrets-in-github-actions">Using secrets in GitHub Actions</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="writing-your-workflow"><a class="header" href="#writing-your-workflow">Writing your workflow</a></h1>
<p>Now that you have configured your secrets and variables, you can create GitHub workflows to automate
your Walrus Site deployments using the official "Deploy Walrus Site" GitHub Action.</p>
<h2 id="key-requirement-pre-built-site-directory"><a class="header" href="#key-requirement-pre-built-site-directory">Key Requirement: Pre-built Site Directory</a></h2>
<p>The Deploy Walrus Site action operates on an <strong>already built site directory</strong>. The action does not
build your site - it deploys existing static files to Walrus.</p>
<p>This means:</p>
<ul>
<li>If your site consists of ready-to-deploy static files (HTML, CSS, JS), you can use the action
directly</li>
<li>If your site requires a build step (React, Vue, Svelte, etc.), you <strong>must</strong> include build steps in
your workflow before calling the deploy action</li>
</ul>
<h2 id="using-the-deploy-walrus-site-github-action"><a class="header" href="#using-the-deploy-walrus-site-github-action">Using the Deploy Walrus Site GitHub Action</a></h2>
<p>The action (<code>MystenLabs/walrus-sites/.github/actions/deploy</code>) requires these inputs:</p>
<ul>
<li><strong><code>SUI_ADDRESS</code></strong>: Your Sui address (GitHub variable)</li>
<li><strong><code>SUI_KEYSTORE</code></strong>: Your private key in base64 format (GitHub secret)</li>
<li><strong><code>DIST</code></strong>: Path to your <strong>built</strong> site directory</li>
</ul>
<p>Optional inputs include:</p>
<ul>
<li><strong><code>SUI_NETWORK</code></strong>: Target network (<code>mainnet</code> or <code>testnet</code>, defaults to <code>mainnet</code>)</li>
<li><strong><code>EPOCHS</code></strong>: Number of epochs to keep the site stored (defaults to <code>5</code>)</li>
<li><strong><code>WALRUS_CONFIG</code></strong>: Custom Walrus configuration (downloads default if not provided)</li>
<li><strong><code>SITES_CONFIG</code></strong>: Custom sites configuration (downloads default if not provided)</li>
<li><strong><code>WS_RESOURCES</code></strong>: Full path to the <code>ws-resources.json</code> file (defaults to
<code>DIST/ws-resources.json</code>)</li>
<li><strong><code>GITHUB_TOKEN</code></strong>: Enables automatic pull request creation when site resources change</li>
</ul>
<h3 id="about-github_token"><a class="header" href="#about-github_token">About <code>GITHUB_TOKEN</code></a></h3>
<p>The <code>GITHUB_TOKEN</code> input is particularly useful for tracking changes to your site's resources. When
you deploy a site, site-builder creates or updates a <code>ws-resources.json</code> file that tracks the site's
data. If this file changes during deployment, the action can automatically create a pull request
with the updated file.</p>
<p>To use this feature:</p>
<ol>
<li>
<p>Set <code>GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}</code> in your workflow</p>
</li>
<li>
<p>Add these <a href="https://docs.github.com/en/actions/writing-workflows/choosing-what-your-workflow-does/controlling-permissions-for-github_token">permissions</a>
to your workflow:</p>
<pre><code class="language-yaml">permissions:
  contents: write
  pull-requests: write
</code></pre>
</li>
</ol>
<div id="admonition-note" class="admonition admonish-note" role="note" aria-labelledby="admonition-note-title">
<div class="admonition-title">
<div id="admonition-note-title">
<p>Note</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/ci-cd-gh-workflow.html#admonition-note"></a>
</div>
<div>
<p>If you don't provide the <code>GITHUB_TOKEN</code>, the action will still deploy your site successfully but
won't create pull requests for resource file changes.</p>
</div>
</div>
<h3 id="new-site-vs-existing-site"><a class="header" href="#new-site-vs-existing-site">New Site vs Existing Site</a></h3>
<p>Understanding how the workflow behaves depends on whether you have an existing site:</p>
<p><strong>New site (no existing <code>object_id</code>):</strong></p>
<ul>
<li>Creates a new Walrus Site on Sui.</li>
<li>Generates a <code>ws-resources.json</code> file in your <code>DIST</code> directory (or updates the file specified by
<code>WS_RESOURCES</code>).</li>
<li>This file contains the <code>object_id</code> of your newly created site.</li>
<li>If <code>GITHUB_TOKEN</code> is provided with correct permissions, creates a pull request with these changes.</li>
</ul>
<p><strong>Existing site (has <code>object_id</code>):</strong></p>
<ul>
<li>Uses the existing <code>object_id</code> from your Walrus-Sites resources file to update the same site.</li>
<li>Only creates PRs if the resources file changes during deployment.</li>
<li>This applies whether you've previously deployed using GitHub Actions or manually using the CLI -
as long as the <code>object_id</code> is present in your <code>WS_RESOURCES</code> file (defaults to
<code>DIST/ws-resources.json</code>)</li>
</ul>
<div id="admonition-tip" class="admonition admonish-tip" role="note" aria-labelledby="admonition-tip-title">
<div class="admonition-title">
<div id="admonition-tip-title">
<p>Tip</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/ci-cd-gh-workflow.html#admonition-tip"></a>
</div>
<div>
<p>The <code>ws-resources.json</code> file is crucial - it tells the action which site to update. Make sure to
merge the PR from the first run so future deployments update the same site instead of creating new
ones.</p>
</div>
</div>
<div id="admonition-tip-1" class="admonition admonish-tip" role="note" aria-labelledby="admonition-tip-1-title">
<div class="admonition-title">
<div id="admonition-tip-1-title">
<p>Tip</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/ci-cd-gh-workflow.html#admonition-tip-1"></a>
</div>
<div>
<p>Once your site is deployed and you have the <code>object_id</code>, you can link it with a SuiNS name to make
your site accessible at <code>&lt;suins&gt;.wal.app</code>. See <a href="walrus-sites/./tutorial-suins.html">Set a SuiNS name</a> for details
on how to set this up.</p>
</div>
</div>
<h2 id="creating-your-workflow"><a class="header" href="#creating-your-workflow">Creating Your Workflow</a></h2>
<ol>
<li>Create <code>.github/workflows/deploy-site.yml</code> in your repository</li>
<li>Add checkout step to get your repository files</li>
<li>If your site needs building, add build steps:
<ul>
<li>Add build environment setup (Node.js, etc.)</li>
<li>Add build commands</li>
</ul>
</li>
<li>Set your <code>DIST</code> path:
<ul>
<li>For sites requiring build: Point to your build output directory (e.g., <code>dist/</code>, <code>build/</code>)</li>
<li>For static sites: Point directly to your static files directory</li>
</ul>
</li>
<li>Add the Deploy Walrus Site action with your configured secrets and variables</li>
</ol>
<p>The key is ensuring your <code>DIST</code> path points to a directory containing the final, deployable static
files that should be published to Walrus.</p>
<h2 id="example-workflows"><a class="header" href="#example-workflows">Example Workflows</a></h2>
<ul>
<li><a href="https://github.com/MystenLabs/walrus-sites/blob/main/.github/workflows/deploy-snake.yml">deploy-snake.yml</a>
- Simple static site deployment</li>
<li><a href="https://github.com/MystenLabs/walrus-sites/blob/main/.github/workflows/deploy-vite-react-ts.yml">deploy-vite-react-ts.yml</a>
- React application with build step</li>
</ul>
<hr />
<p>For more information about creating and configuring GitHub workflows, check the <a href="https://docs.github.com/en/actions/writing-workflows">official GitHub
Actions documentation</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="technical-overview"><a class="header" href="#technical-overview">Technical Overview</a></h1>
<p>In the following sections, we delve deeper in the technical specification of Walrus Sites.</p>
<h2 id="high-level-picture"><a class="header" href="#high-level-picture">High-level picture</a></h2>
<p>Walrus Sites are enabled by Sui and Walrus. The resources of the Walrus Site (<code>html</code>, <code>css</code>, <code>js</code>,
images, etc.) are stored on Walrus, while the main entry point to it is an object stored on Sui,
which contains the metadata for the site and point to the Walrus blob IDs.</p>
<h3 id="the-walrus-sites-objects-on-sui"><a class="header" href="#the-walrus-sites-objects-on-sui">The Walrus Sites objects on Sui</a></h3>
<p>A Walrus <code>Site</code> is represented on Sui as a very simple object:</p>
<pre><code class="language-move">struct Site has key, store {
    id: UID,
    name: String,
}
</code></pre>
<p>The resources associated with this site are then added to this object as <a href="https://docs.sui.io/concepts/versioning#dynamic-fields">dynamic
fields</a> of type <code>Resource</code>:</p>
<pre><code class="language-move">struct Resource has store, drop {
    path: String,
    // The walrus blob id containing the bytes for this resource
    blob_id: u256,
    ⋮
}
</code></pre>
<p>Importantly, each resource contains:</p>
<ul>
<li>the <code>path</code> of the resource, for example <code>/index.html</code> (all the paths are always represented as
starting from root <code>/</code>);</li>
<li>the <code>blob_id</code>, which is the Walrus blob ID where the resource can be found; and</li>
<li>additional fields, that will be explained later in the documentation.</li>
</ul>
<p>These <code>Resource</code> dynamic fields are keyed with a struct of type <code>ResourcePath</code></p>
<pre><code class="language-move">struct ResourcePath has copy, store, drop {
    path: String,
}
</code></pre>
<p>This struct just holds the string of the path (<code>/index.html</code>); having a separate type ensures that
we will not have namespace collisions with other dynamic fields, possibly added by other packages.</p>
<p>To see this in action, look at <a href="https://suiscan.xyz/testnet/object/0xd20b90149409ba5d005d4a2cd981db9494bc3cdb2f04c47ca1af98dd8f71610a">a Walrus Site in the
explorer</a>,
and check its dynamic fields.</p>
<h3 id="the-site-rendering-path"><a class="header" href="#the-site-rendering-path">The site rendering path</a></h3>
<p>Given the Sui object ID of a Walrus Site, it is easy to look up the resources that compose it
by looking at the dynamic fields, and then fetch these resources from Walrus using the blob ID
contained in the <code>Resource</code> struct.</p>
<p>The only outstanding question is, therefore, how to perform these lookups on the client. A few
approaches are possible:</p>
<ul>
<li>Having a server that accepts requests for a Sui object ID and possibly a path, and performs this
resolution on behalf of the client, serving back the resource as a standard HTML Response.</li>
<li>Using a custom application on the client that has both a web browser and knowledge of how Walrus
Sites work, and can locally perform this resolution.</li>
<li>A hybrid approach based on service workers, where a service worker that is able to perform the
resolution is installed in the browser from a portal.</li>
</ul>
<p>All of these approaches are viable (the first has been used for similar applications in IPFS
gateways, for example), and have trade-offs.</p>
<p>Currently, we provide the server-side and the service-worker based approaches.</p>
<h3 id="browsing-and-domain-isolation"><a class="header" href="#browsing-and-domain-isolation">Browsing and domain isolation</a></h3>
<p>We must ensure that, when browsing multiple sites through a portal, for example the one hosted at
<a href="https://wal.app">https://wal.app</a>, these sites are isolated. Isolation is necessary for security, and to ensure
that the wallet connection in the browser works as expected.</p>
<p>To do so, we give each Walrus Site a specific <em>subdomain</em> of the portal's domain. For example, the
Flatland mint dApp is hosted at <a href="https://flatland.wal.app">https://flatland.wal.app</a>, where the subdomain <code>flatland</code> is
uniquely associated to the object ID of the Walrus Site through SuiNS.</p>
<p>Walrus Sites also work <em>without</em> SuiNS: when a site is accessed through a self-hosted portal, or
through a portal that supports Base36 domain resolution, a site can be browsed by using as
subdomain the Base36 encoding of the Sui object ID of the site.</p>
<div id="admonition-danger" class="admonition admonish-danger" role="note" aria-labelledby="admonition-danger-title">
<div class="admonition-title">
<div id="admonition-danger-title">
<p>Danger</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/overview.html#admonition-danger"></a>
</div>
<div>
<p>The <code>wal.app</code> portal does not support Base36 domain resolution; therefore,
<a href="https://58gr4pinoayuijgdixud23441t55jd94ugep68fsm72b8mwmq2.wal.app">https://58gr4pinoayuijgdixud23441t55jd94ugep68fsm72b8mwmq2.wal.app</a> is not a valid URL. If you
want to access such a site, you should either use another portal or
<a href="walrus-sites/./portal.html#running-a-local-portal">host your own</a>.</p>
</div>
</div>
<p>Base36 was chosen for two reasons, forced by the subdomain standards:</p>
<ol>
<li>A subdomain can have at most 63 characters, while a Hex-encoded Sui object ID requires 64.</li>
<li>A subdomain is case <em>insensitive</em>, ruling out other popular encodings, e.g., Base64 or Base58.</li>
</ol>
<h2 id="walrus-site-portals"><a class="header" href="#walrus-site-portals">Walrus Site portals</a></h2>
<h3 id="portal-types"><a class="header" href="#portal-types">Portal types</a></h3>
<p>As mentioned before, we provide two types of portals to browse Walrus Sites:</p>
<ul>
<li>The server-side portal, which is a server that resolves a Walrus Site, returning it to the
browser. The server-side portal is hosted at <a href="https://wal.app">https://wal.app</a>. This portal only supports sites
that are associated with a SuiNS name.</li>
<li>The service-worker portal, which is a service worker that is installed in the browser and
resolves a Walrus Site. The service-worker portal is no longer hosted at a specific domain, but
the code is still maintained so that it can be used by anyone.</li>
</ul>
<p>We now show in greater detail how a Walrus Site is rendered in a client's browser using a generic
portal. Depending on the different type of portal, some details may differ, but the general picture
remains unchanged.</p>
<h3 id="the-end-to-end-resolution-of-a-walrus-site"><a class="header" href="#the-end-to-end-resolution-of-a-walrus-site">The end-to-end resolution of a Walrus Site</a></h3>
<p>The steps below all reference the following figure:</p>
<p><img src="walrus-sites/../assets/walrus-sites-portal-diagram.svg" alt="Walrus Site resolution" /></p>
<ul>
<li><strong>Site publishing</strong> (step 0): The site developer publishes the Walrus Site using the
<a href="walrus-sites/overview.html#the-site-builder"><code>site-builder</code></a>, or making use of a publisher. Assume the developer uses the
SuiNS name <code>dapp.sui</code> to point to the object ID of the created Walrus Site.</li>
<li><strong>Browsing starts</strong> (step 1): A client browses <code>dapp.wal.app/index.html</code> in their browser.</li>
<li><strong>Site resolution</strong> (steps 2-6): The portal interprets its <em>origin</em> <code>dapp.wal.app</code>, and makes
a SuiNS resolution for <code>dapp.sui</code>, obtaining the related object ID. Using the object ID, it then
fetches the dynamic fields of the object (also checking <a href="walrus-sites/./portal.html">redirects</a>). From the
dynamic fields, it selects the one for <code>/index.html</code>, and extracts its Walrus blob ID and headers
(see the <a href="walrus-sites/./routing.html">advanced section on headers</a>).</li>
<li><strong>Blob fetch</strong> (steps 7-11): Given the blob ID, the portal queries a Walrus aggregator for the
blob data.</li>
<li><strong>Returning the response</strong> (steps 12-13): Now that the portal has the bytes for <code>/index.html</code>, and
its headers, it can craft a response that is then rendered by the
browser.</li>
</ul>
<p>These steps are executed for all resources the browser may query thereafter (for example, if
<code>/index.html</code> points to <code>assets/cat.png</code>).</p>
<h2 id="the-site-builder"><a class="header" href="#the-site-builder">The site builder</a></h2>
<p>To facilitate the creation of Walrus Sites, we provide the "site builder" tool. The site builder
takes care of creating Walrus Sites object on Sui, with the correct structure, and stores the site
resources to Walrus. Refer to the <a href="walrus-sites/./tutorial.html">tutorial</a> for setup and usage instructions.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="the-walrus-sites-portal"><a class="header" href="#the-walrus-sites-portal">The Walrus Sites portal</a></h1>
<p>We use the term "portal" to indicate any technology that is used to access and browse Walrus Sites.
As mentioned in the <a href="walrus-sites/./overview.html#the-site-rendering-path">overview</a>, we foresee three kinds of
portals:</p>
<ol>
<li>server-side portals;</li>
<li>custom local apps; and</li>
<li>service-worker based portals running in the browser.</li>
</ol>
<p>Currently, only a server-side portal is served at <a href="https://wal.app">https://wal.app</a>.</p>
<div id="admonition-warning" class="admonition admonish-warning" role="note" aria-labelledby="admonition-warning-title">
<div class="admonition-title">
<div id="admonition-warning-title">
<p>Warning</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/portal.html#admonition-warning"></a>
</div>
<div>
<p>We are sunsetting the testnet portal! From now on, you can only access the mainnet portal
at <a href="https://wal.app">https://wal.app</a>.</p>
</div>
</div>
<div id="admonition-hosting-of-the-service-worker" class="admonition admonish-note" role="note" aria-labelledby="admonition-hosting-of-the-service-worker-title">
<div class="admonition-title">
<div id="admonition-hosting-of-the-service-worker-title">
<p>Hosting of the service worker</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/portal.html#admonition-hosting-of-the-service-worker"></a>
</div>
<div>
<p>The service-worker portal is no longer hosted, but you can still run it locally. Its code is
available in the <code>walrus-sites</code> repository. For more information, see
<a href="walrus-sites/portal.html#running-a-local-portal">running a local portal</a>.</p>
</div>
</div>
<div id="admonition-walrus-sites-stable-branch" class="admonition admonish-danger" role="note" aria-labelledby="admonition-walrus-sites-stable-branch-title">
<div class="admonition-title">
<div id="admonition-walrus-sites-stable-branch-title">
<p>Walrus Sites stable branch</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/portal.html#admonition-walrus-sites-stable-branch"></a>
</div>
<div>
<p>The stable branch of Walrus Sites is <code>mainnet</code>.</p>
</div>
</div>
<h2 id="running-a-local-portal"><a class="header" href="#running-a-local-portal">Running a local portal</a></h2>
<p>Running a portal locally can be useful, for example if you want to browse Walrus Sites without
accessing external portals, or for development purposes.</p>
<p>Let's start by cloning the <code>walrus-sites</code> repository:</p>
<pre><code class="language-bash">git clone https://github.com/MystenLabs/walrus-sites.git
cd walrus-sites
</code></pre>
<p>Make sure you are on the stable branch:</p>
<pre><code class="language-sh">git checkout mainnet
</code></pre>
<p>Next, we will see how to configure the portal so it can support the functionality that
we need.</p>
<h3 id="configuration-3"><a class="header" href="#configuration-3">Configuration</a></h3>
<p>Portal configuration is managed through two key elements:</p>
<ul>
<li>Environment variables: Required for basic functionality.</li>
<li>Constants file: Optional for advanced customization.</li>
</ul>
<h4 id="environment-variables"><a class="header" href="#environment-variables">Environment Variables</a></h4>
<p>The environment variables are set in the <code>.env.local</code> file at the root of each portal directory.
To just run a simple instance of a portal, you can use the environment variables specified
in the <code>.env.&lt;network&gt;.example</code> file:</p>
<h5 id="mainnet-server-portal-environment-variables"><a class="header" href="#mainnet-server-portal-environment-variables">Mainnet Server Portal Environment Variables</a></h5>
<pre><code class="language-sh">cp ./portal/server/.env.mainnet.example ./portal/server/.env.local
</code></pre>
<h5 id="testnet-server-portal-environment-variables"><a class="header" href="#testnet-server-portal-environment-variables">Testnet Server Portal Environment Variables</a></h5>
<pre><code class="language-sh">cp ./portal/server/.env.testnet.example ./portal/server/.env.local
</code></pre>
<p>Likewise, if you want to run the service-worker portal, you can copy the <code>.env.&lt;network&gt;.example</code>
file to <code>.env.local</code> in the <code>portal/worker</code> directory.</p>
<h5 id="mainnet-service-worker-portal-environment-variables"><a class="header" href="#mainnet-service-worker-portal-environment-variables">Mainnet Service Worker Portal Environment Variables</a></h5>
<pre><code class="language-sh">cp ./portal/worker/.env.mainnet.example ./portal/worker/.env.local
</code></pre>
<h5 id="testnet-service-worker-portal-environment-variables"><a class="header" href="#testnet-service-worker-portal-environment-variables">Testnet Service Worker Portal Environment Variables</a></h5>
<pre><code class="language-sh">cp ./portal/worker/.env.testnet.example ./portal/worker/.env.local
</code></pre>
<p>For a more detailed configuration, you can modify the <code>.env.local</code> files to suit your needs.
As a reference, here are the definitions of the environment variables:</p>
<div id="admonition-note" class="admonition admonish-note" role="note" aria-labelledby="admonition-note-title">
<div class="admonition-title">
<div id="admonition-note-title">
<p>Note</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/portal.html#admonition-note"></a>
</div>
<div>
<p>The server portal code contains additional functionality that can be enabled or disabled
using environment variables. For example, you can enable or disable the blocklist feature
by setting the <code>ENABLE_BLOCKLIST</code> variable to <code>true</code> or <code>false</code>. This can be helpful to
manage the behavior of the portal. For example, if you host a publicly-accessible portal, you might want to avoid
serving sites that are not published by you.</p>
</div>
</div>
<ul>
<li>
<p><code>AGGREGATOR_URL</code>: The url to a Walrus aggregator that will fetch the site resources from Walrus.</p>
</li>
<li>
<p><code>AMPLITUDE_API_KEY</code>: Provide it if you want to enable <a href="https://amplitude.com/">Amplitude</a> for your
server analytics.</p>
</li>
<li>
<p><code>EDGE_CONFIG</code>: If you host your portal on Vercel, you can use the <a href="https://vercel.com/docs/edge-config">Edge Config</a> to
blocklist certain SuiNS subdomains or b36 object ids.</p>
</li>
<li>
<p><code>EDGE_CONFIG_ALLOWLIST</code>: Similar to blocklist, but allows certain subdomains to use the premium
rpc url list.</p>
</li>
<li>
<p><code>ENABLE_ALLOWLIST</code>: Enable the allowlist feature.</p>
</li>
<li>
<p><code>ENABLE_BLOCKLIST</code>: Enable the blocklist feature.</p>
</li>
<li>
<p><code>ENABLE_SENTRY</code>: Enable Sentry error tracking.</p>
</li>
<li>
<p><code>ENABLE_VERCEL_WEB_ANALYTICS</code>: Enable Vercel web analytics.</p>
</li>
<li>
<p><code>LANDING_PAGE_OID_B36</code>: The b36 object id of the landing page Walrus Site. i.e. the page you get
when you visit <code>localhost:3000</code>.</p>
</li>
<li>
<p><code>PORTAL_DOMAIN_NAME_LENGTH</code>: If you connect your portal with a domain name, specify the length of
the domain name. e.g. <code>example.com</code> has a length of 11.</p>
</li>
<li>
<p><code>PREMIUM_RPC_URL_LIST</code>: A list of rpc urls that are used when a site belongs to the allowlist.</p>
</li>
<li>
<p><code>RPC_URL_LIST</code>: A list of rpc urls that are used when a site does not belong to the allowlist.</p>
</li>
<li>
<p><code>SENTRY_AUTH_TOKEN</code>: If you enable Sentry error tracking, provide your Sentry auth token.</p>
</li>
<li>
<p><code>SENTRY_DSN</code>: If you enable Sentry error tracking, provide your Sentry DSN.</p>
</li>
<li>
<p><code>SENTRY_TRACES_SAMPLE_RATE</code>: If you enable Sentry error tracking, provide the sample rate for
traces.</p>
</li>
<li>
<p><code>SITE_PACKAGE</code>: The Walrus Site package id. Depending on the network you are using, you will
have to specify the correct package id.</p>
</li>
<li>
<p><code>SUINS_CLIENT_NETWORK</code>: The network of the SuiNS client.</p>
</li>
<li>
<p><code>B36_DOMAIN_RESOLUTION_SUPPORT</code>: Define if b36 domain resolution is supported. Otherwise the
site will not be served.</p>
</li>
</ul>
<h4 id="constants"><a class="header" href="#constants">Constants</a></h4>
<p>You can find the <code>constants.ts</code> file in the <code>portal/common/lib</code> directory. It holds key
configuration parameters for the portal. Typically, you won't need to modify these, but if you do,
here are the explanations for each parameter:</p>
<ul>
<li>
<p><code>MAX_REDIRECT_DEPTH</code>: The number of <a href="walrus-sites/./redirects.html">redirects</a> the portal will follow
before stopping.</p>
</li>
<li>
<p><code>SITE_NAMES</code>: Hard coded <code>name: objectID</code> mappings, to override the SuiNS names. For development
only. Use this at your own risk, may render some sites with legitimate SuiNS names unusable.</p>
</li>
<li>
<p><code>FALLBACK_PORTAL</code>: This is related only to the service worker portal. The fallback portal should
be a server-side portal that is used in cases where some browsers do not support service workers.</p>
</li>
</ul>
<h3 id="deploying-the-portal"><a class="header" href="#deploying-the-portal">Deploying the Portal</a></h3>
<p>To run the portal locally you can either use a Docker container or a local development environment.</p>
<p>You can run the portal via Docker for a quick setup, or use a local development environment if you
want to modify the code or contribute to the project.</p>
<h4 id="docker-1"><a class="header" href="#docker-1">Docker</a></h4>
<p>First, make sure you have Docker installed on your system.</p>
<pre><code class="language-sh">docker --version
</code></pre>
<p>If it is not installed, follow the instructions on the <a href="https://docs.docker.com/get-docker/">Docker website</a>.</p>
<p>Then, build the Docker image with:</p>
<pre><code class="language-sh">docker build -f portal/docker/server/Dockerfile -t server-portal . --build-arg ENABLE_SENTRY=false --no-cache
</code></pre>
<p>Finally, run the Docker container:</p>
<pre><code class="language-sh">docker run -p 3000:3000 server-portal --env-file ./portal/server/.env.local
</code></pre>
<p>Browse the sites at <code>localhost:3000</code>.</p>
<h4 id="local-development"><a class="header" href="#local-development">Local Development</a></h4>
<p>This requires having the <a href="https://bun.sh/"><code>bun</code></a> tool installed:</p>
<p>Check if bun is installed with:</p>
<pre><code class="language-sh">bun --version
</code></pre>
<p>If not installed, run the following command:</p>
<pre><code class="language-sh">curl -fsSL https://bun.sh/install | bash
</code></pre>
<p>Install the dependencies:</p>
<pre><code class="language-sh">cd portal
bun install
</code></pre>
<p>To run a server-side portal:</p>
<pre><code class="language-sh">bun run server
</code></pre>
<p>To run a service-worker portal:</p>
<pre><code class="language-sh">bun build:worker
bun run worker
</code></pre>
<p>To serve one of the portals. Typically, you will find it served at <code>localhost:3000</code> (for the server
side portal) or <code>localhost:8080</code> for the service worker (but check the output of the serve
command).</p>
<h2 id="next-steps"><a class="header" href="#next-steps">Next Steps</a></h2>
<p>As a next step, you can bring your own domain to the portal. This is useful if you want to use
Walrus Sites to host your site under a custom domain name. Learn how to do this in
the <a href="walrus-sites/./bring-your-own-domain.html">next section</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="bringing-your-own-domain"><a class="header" href="#bringing-your-own-domain">Bringing your own domain</a></h1>
<p>In the previous section, we learned how to <a href="walrus-sites/./portal.html">deploy a Walrus Sites portal</a>. Now,
there might be cases where you want your Walrus Site under a specific domain, without following
the default naming convention of <code>https://&lt;walrus-site-domain&gt;.&lt;portal-domain&gt;</code>.</p>
<p>Fro example, you might want to use a domain like <code>https://example.com</code>, instead of
<code>https://example.wal.app</code>, where <code>example.com</code> is a classic DNS domain that you can purchase
from any domain registrar. It will point to the IP and port of your portal.</p>
<p>Finally, you will need to configure your portal so that it only accepts requests for your own site,
and other subdomains (i.e. other Walrus Sites) will not be served.</p>
<p>The steps you have to follow are:</p>
<ol>
<li>
<p><a href="walrus-sites/./portal.html">Deploy a local portal</a> and include these additional environment variables to
your <code>.env.local</code>:</p>
<pre><code class="language-bash">LANDING_PAGE_OID_B36=34kgqayivjvwuwtk6lckk792g4qhpnimt58eol8i0b2tdgb0y # Example b36 ID
BRING_YOUR_OWN_DOMAIN=true
</code></pre>
<p>The <code>LANDING_PAGE_OID_B36</code>, should be the b36 object ID of your Walrus Site.</p>
<p>Set <code>BRING_YOUR_OWN_DOMAIN</code> to true to ensure the portal only serves your domain and no other
sites. i.e. <code>https://&lt;some-site&gt;.example.com</code> should throw a 404 error.</p>
</li>
<li>
<p>Configure your DNS provider to point your domain to the IP and port of your portal.</p>
</li>
</ol>
<p>And that's it! You now have a Walrus Site under your own domain.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="site-data-authentication"><a class="header" href="#site-data-authentication">Site data authentication</a></h1>
<p>Walrus Sites offer a simple mechanism to authenticate the data that is served from the Walrus
storage on the client side. Thus, Walrus Sites can guarantee (with various degrees of confidence,
depending on the setup) that the site data is authentic and has not been tampered with by a
malicious aggregator.</p>
<h2 id="authentication-mechanism"><a class="header" href="#authentication-mechanism">Authentication mechanism</a></h2>
<p>The Walrus Sites resource object on Sui stores, alongside the resource information, a SHA-256 hash
of the resource's content.</p>
<p>When the client requests a resource, the portal will check that the hash of the data received from
the Walrus storage (and the Walrus aggregator in particular) matches the hash stored on Sui.</p>
<p>If the hashes do not match, the portal will return the following warning page:</p>
<p><img src="walrus-sites/../assets/walrus-sites-hash-mismatch.png" alt="Hash mismatch warning page" /></p>
<h2 id="authentication-guarantees"><a class="header" href="#authentication-guarantees">Authentication Guarantees</a></h2>
<p>Depending on the type of deployment, this technique gives increasing levels of confidence that the
site data is authentic. We list them here in increasing order of assurance.</p>
<h3 id="remote-server-side-portal-deployment"><a class="header" href="#remote-server-side-portal-deployment">Remote server-side portal deployment</a></h3>
<p>In this case, the user must fully trust the portal provider to authenticate the data. With a trusted
portal, the authentication mechanism guarantees that the aggregator or cache (from which the blob
has been fetched) did not tamper with the contents of the blob.</p>
<h3 id="remote-service-worker-portal-deployment"><a class="header" href="#remote-service-worker-portal-deployment">Remote service-worker portal deployment</a></h3>
<p>Here, the portal provider is only trusted to provide the correct service worker code to the user.
The user's browser will then perform the fetching and authentication. The guarantees are therefore
the same as with the remote server-side portal, with the addition that the user can inspect the code
returned by the portal provider and verify its integrity (e.g., by comparing it the hash of the
service worker code to one that is known to be correct).</p>
<h3 id="local-portal-deployment"><a class="header" href="#local-portal-deployment">Local portal deployment</a></h3>
<p>Finally, a user can clone the Walrus Sites repository and deploy a portal locally, browsing Walrus
Sites through <code>localhost</code>. In this case, the user has full control over the portal code and can
verify its operation. Therefore, they can fully authenticate that the data served by Walrus and
Walrus Sites is what the original developer intended.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="known-restrictions"><a class="header" href="#known-restrictions">Known restrictions</a></h1>
<p>Walrus Sites can be used to deploy almost any form of traditional static web2 website build for
modern browsers. There are, however, a number of restrictions that a developer should keep in mind
when creating or porting a website to Walrus Sites.</p>
<h2 id="no-secret-values"><a class="header" href="#no-secret-values">No secret values</a></h2>
<p>Walrus Sites are fully publicly accessible, as the metadata is stored on Sui, and the site content
is stored on Walrus. Therefore, developers <em>must not</em> store secret values within the sites.</p>
<p>We emphasize again that any such backend-specific operations (storing secret values, authentication,
etc.) are achievable by leveraging the integration with the Sui blockchain and a Sui-compatible
wallet.</p>
<h2 id="there-is-a-maximum-redirect-depth"><a class="header" href="#there-is-a-maximum-redirect-depth">There is a maximum redirect depth</a></h2>
<p>The number of consecutive redirects a Walrus Site can perform is capped by the
portal (see <a href="walrus-sites/./portal.html">Portal configuration</a>). This measure ensures that loading a Walrus Site
does not result in an infinite loading loop.</p>
<p>Different portals can set this limit as they desire. The limit for the portal hosted at
<a href="https://wal.app">https://wal.app</a> has a maximum redirect depth of 3.</p>
<h2 id="there-is-a-special-__wal__-path"><a class="header" href="#there-is-a-special-__wal__-path">There is a special <code>__wal__</code> path</a></h2>
<p>Anything under the <code>/__wal__/*</code> path is reserved by the portal for health checks and other
portal-specific operations. If you use this path inside your site, the resources served under that
path will not be loaded correctly.</p>
<h2 id="service-worker-portal-limitations"><a class="header" href="#service-worker-portal-limitations">Service-worker portal limitations</a></h2>
<p>The following limitations only apply to portals based on service workers.</p>
<div id="admonition-tip" class="admonition admonish-tip" role="note" aria-labelledby="admonition-tip-title">
<div class="admonition-title">
<div id="admonition-tip-title">
<p>Tip</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/restrictions.html#admonition-tip"></a>
</div>
<div>
<p>If you need to support any of the features listed below, you should use a server-side portal.</p>
</div>
</div>
<h3 id="service-worker-portals-cant-serve-sites-based-on-service-workers"><a class="header" href="#service-worker-portals-cant-serve-sites-based-on-service-workers">Service-worker portals, can't serve sites based on service workers</a></h3>
<p>Service-worker portals leverage service workers in the clients' browsers to perform essential
operations:</p>
<ol>
<li>reading the site metadata from Sui;</li>
<li>fetching the page content from Walrus; and</li>
<li>serving the content to the browser.</li>
</ol>
<p>Therefore, a site accessed by a service-worker portal cannot use service workers itself. i.e.
you can't "stack" service workers! Installing a service worker from within a Walrus Site will
result in a dysfunctional site and a poor experience for the user.</p>
<h3 id="ios-sui-mobile-wallets-do-not-work-with-the-service-worker-portal"><a class="header" href="#ios-sui-mobile-wallets-do-not-work-with-the-service-worker-portal">iOS Sui mobile wallets do not work with the service-worker portal</a></h3>
<div id="admonition-warning" class="admonition admonish-warning" role="note" aria-labelledby="admonition-warning-title">
<div class="admonition-title">
<div id="admonition-warning-title">
<p>Warning</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/restrictions.html#admonition-warning"></a>
</div>
<div>
<p>This limitation <strong>only applies to portal based on service workers</strong>. If you need to access sites
that support this feature, you should use a server-side portal.</p>
</div>
</div>
<p>Service workers cannot be loaded inside an in-app browser on iOS, because of a limitation of the
WebKit engine. As a consequence, Walrus Sites that are accessed through a service worker portal
cannot be used within Sui-compatible wallet apps on iOS. Therefore, Sui wallets cannot currently
be used on a service-worker portal on iOS. Note, however, that <em>browsing</em> a Walrus Site is still
possible on iOS through any browser.</p>
<p>Given that you decided to use a service-worker portal as your main point of access to your sites,
to provide a seamless experience for iOS users (and other users on browsers that do not support
service workers), it is recommended to redirect to a server-side portal (<a href="https://wal.app">https://wal.app</a>).
Whenever a user on an iOS wallet browses a Walrus Site, the redirect will automatically take them
to the <code>&lt;site_name&gt;.wal.app</code> server-side portal. This way, the user can still use the wallet.</p>
<h3 id="service-worker-portals-do-not-support-progressive-web-apps-pwas"><a class="header" href="#service-worker-portals-do-not-support-progressive-web-apps-pwas">Service worker portals do not support progressive web apps (PWAs)</a></h3>
<div id="admonition-warning-1" class="admonition admonish-warning" role="note" aria-labelledby="admonition-warning-1-title">
<div class="admonition-title">
<div id="admonition-warning-1-title">
<p>Warning</p>
</div>
<a class="admonition-anchor-link" href="walrus-sites/restrictions.html#admonition-warning-1"></a>
</div>
<div>
<p>This limitation <strong>only applies to portal based on service workers</strong>. If you need to access sites
that support this feature, you should use a server-side portal.</p>
</div>
</div>
<p>With the current design, service-worker portals cannot be used to access progressive web apps
(PWAs).</p>
<p>Two characteristics of the service-worker portal prevent support for PWAs:</p>
<ul>
<li>Since the service worker needs to be registered for the page to work, the PWA's manifest file
cannot be loaded by the browser directly.</li>
<li>There can only be one service worker registered per origin. Therefore, registering a PWA's service
worker would remove the Walrus Sites service worker, breaking Walrus Sites' functionality.</li>
</ul>
<p>Note that the server-side portal does not share these limitations. However, for the moment, we
support both technologies: Walrus Sites must be able to load from both a service-worker portal and a
server-side portal, and therefore have to be built with the more restrictive feature set. For more
details, see the <a href="https://en.wikipedia.org/wiki/Progressive_web_app#Installation_criteria">installation requirements for
PWAs</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="objectives-and-use-cases"><a class="header" href="#objectives-and-use-cases">Objectives and use cases</a></h1>
<p>Walrus supports operations to store and read blobs, and to prove and verify their availability.
It ensures content survives storage nodes suffering Byzantine faults and remains available and
retrievable. It provides APIs to access the stored content over a CLI, SDKs and over web2 HTTP
technologies, and supports content delivery infrastructures like caches and content distribution
networks (CDNs).</p>
<p>Under the hood, storage cost is a small fixed multiple of the size of blobs (around 5x). Advanced
erasure coding keeps the cost low, in contrast to the full replication of data traditional to
blockchains, such as the &gt;100x multiple for data stored in Sui objects. As a result, storage of much
bigger resources (up to several GiB) is possible on Walrus at substantially lower cost than on Sui
or other blockchains. Because encoded blobs are stored on all storage nodes, Walrus also provides
superior robustness than designs with a small amount of replicas storing the full blob.</p>
<p>Walrus uses the Sui chain for coordination and payments. Available storage is represented as Sui
objects that can be acquired, owned, split, merged, and transferred. Storage space can be tied to
a stored blob for a period of time, with the resulting Sui object used to prove
availability on chain in smart contracts, or off chain using light clients.</p>
<p>The <a href="design/./overview.html">next chapter</a> discusses the above operations relating to storage,
retrieval, and availability in detail.</p>
<p>In the future, we plan to include in Walrus some minimal governance to allow storage nodes to
change between storage epochs. Walrus is also compatible with periodic payments for continued
storage. We also plan to implement storage attestation based on challenges to get confidence
that blobs are stored or at least available. Walrus also allows light nodes that store small parts
of blobs to get rewards for proving availability and assisting recovery. We will cover these
topics in later documents. We also provide details of the encoding scheme in a separate document.</p>
<h2 id="non-objectives"><a class="header" href="#non-objectives">Non-objectives</a></h2>
<p>There are a few things that Walrus explicitly is not:</p>
<ul>
<li>
<p>Walrus does not reimplement a CDN that might be geo-replicated or have less than tens of
milliseconds of latency. Instead, it ensures that traditional CDNs are usable and compatible with
Walrus caches.</p>
</li>
<li>
<p>Walrus does not re-implement a full smart contracts platform with consensus or execution. It
relies on Sui smart contracts when necessary, to manage Walrus resources and processes including
payments, storage epochs, and so on.</p>
</li>
<li>
<p>Walrus supports storage of any blob, including encrypted blobs. However, Walrus itself is not the
distributed key management infrastructure that manages and distributed encryption or decryption
keys to support a full private storage eco-system. It can, however, provide the storage layer for
such infrastructures.</p>
</li>
</ul>
<h2 id="use-cases"><a class="header" href="#use-cases">Use cases</a></h2>
<p>App builders may use Walrus in conjunction with any L1 or L2 blockchains to build experiences that
require large amounts of data to be stored in a decentralized manner and possibly certified as
available:</p>
<ul>
<li>
<p><strong>Storage of media for NFT or dApps:</strong> Walrus can directly store and serve media such as images,
sounds, sprites, videos, other game assets, and so on. This is publicly available media that is
accessed using HTTP requests at caches to create multimedia dApps.</p>
</li>
<li>
<p><strong>AI related use cases:</strong> Walrus can store clean data sets of training data, datasets with a
known and verified provenance, models, weights and proofs of correct training for AI models.
It can also store and ensure the availability of an AI model output.</p>
</li>
<li>
<p><strong>Storage of long term archival of blockchain history:</strong> Walrus can act as a lower-cost
decentralized store to store blockchain history. For Sui, this can include sequences of
checkpoints with all associated transaction and effects content, as well as historic snapshots
of the blockchain state, code, or binaries.</p>
</li>
<li>
<p><strong>Support availability for L2s:</strong> Walrus allows parties to certify the availability of blobs, as
required by L2s that need data to be stored and be attested as available to all. This may also
include availability of extra audit data such as validity proofs, zero knowledge proofs of
correct execution or large fraud proofs.</p>
</li>
<li>
<p><strong>Support a fully decentralized web experience:</strong> Walrus can host fully decentralized web
experiences, including all resources (such as js, css, html, media). These can not only
provide content, but also host the UX of dApps to enable applications with fully decentralized
front end and back ends on chain. Walrus puts the full "web" into web3.</p>
</li>
<li>
<p><strong>Support subscription models for media:</strong> Creators can store encrypted media on Walrus and only
provide access via decryption keys to parties that have paid a subscription fee or have paid for
content. Walrus provides the storage, encryption and decryption needs to happen off
the system.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="system-overview"><a class="header" href="#system-overview">System overview</a></h1>
<p>This chapter provides an overview of the <a href="design/./architecture.html">architecture</a> and <a href="design/./encoding.html">encoding
mechanisms</a> of the Walrus system.</p>
<p>Use the <a href="design/../glossary.html">glossary</a> as a reference for many of the bolded terms used in this
documentation.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="basic-architecture-and-security-assumptions"><a class="header" href="#basic-architecture-and-security-assumptions">Basic architecture and security assumptions</a></h1>
<p>The key actors in the Walrus architecture are the following:</p>
<ul>
<li>
<p><strong>Users</strong> through <strong>clients</strong> want to store and read <strong>blobs</strong> identified by their <strong>blob ID</strong>.</p>
<p>These actors are ready to pay for service
when it comes to writes and non-best-effort reads. Users also want to prove
the <strong>availability</strong> of a blob to third parties without the cost of sending or receiving the full
blob.</p>
<p>Users might be malicious in various ways: they might not want to pay for services, prove the
availability of unavailable blobs, modify/delete blobs without authorization, try to
exhaust resources of storage nodes, and so on.</p>
</li>
<li>
<p><strong>Storage nodes</strong> hold one or many <strong>shards</strong> within a <strong>storage epoch</strong>.</p>
<p>Each blob is erasure-encoded into many <strong>slivers</strong>. Slivers from each stored blob become part
of all shards. A shard at any storage epoch is associated with a storage node that actually stores
all slivers of the shard and is ready to serve them.</p>
<p>A Sui smart contract controls the assignment of shards to storage nodes within
<strong>storage epochs</strong> (2 weeks on Mainnet), and Walrus assumes that more than 2/3 of the
shards are managed by correct storage nodes within each storage epoch. This means that Walrus must
tolerate up to 1/3 of the shards managed by Byzantine storage nodes (approximately 1/3 of the
storage nodes being Byzantine) within each storage epoch and across storage epochs.</p>
</li>
<li>
<p>All clients and storage nodes operate a blockchain client (specifically on Sui), and mediate
payments, resources (space), mapping of shards to storage nodes, and metadata through blockchain
smart contracts. Users interact with the blockchain to acquire storage resources and upload
certificates for stored blobs. Storage nodes listen to the blockchain events to coordinate
their operations.</p>
</li>
</ul>
<p>Walrus supports any additional number of optional infrastructure actors that can operate in a
permissionless way:</p>
<ul>
<li>
<p><strong>Aggregators</strong> are clients that reconstruct blobs from slivers and make them available to users
over traditional web2 technologies (such as HTTP). They are optional in that end users may
reconstruct blobs directly or run a local aggregator to perform Walrus reads over web2
technologies locally.</p>
</li>
<li>
<p><strong>Caches</strong> are aggregators with additional caching functionality to decrease latency and reduce
load on storage nodes. Such cache infrastructures may also act as CDNs, split the cost of blob
reconstruction over many requests, be better connected, and so on. A client can always verify that
reads from such infrastructures are correct.</p>
</li>
<li>
<p><strong>Publishers</strong> are clients that help end users store a blob using web2 technologies,
using less bandwidth and custom logic.</p>
<p>In effect, they receive the blob to be published over traditional web2 protocols (like HTTP) and
run the Walrus store protocol on the end user's behalf. This includes encoding the blob into
slivers, distributing the slivers to storage nodes, collecting storage-node signatures and
aggregating them into a certificate, as well as all other on-chain actions.</p>
<p>They are optional in that a user can directly interact with Sui and
the storage nodes to store blobs. An end user can always verify that a publisher
performed their duties correctly by checking that an event associated with the
<strong><a href="design/./properties.html">point of availability</a></strong> for the blob exists on chain
and then either performing a read to see if Walrus returns the blob or encoding the blob
and comparing the result to the blob ID in the certificate.</p>
</li>
</ul>
<p>Aggregators, publishers, and end users are not considered trusted components of the system, and they
might deviate from the protocol arbitrarily. However, some of the security properties of Walrus only
hold for honest end users that use honest intermediaries (caches and publishers). Walrus provides a
means for end users to audit the correct operation of both caches and publishers.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="encoding-overheads-and-verification"><a class="header" href="#encoding-overheads-and-verification">Encoding, overheads, and verification</a></h1>
<p>The following list summarizes the basic encoding and cryptographic techniques used in Walrus:</p>
<ul>
<li>
<p>An <a href="https://en.wikipedia.org/wiki/Erasure_code">erasure code</a> encode algorithm takes a blob,
splits it into a number <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> of symbols, and encodes it into <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> symbols in such a way that a
subset of these <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> symbols can be used to reconstruct the blob.</p>
</li>
<li>
<p>Walrus uses a highly efficient erasure code and selects <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> such that a third of symbols can be
used to reconstruct the blob by the decode algorithm.</p>
</li>
<li>
<p>The encoding is <em>systematic</em>, meaning that some storage nodes hold part of the original blob,
allowing for fast random-access reads.</p>
</li>
<li>
<p>All encoding and decoding operations are deterministic, and encoders have no discretion about it.</p>
</li>
<li>
<p>For each blob, multiple symbols are combined into a <strong>sliver</strong>, which is then assigned to a shard.</p>
</li>
<li>
<p>Storage nodes manage one or more shards, and corresponding slivers of each blob are distributed
to all the storage shards.</p>
</li>
</ul>
<p>The detailed encoding setup results in an expansion of the blob size by a factor of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">4.5</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∼</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">5</span></span></span></span>.
This is independent of the number of shards and the number of storage nodes.</p>
<hr />
<p>Each blob is also associated with some metadata including a <strong>blob ID</strong> to allow verification:</p>
<ul>
<li>
<p>The blob ID is computed as an authenticator of the set of all shard data and metadata (byte size,
encoding, blob hash).</p>
<p>Walrus hashes a sliver representation in each of the shards and adds the resulting hashes into a
Merkle tree. Then the root of the Merkle tree is the blob hash used to derive the blob ID that
identifies the blob in the system.</p>
</li>
<li>
<p>Each storage node can use the blob ID to check if some shard data belongs to a blob using the
authenticated structure corresponding to the blob hash (Merkle tree). A successful check means
that the data is indeed as intended by the writer of the blob.</p>
</li>
<li>
<p>As the writer of a blob might have incorrectly encoded a blob (by mistake or on purpose), any
party that reconstructs a blob ID from shard slivers must check that it encodes to the correct
blob ID. The same is necessary when accepting any blob claiming to be a specific blob ID.</p>
<p>This process involves re-encoding the blob using the erasure code, and deriving the blob ID again
to check that the blob matches. This prevents a malformed blob (incorrectly erasure coded) from
ever being read as a valid blob at any correct recipient.</p>
</li>
<li>
<p>A set of slivers equal to the reconstruction threshold belonging to a blob ID that are either
inconsistent or lead to the reconstruction of a different ID represent an incorrect encoding. This
happens only if the user that encoded the blob was faulty or malicious and encoded it incorrectly.</p>
<p>Walrus can extract one symbol per sliver to form an inconsistency proof. Storage nodes can delete
slivers belonging to inconsistently encoded blobs, and upon request return either the
inconsistency proof or an inconsistency certificate posted on chain.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="operations-1"><a class="header" href="#operations-1">Operations</a></h1>
<p>Walrus operations can be separated in <a href="design/./operations-sui.html">interactions with the Sui chain</a>, which
is used by Walrus for coordination and governance, and <a href="design/./operations-off-chain.html">off-chain
interactions</a> between clients and storage nodes.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="operations-on-sui"><a class="header" href="#operations-on-sui">Operations on Sui</a></h1>
<p>Walrus uses Sui smart contracts to coordinate storage operations as resources that have a lifetime,
and payments. Smart contracts also facilitate governance to determine the storage nodes holding each
storage shard. The following content outlines these operations and refers to them as part of the
read/write paths.</p>
<p>Metadata is the only blob element ever exposed to Sui or its validators, as the content
of blobs is always stored off chain on Walrus storage nodes and caches. The storage nodes or caches
do not have to overlap with any Sui infrastructure components (such as validators), and the storage
epochs can be of different lengths and not have the same start/end times as Sui epochs.</p>
<h2 id="storage-resource-life-cycle-on-sui"><a class="header" href="#storage-resource-life-cycle-on-sui">Storage resource life cycle on Sui</a></h2>
<p>A number of Sui smart contracts hold the metadata of the Walrus system and all its entities.</p>
<ul>
<li>
<p>A <strong>Walrus system object</strong> holds the committee of storage nodes for the current storage epoch. The
system object also holds the total available space on Walrus and the price per unit of storage (1
KiB).</p>
<p>These values are determined by 2/3 agreement between the storage nodes for the storage
epoch. Users can pay to purchase storage space for some time duration. These space resources can
be split, merged, and transferred. Later, they can be used to place a blob ID into Walrus.</p>
</li>
<li>
<p>The <strong>storage fund</strong> holds funds for storing blobs over one or multiple storage epochs. When
purchasing storage space from the system object, users pay into the storage fund separated over
multiple storage epochs. Payments are made each epoch to storage nodes according to performance
(details follow).</p>
</li>
<li>
<p>A user acquires some storage through the contracts or transfer and can assign to it a blob ID,
signifying they want to store this blob ID into it. This emits a Move <strong>resource event</strong> that
storage nodes listen for to expect and authorize off-chain storage operations.</p>
</li>
<li>
<p>Eventually a user holds an off-chain <strong>availability certificate</strong> from storage nodes for a blob
ID. The user <strong>uploads the certificate on chain</strong> to signal that the blob ID is available for an
availability period. The certificate is checked against the latest Walrus committee,
and an <strong>availability event</strong> is emitted for the blob ID if correct. This is the point of
availability for the blob.</p>
</li>
<li>
<p>At a later time, a certified blob's storage can be <strong>extended</strong> by adding a storage object to it
with a longer expiry period. This facility can be used by smart contracts to extend the
availability of blobs stored in perpetuity as long as funds exist to continue providing storage.</p>
</li>
<li>
<p>In case a blob ID is not correctly encoded, an <strong>inconsistency proof certificate</strong> can be uploaded
on chain at a later time. This action emits an <strong>inconsistent blob event</strong>, signaling that the
blob ID read results always return <code>None</code>. This indicates that its slivers can be deleted by
storage nodes, except for an indicator to return <code>None</code>.</p>
</li>
</ul>
<p>Users writing to Walrus, need to perform Sui transactions to acquire storage and certify blobs.
Users creating or consuming proofs for attestations of blob availability read the chain
only to prove or verify emission of events. Nodes read
the blockchain to get committee metadata only once per epoch, and then request slivers directly
from storage nodes by blob ID to perform reads on Walrus resources.</p>
<h2 id="governance-operations-on-sui"><a class="header" href="#governance-operations-on-sui">Governance operations on Sui</a></h2>
<p>Each Walrus storage epoch is represented by the Walrus system object that contains a storage
committee and various metadata or storage nodes, like the mapping between shards and storage nodes,
available space, and current costs.</p>
<p>Users can go to the system object for the period and <strong>buy some storage</strong> amount for one or more
storage epochs. At each storage epoch there is a price for storage, and the payment provided becomes
part of a <strong>storage fund</strong> for all the storage epochs that span the storage bought. There is a
maximum number of storage epochs in the future for which storage can be bought (approximately 2
years). Storage is a resource that can be split, merged, and transferred.</p>
<p>At the end of the storage epoch, part of the funds in the <strong>storage fund need to be allocated to
storage nodes</strong>. The idea here is for storage nodes to perform light audits of each other,
and suggest which nodes are to be paid based on the performance of these audits.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="off-chain-operations"><a class="header" href="#off-chain-operations">Off-chain operations</a></h1>
<p>While Walrus operations happen off Sui, they might interact with the blockchain flows defining the
resource life cycle.</p>
<h2 id="write-paths"><a class="header" href="#write-paths">Write paths</a></h2>
<p><img src="design/../assets/WriteFlow.png" alt="Write paths of Walrus" /></p>
<p>Systems overview of writes, illustrated in the previous image:</p>
<ul>
<li>
<p>A user acquires a storage resource of appropriate size and duration on chain, either by directly
buying it on the Walrus system object or a secondary market. A user can split, merge, and
transfer owned storage resources.</p>
</li>
<li>
<p>When users want to store a blob, they first erasure code it and compute the
blob ID. Then they can perform the following steps themselves, or use a publisher to perform steps
on their behalf.</p>
</li>
<li>
<p>The user goes on chain (Sui) and updates a storage resource to register the blob ID with the
desired size and lifetime. This emits an event, received by storage nodes. After the
user receives they then continue the upload.</p>
</li>
<li>
<p>The user sends the blob metadata to all storage nodes and each of the blob slivers to the storage
node that currently manages the corresponding shard.</p>
</li>
<li>
<p>A storage node managing a shard receives a sliver and checks it against the blob ID.
It also checks that there is a blob resource with the blob ID that is authorized to store
a blob. If correct, the storage node then signs a statement that it holds the sliver for blob ID
(and metadata) and returns it to the user.</p>
</li>
<li>
<p>The user puts together the signatures returned from storage nodes into an availability certificate
and submits it to the chain. When the certificate is verified on chain, an availability event for
the blob ID is emitted, and all other storage nodes seek to download any missing shards for the
blob ID. This event emitted by Sui is the <a href="design/./properties.html">point of availability (PoA)</a> for the
blob ID.</p>
</li>
<li>
<p>After the PoA, and without user involvement, storage nodes sync and recover any missing metadata
and slivers.</p>
</li>
</ul>
<p>The user waits for 2/3 of shard signatures to return to create the certificate of
availability. The rate of the code is below 1/3, allowing for reconstruction even if only 1/3 of
shards return the sliver for a read. Because at most 1/3 of the storage nodes can fail, this ensures
reconstruction if a reader requests slivers from all storage nodes. The full process can
be mediated by a publisher that receives a blob and drives the process to completion.</p>
<h2 id="refresh-availability"><a class="header" href="#refresh-availability">Refresh availability</a></h2>
<p>Because no content data is required to refresh the duration of storage, refresh is conducted fully
on chain within the protocol. To request an extension to the availability of a blob, a user provides
an appropriate storage resource. Upon success this emits an event that storage nodes receive to
extend the time for which each sliver is stored.</p>
<h2 id="inconsistent-resource-flow"><a class="header" href="#inconsistent-resource-flow">Inconsistent resource flow</a></h2>
<p>When a correct storage node tries to reconstruct a sliver for a blob past <a href="design/./properties.html">PoA</a>,
this may fail if the encoding of the blob was incorrect. In this case, the storage node can instead
extract an inconsistency proof for the blob ID. It then uses the proof to create an inconsistency
certificate and upload it on chain.</p>
<p>The flow is as follows:</p>
<ul>
<li>
<p>A storage node fails to reconstruct a sliver, and instead computes an inconsistency proof.</p>
</li>
<li>
<p>The storage node sends the blob ID and inconsistency proof to all storage nodes of the Walrus
epoch. The storage nodes verify the proof and sign it.</p>
</li>
<li>
<p>The storage node who found the inconsistency aggregates the signatures into an inconsistency
certificate and sends it to the Walrus smart contract, which verifies it and emits an inconsistent
resource event.</p>
</li>
<li>
<p>Upon receiving an inconsistent resource event, correct storage nodes delete sliver data for the
blob ID and record in the metadata to return <code>None</code> for the blob ID for the
<a href="design/./properties.html">availability period</a>. No storage attestation challenges are issued for this
blob ID.</p>
</li>
</ul>
<div id="admonition-reading-inconsistent-blobs" class="admonition admonish-tip" role="note" aria-labelledby="admonition-reading-inconsistent-blobs-title">
<div class="admonition-title">
<div id="admonition-reading-inconsistent-blobs-title">
<p>Reading inconsistent blobs</p>
</div>
<a class="admonition-anchor-link" href="design/operations-off-chain.html#admonition-reading-inconsistent-blobs"></a>
</div>
<div>
<p>A blob ID that is inconsistent always resolves to <code>None</code> upon reading because
the read process re-encodes the received blob to check that the blob ID is correctly derived from a
consistent encoding. This means that an inconsistency proof reveals only a true fact to storage
nodes (that do not otherwise run decoding), and does not change the output of read in any case.</p>
<p>However, partial reads leveraging the systematic nature of the encoding might successfully return
partial reads for inconsistently encoded files. Thus, if consistency and availability of reads is
important, dApps should do full reads rather than partial reads.</p>
</div>
</div>
<h2 id="read-paths"><a class="header" href="#read-paths">Read paths</a></h2>
<p>A user can read stored blobs either directly or through an aggregator/cache. The operations are the
same for direct user access, for aggregators, and caches in case of cache misses. In practice, most
reads happen through caches for blobs that are hot and do not result in requests to storage nodes.</p>
<ul>
<li>
<p>The reader gets the metadata for the blob ID from any storage node, and authenticates it using
the blob ID.</p>
</li>
<li>
<p>The reader then sends a request to the storage nodes for the shards corresponding to the blob ID
and waits for <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> to respond. Sufficient requests are sent in parallel to ensure low latency
for reads.</p>
</li>
<li>
<p>The reader authenticates the slivers returned with the blob ID, reconstructs the blob, and decides
whether the contents are a valid blob or inconsistent.</p>
</li>
<li>
<p>Optionally, for a cache, the result is cached and can be served without reconstruction until it is
evicted from the cache. Requests for the blob to the cache return the blob contents, or a proof
that the blob is inconsistently encoded.</p>
</li>
</ul>
<h2 id="challenge-mechanism-for-storage-attestation"><a class="header" href="#challenge-mechanism-for-storage-attestation">Challenge mechanism for storage attestation</a></h2>
<p>During an epoch, a correct storage node challenges all shards to provide symbols for blob slivers
past PoA:</p>
<ul>
<li>
<p>The list of available blobs for the epoch is determined by the sequence of Sui events up
to the past epoch. Inconsistent blobs are not challenged, and a record proving this status
can be returned instead.</p>
</li>
<li>
<p>A challenge sequence is determined by providing a seed to the challenged shard. The sequence is
then computed based both on the seed <strong>and</strong> the content of each challenged blob ID. This creates
a sequential read dependency.</p>
</li>
<li>
<p>The response to the challenge provides the sequence of shard contents for the blob IDs in a
timely manner.</p>
</li>
<li>
<p>The challenger node uses thresholds to determine whether the challenge was passed, and reports
the result on chain.</p>
</li>
<li>
<p>The challenge/response communication is authenticated.</p>
</li>
</ul>
<p>Challenges provide some reassurance that the storage node can actually recover shard data in a
probabilistic manner, avoiding storage nodes getting payment without any evidence they might
retrieve shard data. The sequential nature of the challenge and some reasonable timeout also ensures
that the process is timely.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="walrus-assurance-and-security-properties"><a class="header" href="#walrus-assurance-and-security-properties">Walrus assurance and security properties</a></h1>
<p>The properties below hold true subject to the assumption that for all storage epochs 2/3 of shards
are operated by storage nodes that faithfully and correctly follow the Walrus protocol.</p>
<p>As described <a href="design/./encoding.html">before</a>, each blob is encoded into slivers using an erasure code and a
blob ID is cryptographically derived. For a given blob ID there is a <strong>point of availability (PoA)</strong>
and an <strong>availability period</strong>, observable through an event on the Sui chain.</p>
<p>The following properties relate to the PoA:</p>
<ul>
<li>After the PoA, for a blob ID, any correct user that performs a read within the availability period
will eventually terminate and get a value <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span> which is either the blob contents <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span> or <code>None</code>.</li>
<li>After the PoA, if two correct users perform a read and get <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span> and <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7519em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span>, respectively, then
<span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7519em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span>.</li>
<li>A correct user with an appropriate storage resource can always perform store for a blob <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span> with
a blob ID and advance the protocol until the PoA.</li>
<li>A read after the PoA for a blob <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span> stored by a correct user, will result in <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span>.</li>
</ul>
<p>Some assurance properties ensure the correct internal processes of Walrus storage nodes.
For the purposes of defining these, an <strong>inconsistency proof</strong> proves that a blob ID was
stored by a user that incorrectly encoded a blob.</p>
<ul>
<li>After the PoA and for a blob ID stored by a correct user, a storage node is always able to recover
the correct slivers for its shards for this blob ID.</li>
<li>After the PoA, if a correct storage node cannot recover a sliver, it can produce an inconsistency
proof for the blob ID.</li>
<li>If a blob ID is stored by a correct user, an inconsistently proof cannot be derived for it.</li>
<li>A read by a correct user for a blob ID for which an inconsistency proof may exist returns <code>None</code>.</li>
</ul>
<p>Note that there is no delete operation and a blob ID past the PoA will be available for the full
availability period.</p>
<div id="admonition-rule-of-thumb" class="admonition admonish-tip" role="note" aria-labelledby="admonition-rule-of-thumb-title">
<div class="admonition-title">
<div id="admonition-rule-of-thumb-title">
<p>Rule of thumb</p>
</div>
<a class="admonition-anchor-link" href="design/properties.html#admonition-rule-of-thumb"></a>
</div>
<div>
<p>Before the PoA it is the responsibility of a client to ensure the availability of a blob and its
upload to Walrus. After the PoA it is the responsibility of Walrus as a system to maintain the
availability of the blob as part of its operation for the full availability period remaining.
Emission of the event corresponding to the PoA for a blob ID attests its availability.</p>
</div>
</div>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="future-discussion"><a class="header" href="#future-discussion">Future discussion</a></h1>
<p>In this document, we left out details of the following features:</p>
<ul>
<li><strong>Shard transfer and recovery upon storage epoch change:</strong> The encoding scheme used in Walrus has
been designed to allow for highly efficient recovery in case of shard failures. A storage node
attempting to recover slivers only needs to get data of the same magnitude as the missing data to
reconstruct them.</li>
<li><strong>Details of light clients that can be used to sample availability:</strong> Individual clients may
sample the certified blobs from Sui metadata and sample the availability of some slivers that
they store. On-chain bounties may be used to retrieve these slivers for missing blobs.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="walrus-glossary"><a class="header" href="#walrus-glossary">Walrus Glossary</a></h1>
<p>To make communication as clear and efficient as possible, we make sure to use a single term for
every Walrus entity/concept and <em>do not</em> use any synonyms. The following table lists various
concepts, their canonical name, and how they relate to or differ from other terms.</p>
<p>Italicized terms in the description indicate other specific Walrus terms contained in the table.</p>
<div class="table-wrapper"><table><thead><tr><th>Approved name</th><th>Description</th></tr></thead><tbody>
<tr><td>2D encoding</td><td>encoding scheme used in <em>RedStuff</em> where each <em>blob</em> is encoded in two dimensions—<em>primary</em> and <em>secondary</em>—to ensure robust recovery and redundancy</td></tr>
<tr><td>aggregator</td><td>service that reconstructs <em>blobs</em> by interacting with <em>storage nodes</em> and exposes a simple <code>HTTP GET</code> endpoint to <em>users</em></td></tr>
<tr><td>availability period</td><td>the period specified in (Walrus) <em>epochs</em> for which a <em>blob</em> is certified to be available on Walrus</td></tr>
<tr><td>blob</td><td>single unstructured data object stored on Walrus</td></tr>
<tr><td>blob ID</td><td>cryptographic ID computed from a <em>blob</em>’s <em>slivers</em></td></tr>
<tr><td>blob metadata</td><td>metadata of one <em>blob</em>; in particular, this contains a hash per <em>shard</em> to enable the authentication of <em>slivers</em> and recovery symbols</td></tr>
<tr><td>cache</td><td>an <em>aggregator</em> with additional caching capabilities</td></tr>
<tr><td>certificate of availability (CoA)</td><td>a <em>blob ID</em> with signatures of <em>storage nodes</em> holding at least <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> <em>shards</em> in a specific <em>epoch</em></td></tr>
<tr><td>client</td><td>entity interacting directly with the <em>storage nodes</em>; this can be an <em>aggregator</em>/<em>cache</em>, a <em>publisher</em>, or an <em>user</em></td></tr>
<tr><td>committee</td><td>the set of <em>storage nodes</em> for a particular <em>epoch</em>, including metadata about the <em>shards</em> they are responsible for and other metadata</td></tr>
<tr><td>deletable blob</td><td>blob which can be deleted by its owner at any time to be able to reuse the storage resource</td></tr>
<tr><td>end epoch</td><td>the <em>epoch</em> at which a blob will no longer be available for reads; the end epoch is always <strong>exclusive</strong></td></tr>
<tr><td>epoch</td><td>Walrus uses epochs to track committee changes (like Sui) and measure lifetimes of blobs; the epoch duration for Walrus differs from Sui; on Mainnet the epoch duration is two weeks</td></tr>
<tr><td>expiry</td><td>a blob becomes unavailable and can be deleted by storage nodes at its <em>end epoch</em></td></tr>
<tr><td>FROST</td><td>the smallest unit of WAL (similar to MIST for SUI); 1 WAL is equal to 1 billion (1000000000) FROST</td></tr>
<tr><td>inconsistency certificate</td><td>an aggregated signature from 2/3 of <em>storage nodes</em> (weighted by their number of <em>shards</em>) that they have seen and stored an <em>inconsistency proof</em> for a <em>blob ID</em></td></tr>
<tr><td>inconsistency proof</td><td>set of several recovery symbols with their Merkle proofs such that the decoded <em>sliver</em> does not match the corresponding hash; this proves an incorrect/inconsistent encoding by the client</td></tr>
<tr><td>member</td><td>an <em>storage node</em> that is part of a <em>committee</em> at some <em>epoch</em></td></tr>
<tr><td>permanent blob</td><td>blob which cannot be deleted by its owner and is guaranteed to be available until at least its expiry epoch (assuming it is valid)</td></tr>
<tr><td>point of availability (PoA)</td><td>point in time when a <em>CoA</em> is submitted to Sui and the corresponding <em>blob</em> is guaranteed to be available until its expiration</td></tr>
<tr><td>publisher</td><td>service interacting with Sui and the <em>storage nodes</em> to store <em>blobs</em> on Walrus; offers a simple <code>HTTP POST</code> endpoint to <em>users</em></td></tr>
<tr><td>quilt</td><td>structured data object consisting of one or multiple unstructured <em>blobs</em></td></tr>
<tr><td>quilt ID</td><td><em>blob ID</em> of a <em>quilt</em></td></tr>
<tr><td>quilt patch</td><td>a single <em>blob</em> stored in a <em>quilt</em>, including the unstructured data and metadata</td></tr>
<tr><td>quilt patch ID</td><td>a unique ID to identify a <em>quilt patch</em> in Walrus; the <em>quilt patch ID</em> is computed from the entire <em>quilt</em>, not a single <em>quilt patch</em></td></tr>
<tr><td>reconstruction (of a blob)</td><td>decoding of the primary <em>slivers</em> to obtain the blob; includes re-encoding the <em>blob</em> and checking the Merkle proofs</td></tr>
<tr><td>recovery</td><td>process of an <em>storage node</em> recovering one or multiple <em>blobs</em>, <em>slivers</em>, or full <em>shards</em> by obtaining recovery symbols from other <em>storage nodes</em></td></tr>
<tr><td>RedStuff</td><td>our erasure-encoding approach, which uses two different encodings (<em>primary</em> and <em>secondary</em>) to enable shard recovery; details are available in the <a href="./walrus.pdf">whitepaper</a></td></tr>
<tr><td>shard</td><td>(disjoint) subset of erasure-encoded data of all <em>blobs</em>; at every point in time, a <em>shard</em> is assigned to and stored on a single <em>storage node</em></td></tr>
<tr><td>sliver</td><td>erasure-encoded data of one <em>shard</em> corresponding to a single blob for one of the two encodings; this contains several erasure-encoded symbols of that blob but not the <em>blob metadata</em></td></tr>
<tr><td>sliver pair</td><td>the combination of a shard’s primary and secondary sliver</td></tr>
<tr><td>staker</td><td>entity that locks (stakes) <em>WAL</em> tokens to support the network's integrity and participate in the selection or validation of <em>storage nodes</em> and <em>committees</em>.</td></tr>
<tr><td>storage challenge</td><td>cryptographic proof mechanism where <em>storage nodes</em> periodically verify each other’s storage of assigned <em>shards</em> by issuing random challenges during <em>storage attestation</em>.</td></tr>
<tr><td>storage attestation</td><td>process where <em>storage nodes</em> exchange challenges and responses to demonstrate that they are storing their currently assigned <em>shards</em></td></tr>
<tr><td>storage node</td><td>entity storing data for Walrus; holds one or several <em>shards</em></td></tr>
<tr><td>user</td><td>any entity/person that wants to store or read <em>blobs</em> on/from Walrus; can act as a Walrus client itself or use the simple interface exposed by <em>publishers</em> and <em>caches</em></td></tr>
<tr><td>WAL</td><td>the native Token of Walrus</td></tr>
<tr><td>Walrus-native metadata</td><td>user-defined metadata per <em>quilt patch</em>, stored on Walrus together with the corresponding <em>quilt</em></td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<!-- markdownlint-disable proper-names -->
<h1 id="testnet-terms-of-service---walrus"><a class="header" href="#testnet-terms-of-service---walrus">TESTNET TERMS OF SERVICE - WALRUS</a></h1>
<p>Last updated: March 26, 2025</p>
<p>By using Walrus Testnet software, technologies, tools, and other services (collectively
<strong>“Testnet”</strong>) offered by Walrus Foundation ("Walrus Foundation", "we", "our"), you agree to the
general Walrus Terms of Service and these additional Testnet Terms of Service (together, the
<strong>“Terms”</strong>). If you do not agree, do not participate in Testnet. If you are using Testnet on behalf
of an organization, you represent and warrant that you are an authorized representative of that
organization and have the authority to bind that business or entity to the Terms.</p>
<h2 id="privacy-policy"><a class="header" href="#privacy-policy">Privacy Policy</a></h2>
<p>Please review our <a href="legal/../legal/privacy.html">Privacy Policy</a>, which also governs your use of Testnet, for
information on how we collect, use and share your information. By using Testnet you agree to be
bound by our Privacy Policy.</p>
<h2 id="eligibility-criteria"><a class="header" href="#eligibility-criteria">Eligibility Criteria</a></h2>
<p>You may use Testnet only if you:</p>
<ul>
<li>Are 18 years or older and capable of forming a binding contract with us.</li>
<li>Are not otherwise barred from participating in Testnet under applicable law.</li>
</ul>
<p>We may, at our discretion, introduce new or change existing eligibility criteria or conditions we
deem appropriate. Testnet may operate in certain phases, and your participation in any one phase of
Testnet does not guarantee that you will be able to participate in any other phases of Testnet.</p>
<h2 id="duration"><a class="header" href="#duration">Duration</a></h2>
<p>Testnet will commence on the date we prescribe and continue until terminated at our discretion. We
may change, discontinue, or wipe, temporarily or permanently, all or any part of Testnet, at any
time and without notice at our discretion, including, without limitation, the modification of the
presence, amounts, or any other conditions applicable to the Testnet tokens, without any liability
to you or other Testnet users. We do not guarantee that Testnet tokens will continue to be offered
for any particular length of time and you may not rely upon the continued availability of any
Testnet tokens. In the event of the expiration of Testnet, you acknowledge and agree that your
access to and use of your Testnet tokens will be removed, and all accrued Testnet tokens will be
deleted from the Testnet system. Testnet tokens will not be converted into any future rewards
offered by Walrus Foundation.</p>
<h2 id="testnet-tokens"><a class="header" href="#testnet-tokens">Testnet Tokens</a></h2>
<p>During Testnet you may accumulate Testnet tokens, such as through the Testnet faucet, which are not,
and will never convert to or accrue to become Mainnet tokens or any other tokens or virtual assets.
Testnet tokens are virtual items with no monetary value. Testnet tokens do not constitute any
currency or property of any type and are not redeemable, refundable, or eligible for any fiat or
virtual currency or anything else of monetary value, under any circumstances. Testnet tokens are not
transferable between users outside of the Testnet, and you may not attempt to sell, trade, or
transfer any Testnet tokens outside of the Testnet, or obtain any manner of credit using any Testnet
tokens. Any attempt to sell, trade, or transfer any Testnet tokens outside of the Testnet will be
null and void.</p>
<h2 id="no-warranty"><a class="header" href="#no-warranty">No Warranty</a></h2>
<p>Walrus Foundation and its service providers provide the Testnet platform solely as a developer test
environment. Testnet is provided "as is" and "with all faults." We and our service providers make no
warranties, express or implied, regarding the reliability, accuracy, performance, or fitness for a
particular purpose of the service provided. You accept all risks associated with the use of Testnet
and agree that Walrus Foundation, its affiliates, employees, and service providers shall not be
liable for any damages, whether direct, indirect, incidental, special, consequential, or punitive,
arising out of the use or inability to use the service, including but not limited to lost profits,
loss of business, or data loss.</p>
<p>Any deficiencies or errors in the Testnet platform shall not constitute a breach of this agreement,
and customers agree to waive any right to seek a refund or compensation based on such deficiencies
or errors. This "as is, no warranty" provision shall survive the termination or expiration of any
other agreements between you and Walrus Foundation.</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<!-- markdownlint-disable -->
<h1 id="walrus-privacy-policy"><a class="header" href="#walrus-privacy-policy">WALRUS PRIVACY POLICY</a></h1>
<p><strong>Last Updated:</strong> February 10, 2024</p>
<p>This Privacy Policy is designed to help you understand how Walrus Foundation (collectively called the “<strong>Organization</strong>", "<strong>we</strong>," "<strong>us</strong>," and "<strong>our</strong>") collects, uses, and shares your personal information and to help you understand and exercise your privacy rights in accordance with applicable law. This Policy applies when you use the Website, contact our team members, engage with us on social media or otherwise interact with us. Any capitalized terms that are undefined shall have the meaning as set forth in the <a href="https://claim.walrus.xyz/airdrop/terms-and-conditions">Walrus Airdrop Terms and Conditions</a></p>
<ol>
<li><a href="legal/privacy.html#scope">SCOPE</a></li>
<li><a href="legal/privacy.html#changes-to-our-privacy-policy">CHANGES TO OUR PRIVACY POLICY</a></li>
<li><a href="legal/privacy.html#personal-information-we-collect">PERSONAL INFORMATION WE
COLLECT</a></li>
<li><a href="legal/privacy.html#how-we-use-your-information">HOW WE USE YOUR INFORMATION</a></li>
<li><a href="legal/privacy.html#how-we-disclose-your-information">HOW WE DISCLOSE YOUR
INFORMATION</a></li>
<li><a href="legal/privacy.html#your-privacy-choices-and-rights">YOUR PRIVACY CHOICES AND
RIGHTS</a></li>
<li><a href="legal/privacy.html#security-of-your-information">SECURITY OF YOUR
INFORMATION</a></li>
<li><a href="legal/privacy.html#international-data-transfers">INTERNATIONAL DATA
TRANSFERS</a></li>
<li><a href="legal/privacy.html#retention-of-personal-information">RETENTION OF PERSONAL
INFORMATION</a></li>
<li><a href="legal/privacy.html#supplemental-notice-for-california-residents">SUPPLEMENTAL NOTICE FOR CALIFORNIA
RESIDENTS</a></li>
<li><a href="legal/privacy.html#supplemental-notice-for-nevada-residents">SUPPLEMENTAL NOTICE FOR NEVADA
RESIDENTS</a></li>
<li><a href="legal/privacy.html#childrens-information">CHILDREN'S INFORMATION</a></li>
<li><a href="legal/privacy.html#third-party-websitesapplications">THIRD-PARTY'S
WEBSITES/APPLICATIONS</a></li>
<li><a href="legal/privacy.html#supervisory-authority">SUPERVISORY AUTHORITY</a></li>
<li><a href="legal/privacy.html#contact-us">CONTACT US</a></li>
</ol>
<h2 id="scope"><a class="header" href="#scope">SCOPE</a></h2>
<p>This Privacy Policy applies to personal information processed by the Organization, including on the Website, and other online and offline offerings. The Website, our services and our other online and offline offerings are collectively called the "<strong>Services</strong>." For clarity, the Services do not include the Walrus Protocol or any other decentralized aspect of the Walrus or Sui Blockchain that is not controlled by the Organization due to the decentralized nature of these blockchains.</p>
<h2 id="changes-to-our-privacy-policy"><a class="header" href="#changes-to-our-privacy-policy">CHANGES TO OUR PRIVACY POLICY</a></h2>
<p>We may revise this Privacy Policy from time to time in our sole discretion. If there are any material changes to this Privacy Policy, we will notify you as required by applicable law. You understand and agree that you will be deemed to have accepted the updated Privacy Policy if you continue to use our Services after the new Privacy Policy takes effect.</p>
<h2 id="personal-information-we-collect"><a class="header" href="#personal-information-we-collect">PERSONAL INFORMATION WE COLLECT</a></h2>
<p>The categories of personal information we collect depend on how you interact with us, our Services and the requirements of applicable law. We collect information that you provide to us, information we obtain automatically when you use our Services, and information from other sources such as third-party services and organizations, as described below.</p>
<p>A.  <strong>Information You Provide to Us Directly</strong></p>
<p>We may collect the following personal information that you provide to
us.</p>
<ul>
<li><strong>Applicable Login User Names</strong>. We may collect information the login user name of a platform account (e.g., email, Discord, Telegram, or Github) that you connect to the Website in connection with your participation in the Airdrop.</li>
<li><strong>Wallet and Transaction Information</strong>. In order to engage in transactions on the Website, you may need to provide us with access to or information about your digital wallet. We will never ask you for or collect your private keys.</li>
<li><strong>Other Transactions</strong>. We may collect personal information and details associated with your activities on our Website, including to deliver you your NFT and Tokens associated with your use of the Services.</li>
<li><strong>Your Communications with Us</strong>. We may collect personal information, such as email address when you request information about our Services or otherwise communicate with us.</li>
<li><strong>Interactive Features</strong>. We and others who use our Services may collect personal information that you submit or make available through our interactive features (e.g., via the Organization community, commenting functionalities, forums, blogs, and social media pages). Any personal information you provide on the public sections of these features will be considered "public," unless otherwise required by applicable law, and is not subject to the privacy protections referenced herein.</li>
<li><strong>Surveys</strong>. We may contact you to participate in surveys. If you decide to participate, you may be asked to provide certain information which may include personal information.</li>
<li><strong>Sweepstakes, Giveaways or Contests</strong>. We may collect personal information you provide for any sweepstakes, giveaways or contests or subsequent Airdrops that we offer. In some jurisdictions, we are required to publicly share information of sweepstakes and contest winners.</li>
<li><strong>Business Development and Strategic Partnerships</strong>. We may collect personal information from individuals and third parties to assess and pursue potential business opportunities.</li>
</ul>
<p>B.  <strong>Information Collected Automatically</strong></p>
<p>We may collect personal information automatically when you use our
Services:</p>
<ul>
<li><strong>Automatic Data Collection</strong>. We may collect certain information automatically when you use our Services, such as your Internet protocol (IP) address, user settings, MAC address, cookie identifiers, mobile carrier, mobile advertising and other unique identifiers, browser or device information, location information (including approximate location derived from IP address), Internet service provider, and metadata about the content you provide. We may also automatically collect information regarding your use of our Services, such as pages that you visit before, during and after using our Services, information about the links you click, the types of content you interact with, the frequency and duration of your activities, and other information about how you use our Services.</li>
<li><strong>Cookies, Pixel Tags/Web Beacons, and Other Technologies</strong>. We, as well as third parties that provide content, advertising, or other functionality on our Services, may use cookies, pixel tags, local storage, and other technologies ("<strong>Technologies</strong>") to automatically collect information through your use of our Services.</li>
<li><strong>Cookies</strong>. Cookies are small text files placed in device browsers that store preferences and facilitate and enhance your experience.</li>
<li><strong>Pixel Tags/Web Beacons</strong>. A pixel tag (also known as a web beacon) is a piece of code embedded in our Services that collects information about engagement on our Services. The use of a pixel tag allows us to record, for example, that a user has visited a particular web page or clicked on a particular advertisement. We may also include web beacons in e-mails to understand whether messages have been opened, acted on, or forwarded.</li>
</ul>
<blockquote>
<p>Our uses of these Technologies fall into the following general
categories:</p>
</blockquote>
<ul>
<li><strong>Operationally Necessary</strong>. This includes Technologies that allow you access to our Services, applications, and tools that are required to identify irregular website behavior, prevent fraudulent activity, improve security, restrict users in Prohibited Jurisdictions, restrict Prohibited Persons or allow you to make use of our functionality;</li>
<li><strong>Performance-Related</strong>. We may use Technologies to assess the performance of our Services, including as part of our analytic practices to help us understand how individuals use our Services (see <em>Analytics below</em>);</li>
<li><strong>Functionality-Related</strong>. We may use Technologies that allow us to offer you enhanced functionality when accessing or using our Services. This may include identifying you when you sign into our Services or keeping track of your specified preferences, interests, or past items viewed;</li>
</ul>
<blockquote>
<p><em>See "<a href="legal/privacy.html#your-privacy-choices-and-rights">Your Privacy Choices and
Rights</a>" below to understand your
choices regarding these Technologies.</em></p>
</blockquote>
<ul>
<li><strong>Analytics</strong>. We may use our Technologies and other third-party tools to process analytics information on our Services. These technologies allow us to process usage data to better understand how our website and web-related Services are used, and to continually improve and personalize our Services. Some of our analytics partners include:</li>
<li><strong>Google Analytics</strong>. For more information about how Google uses your data (including for its own purposes, e.g., for profiling or linking it to other data), please visit <a href="http://www.google.com/policies/privacy/partners/">Google Analytics' Privacy Policy</a>. To learn more about how to opt-out of Google Analytics' use of your information, please click <a href="http://tools.google.com/dlpage/gaoptout">here</a>.</li>
<li><strong>Facebook Connect</strong>. For more information, please visit Facebook's <a href="https://www.facebook.com/policy.php?ref=pf">Data Policy</a>. You can object to the collection of your data by Facebook pixel, or to the use of your data for the purpose of displaying Facebook ads by contacting the following address while logged into your Facebook account: https://www.facebook.com/settings?tab=ads.</li>
<li><strong>Mixpanel</strong>. For more information about Mixpanel, please visit <a href="https://mixpanel.com/legal/privacy-policy/">Mixpanel's Privacy Policy</a>.</li>
<li><strong>Social Media Platforms</strong>. Our Services may contain social media buttons, such as Discord, Twitter, Instagram, TikTok, Youtube, and Telegram, which might include widgets such as the "share this" button or other interactive mini programs. These features may collect your IP address and which page you are visiting on our Services and may set a cookie to enable the feature to function properly. Your interactions with these platforms are governed by the privacy policy of the company providing it.</li>
</ul>
<p>C. <strong>Information Collected from Other Sources</strong></p>
<ul>
<li><strong>Third-Party Sources</strong>. We may obtain information about you from other sources, including through third-party services and organizations. For example, if you access our Services through a third-party application, such as an app store, a third-party login service, or a social networking site, we may collect information about you from that third-party application that you have made available via your privacy settings.</li>
</ul>
<h2 id="how-we-use-your-information"><a class="header" href="#how-we-use-your-information">HOW WE USE YOUR INFORMATION</a></h2>
<p>We use your information for a variety of business purposes, including to provide our Services, for administrative purposes, and to market our products and Services, as described below.</p>
<p>A.  <strong>Provide Our Services</strong></p>
<p>We use your information to fulfill our contract with you and provide you with our Services and perform our contract with you, such a</p>
<ul>
<li>Managing your information and accounts;</li>
<li>Providing access to certain areas, functionalities, and features of our Services;</li>
<li>Answering requests for customer or technical support;</li>
<li>Communicating with you about your account, activities on our Services, and policy changes;</li>
<li>Processing information about your wallet to facilitate transfers via the Services;</li>
<li>Processing applications if you apply for a job, we post on our Services; and</li>
<li>Allowing you to register for events.</li>
</ul>
<p>B.  <strong>Administrative Purposes</strong></p>
<p>We use your information for our legitimate interest, such as:</p>
<ul>
<li>Pursuing our legitimate interests such as direct marketing, research and development (including marketing research), network and information security, and fraud prevention;</li>
<li>Detecting security incidents, protecting against malicious, deceptive, fraudulent or illegal activity, and prosecuting those responsible for that activity;</li>
<li>Measuring interest and engagement in our Services;</li>
<li>Improving, upgrading or enhancing our Services;</li>
<li>Developing new products and Services;</li>
<li>Ensuring internal quality control and safety;</li>
<li>Authenticating and verifying individual identities;</li>
<li>Debugging to identify and repair errors with our Services;</li>
<li>Auditing relating to interactions, transfers and other compliance activities;</li>
<li>Sharing information with third parties as needed to provide the Services;</li>
<li>Enforcing our agreements and policies; and</li>
<li>Other uses as required to comply with our legal obligations.</li>
</ul>
<p>D.  <strong>With Your Consent</strong></p>
<p>We may use personal information for other purposes that are clearly disclosed to you at the time you provide personal information or with your consent.</p>
<p>E.  <strong>Other Purposes</strong></p>
<p>We also use your information for other purposes as requested by you or as permitted by applicable law.</p>
<ul>
<li><strong>Automated Decision Making</strong>. We may engage in automated decision making, including profiling. The Organization's processing of your personal information will not result in a decision based solely on automated processing that significantly affects you unless such a decision is necessary as part of a contract we have with you, we have your consent, or we are permitted by law to engage in such automated decision making. If you have questions about our automated decision making, you may contact us as set forth in "<a href="legal/privacy.html#contact-us">Contact Us</a>" below.</li>
<li><strong>De-identified and Aggregated Information</strong>. We may use personal information and other information about you to create de-identified and/or aggregated information, such as de-identified demographic information, de-identified location information, information about the device from which you access our Services, or other analyses we create.</li>
</ul>
<h2 id="how-we-disclose-your-information"><a class="header" href="#how-we-disclose-your-information">HOW WE DISCLOSE YOUR INFORMATION</a></h2>
<p>We disclose your information to third parties for a variety of business purposes, including to provide our Services, to protect us or others, or in the event of a major business transaction such as a merger, sale, or asset transfer, as described below.</p>
<p>A.  <strong>Disclosures to Provide our Services</strong></p>
<p>The categories of third parties with whom we may share your information are described below.</p>
<ul>
<li><strong>Notice Regarding Use of Blockchain</strong>. Transactions on the Services will be conducted via Blockchain. Information about your transfers will be provided to a Blockchain and may be accessible to third parties due to the public nature of the Blockchain. Because entries to a Blockchain are, by their nature, public, and because it may be possible for someone to identify you through your pseudonymous, public wallet address using external sources of information, any transaction you enter onto the Blockchain could possibly be used to identify you, or information about you.</li>
<li><strong>Other Users of the Services and Parties You Transact With</strong>. Some of your personal information may be visible to other users of the Services (e.g., information featured on generally accessible parts of your profile. In addition, to complete transfers via the Services, we will need to share some of your personal information with the party that you are transacting with.</li>
<li><strong>Third Party Websites and Applications</strong>. You may choose to share personal information or interact with third-party websites and/or third-party applications, including, but not limited to, third-party electronic wallet extensions. Once your personal information has been shared with a third-party website or a third-party application, it will also be subject to such third party's privacy policy. We encourage you to closely read each third-party website or third-party application privacy policy before sharing your personal information or otherwise interacting with them. Please note that we do not control, and we are not responsible for the third-party website's or the third-party application's processing of your personal information.</li>
<li><strong>Service Providers</strong>. We may share your personal information with our third-party service providers who use that information to help us provide our Services. This includes service providers that provide us with IT support, hosting, customer service, and related services.</li>
<li><strong>Business Partners</strong>. We may share your personal information with business partners to provide you with a product or service you have requested. We may also share your personal information to business partners with whom we jointly offer products or services.</li>
<li><strong>Affiliates</strong>. We may share your personal information with members of our corporate family.</li>
<li><strong>Other Users/Website Visitors</strong>. As described above in "<a href="legal/privacy.html#personal-information-we-collect">Personal Information We Collect</a>," our Services allow you to share your profile and/or User Content with other users or publicly, including to those who do not use our Services.</li>
<li><strong>APIs/SDKs</strong>. We may use third-party application program interfaces ("<strong>APIs</strong>") and software development kits ("<strong>SDKs</strong>") as part of the functionality of our Services. For more information about our use of APIs and SDKs, please contact us as set forth in "<a href="legal/privacy.html#contact-us">Contact Us</a>" below.</li>
</ul>
<p>B.  <strong>Disclosures to Protect Us or Others</strong></p>
<p>We may access, preserve, and disclose any information we store associated with you to external parties if we, in good faith, believe doing so is required or appropriate to: comply with law enforcement or national security requests and legal process, such as a court order or subpoena; protect your, our, or others' rights, property, or safety; enforce our policies or contracts; collect amounts owed to us; or assist with an investigation or prosecution of suspected or actual illegal activity.</p>
<p>C.  <strong>Disclosure in the Event of Merger, Sale, or Other Asset Transfers</strong></p>
<p>If we are involved in a merger, acquisition, financing due diligence, reorganization, bankruptcy, receivership, purchase or sale of assets, or transition of service to another provider, your information may be sold or transferred as part of such a transaction, as permitted by law and/or contract.</p>
<h2 id="your-privacy-choices-and-rights"><a class="header" href="#your-privacy-choices-and-rights">YOUR PRIVACY CHOICES AND RIGHTS</a></h2>
<p><strong>Your Privacy Choices</strong>. The privacy choices you may have about your personal information are determined by applicable law and are described below.</p>
<ul>
<li><strong>Email Communications</strong>. If you receive an unwanted email from us, you can use the unsubscribe link found at the bottom of the email to opt out of receiving future emails. Note that you will continue to receive transfer-related emails regarding Services you have requested. We may also send you certain non-promotional communications regarding us and our Services, and you will not be able to opt out of those communications (e.g., communications regarding our Services or updates to our Terms of Service or this Privacy Policy).</li>
<li><strong>"Do Not Track."</strong> Do Not Track ("<strong>DNT</strong>") is a privacy preference that users can set in certain web browsers. Please note that we do not respond to or honor DNT signals or similar mechanisms transmitted by web browsers.</li>
<li><strong>Cookies and Interest-Based Advertising</strong>. You may stop or restrict the placement of Technologies on your device or remove them by adjusting your preferences as your browser or device permits. However, if you adjust your preferences, our Services may not work properly. Please note that cookie-based opt-outs are not effective on mobile applications. However, you may opt-out of personalized advertisements on some mobile applications by following the instructions for <a href="https://support.google.com/googleplay/android-developer/answer/6048248?hl=en">Android</a>, <a href="https://support.apple.com/en-us/HT202074">iOS</a> and <a href="https://www.networkadvertising.org/mobile-choice/">others</a>.</li>
</ul>
<blockquote>
<p>The online advertising industry also provides websites from which you may opt out of receiving targeted ads from data partners and other advertising partners that participate in self-regulatory programs. You can access these and learn more about targeted advertising and consumer choice and privacy by visiting the <a href="https://thenai.org/opt-out/">Network Advertising Initiative</a>, <a href="https://youradchoices.com/">the Digital Advertising Alliance</a>, <a href="https://www.youronlinechoices.eu/">the European Digital Advertising Alliance</a>, and <a href="https://youradchoices.ca/choices/">the Digital Advertising Alliance of Canada</a>.</p>
</blockquote>
<blockquote>
<p>Please note you must separately opt out in each browser and on each device.</p>
</blockquote>
<p><strong>Your Privacy Rights</strong>. In accordance with applicable law, you may have the right to:</p>
<ul>
<li>
<p><strong>Access Personal Information about you, including: (i) confirming whether we are processing your personal information; (ii) obtaining access to or a copy of your personal information; or (iii) receiving an electronic copy of personal information that you have provided to us, or asking us to send that information to another company (aka the right of data portability);</strong></p>
</li>
<li>
<p><strong>Request Correction</strong> of your personal information where it is inaccurate or incomplete. In some cases, we may provide self-service tools that enable you to update your personal information;</p>
</li>
</ul>
<h2 id="request-deletion-of-your-personal-information"><a class="header" href="#request-deletion-of-your-personal-information">Request Deletion of your personal information;</a></h2>
<ul>
<li><strong>Request Restriction of or Object</strong> to our processing of your personal information, including where the processing of your personal information is based on our legitimate interest or for direct marketing purposes; and</li>
</ul>
<p><strong>Withdraw Your Consent to our processing of your personal information. Please note that your withdrawal will only take effect for future processing and will not affect the lawfulness of processing before the withdrawal.</strong></p>
<p>If you would like to exercise any of these rights, please contact us as set forth in "<a href="legal/privacy.html#contact-us">Contact Us</a>" below. We will process such requests in accordance with applicable laws.</p>
<h2 id="security-of-your-information"><a class="header" href="#security-of-your-information">SECURITY OF YOUR INFORMATION</a></h2>
<p>We take steps designed to ensure that your information is treated securely and in accordance with this Privacy Policy. Unfortunately, no system is 100% secure, and we cannot ensure or warrant the security of any information you provide to us. To the fullest extent permitted by applicable law, we do not accept liability for unauthorized disclosure.</p>
<p>By using our Services or providing personal information to us, you agree that we may communicate with you electronically regarding security, privacy, and administrative issues relating to your use of our Services. If we learn of a security system's breach, we may attempt to notify you electronically by posting a notice on our Services, by mail or by sending an email to you.</p>
<h2 id="international-data-transfers"><a class="header" href="#international-data-transfers">INTERNATIONAL DATA TRANSFERS</a></h2>
<p>All information processed by us may be transferred, processed, and stored anywhere in the world, including, but not limited to, the United States or other countries, which may have data protection laws that are different from the laws where you live. We endeavor to safeguard your information consistent with the requirements of applicable laws.</p>
<p>If we transfer personal information which originates in the European Economic Area, Switzerland, and/or the United Kingdom to a country that has not been found to provide an adequate level of protection under applicable data protection laws, one of the safeguards we may use to support such transfer is the EU Standard Contractual Clauses.</p>
<h2 id="retention-of-personal-information"><a class="header" href="#retention-of-personal-information">RETENTION OF PERSONAL INFORMATION</a></h2>
<p>We store the personal information we collect as described in this Privacy Policy for as long as you use our Services or as necessary to fulfill the purpose(s) for which it was collected, provide our Services, resolve disputes, establish legal defenses, conduct audits, pursue legitimate business purposes, enforce our agreements, and comply with applicable laws.</p>
<p>To determine the appropriate retention period for personal information, we may consider applicable legal requirements, the amount, nature, and sensitivity of the personal information, certain risk factors, the purposes for which we process your personal information, and whether we can achieve those purposes through other means.</p>
<h2 id="supplemental-notice-for-california-residents"><a class="header" href="#supplemental-notice-for-california-residents">SUPPLEMENTAL NOTICE FOR CALIFORNIA RESIDENTS</a></h2>
<p>This Supplemental Notice for California Residents only applies to our processing of personal information that is subject to the California Consumer Privacy Act of 2018 ("<strong>CCPA</strong>"). The Organization does not believe it is subject to the CCPA. That said, the Organization provides this supplemental notice for purposes of transparency. The CCPA provides California residents with the right to know what categories of personal information the Organization has collected about them and whether the Organization disclosed that personal information for a business purpose (e.g., to a service provider) in the preceding twelve months. California residents can find this information below:</p>
<table style="text-align: left;">
<colgroup>
<col style="width: 62%" />
<col style="width: 37%" />
</colgroup>
<thead>
<tr>
<th><strong>Category of Personal Information Collected by the Organization</strong></th>
<th><strong>Categories of Third Parties Personal Information is Disclosed to for a Business Purpose</strong></th>
</tr>
</thead>
<tr >
<th><p><strong>Identifiers:</strong></p>
<p>Unique personal identifier, online identifier, internet protocol address, email address, account name or other similar identifiers.</p></th>
<th><ul >
<li><p>Service providers</p></li>
<li><p>Third-party websites or applications</p></li>
<li><p>Blockchain networks</p></li>
<li><p>Other users or third parties you interact with</p></li>
<li><p>Data analytics providers</p></li>
<li><p>Other users/public (alias only)</p></li>
</ul></th>
</tr>
<tr >
<th><p><strong>Commercial information</strong></p>
<p>Records of personal property, products or services, purchased, obtained, or considered, or other purchasing or consuming histories or tendencies</p></th>
<th><ul >
<li><p>Service providers</p></li>
<li><p>Blockchain networks</p></li>
<li><p>Data analytics providers</p></li>
<li><p>Other users or third parties you interact with</p></li>
</ul></th>
</tr>
<tr >
<th><p><strong>Internet or other electronic network
activity</strong></p>
<p>Browsing history, search history, information on a consumer’s interaction with an internet website or application</p></th>
<th><ul >
<li><p>Service providers</p></li>
<li><p>Blockchain networks</p></li>
<li><p>Data analytics providers</p></li>
<li><p>Other users or third parties you interact with</p></li>
</ul></th>
</tr>
<tbody>
</tbody>
</table>
<p>The categories of sources from which we collect personal information and our business and commercial purposes for using personal information are set forth in "<a href="legal/privacy.html#personal-information-we-collect">Personal Information we Collect</a>" and "<a href="legal/privacy.html#how-we-use-your-information">How We Use of Your Information</a>" above, respectively.</p>
<p><strong>"Sales" of Personal Information under the CCPA</strong>. For purposes of the CCPA, the Organization does not "sell" personal information, nor do we have actual knowledge of any "sale" of personal information of minors under 16 years of age.</p>
<p><strong>Additional Privacy Rights for California Residents</strong></p>
<p><strong>Non-Discrimination</strong>. California residents have the right not to receive discriminatory treatment by us for the exercise of their rights conferred by the CCPA.</p>
<p><strong>Authorized Agent</strong>. Only you, or someone legally authorized to act on your behalf, may make a verifiable consumer request related to your personal information. To designate an authorized agent, please contact us as set forth in "<a href="legal/privacy.html#contact-us">Contact Us</a>" below and provide written authorization signed by you and your designated agent.</p>
<p><strong>Verification</strong>. To protect your privacy, we will take the following steps to verify your identity before fulfilling your request. When you make a request, we will ask you to provide sufficient information that allows us to reasonably verify you are the person about whom we collected personal information or an authorized representative, which may include confirming the email address associated with any personal information we have about you. If you are a California resident and would like to exercise any of your rights under the CCPA, please contact us as set forth in "<a href="legal/privacy.html#contact-us">Contact Us</a>" below. We will process such requests in accordance with applicable laws.</p>
<p><strong>Accessibility</strong>. This Privacy Policy uses industry-standard technologies and was developed in line with the World Wide Web Consortium's Web Content Accessibility Guidelines, version 2.1. If you wish to print this policy, please do so from your web browser or by saving the page as a PDF.</p>
<p><strong>California Shine the Light</strong>. The California "Shine the Light" law permits users who are California residents to request and obtain from us once a year, free of charge, a list of the third parties to whom we have disclosed their personal information (if any) for their direct marketing purposes in the prior calendar year, as well as the type of personal information disclosed to those parties.</p>
<p><strong>Right for minors to remove posted content</strong>. Where required by law, California residents under the age of 18 may request to have their posted content or information removed from the publicly viewable portions of the Services by contacting us directly as set forth in "<a href="legal/privacy.html#contact-us">Contact Us</a>" below.</p>
<h2 id="supplemental-notice-for-nevada-residents"><a class="header" href="#supplemental-notice-for-nevada-residents">SUPPLEMENTAL NOTICE FOR NEVADA RESIDENTS</a></h2>
<p>If you are a resident of Nevada, you have the right to opt-out of the sale of certain personal information to third parties who intend to license or sell that personal information. You can exercise this right by contacting us as set forth in "<a href="legal/privacy.html#contact-us">Contact Us</a>" below with the subject line "Nevada Do Not Sell Request" and providing us with your name and the email address associated with your account. Please note that we do not currently sell your personal information as sales are defined in Nevada Revised Statutes Chapter 603A.</p>
<h2 id="childrens-information"><a class="header" href="#childrens-information">CHILDREN'S INFORMATION</a></h2>
<p>The Services are not directed to children under 13 (or other age as required by local law), and we do not knowingly collect personal information from children. If you learn that your child has provided us with personal information without your consent, you may contact us as set forth in "<a href="legal/privacy.html#contact-us">Contact Us</a>" below. If we learn that we have collected a child's personal information in violation of applicable law, we will promptly take steps to delete such information.</p>
<h2 id="third-party-websitesapplications"><a class="header" href="#third-party-websitesapplications">THIRD-PARTY WEBSITES/APPLICATIONS</a></h2>
<p>The Services may contain links to other websites/applications (such as GitHub) and other websites/applications may reference or link to our Services. These third-party services are not controlled by us. We encourage our users to read the privacy policies of each website and application with which they interact. We do not endorse, screen or approve, and are not responsible for, the privacy practices or content of such other websites or applications. Providing personal information to third-party websites or applications is at your own risk.</p>
<h2 id="supervisory-authority"><a class="header" href="#supervisory-authority">SUPERVISORY AUTHORITY</a></h2>
<p>If you are located in the European Economic Area, Switzerland, the United Kingdom, or Brazil, you have the right to lodge a complaint with a supervisory authority if you believe our processing of your personal information violates applicable law.</p>
<h2 id="contact-us"><a class="header" href="#contact-us">CONTACT US</a></h2>
<p>If you have any questions about our privacy practices or this Privacy Policy, or to exercise your rights as detailed in this Privacy Policy, please contact us at:</p>
<p>Walrus Foundation</p>
<p><a href="mailto:notices@walrus.xyz">notices@walrus.xyz</a></p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<!-- markdownlint-disable proper-names -->
<h1 id="walrus-general-terms-of-services"><a class="header" href="#walrus-general-terms-of-services">Walrus General Terms of Services</a></h1>
<p>Please read these Terms of Service (the “Terms”) and our Privacy Policy carefully because they
govern your use of the website, the user interface, and other offerings located at walrus.xyz, (the
“Site”) offered by Walrus Foundation (“Walrus Foundation,” “we,” “our”). To make these Terms easier
to read, the Site and our services (including Beta Services) are collectively called the
“Interface.” The Interface may facilitate interaction with the Walrus decentralized cryptographic
protocols, maintained by third party open source communities, which we do not own or control (the
“Protocol”) allowing for activities such as the creation of non-fungible tokens (“NFTs”), blockchain
games, DeFi apps, marketplaces, automated market makers, website hosting, data storage providers,
and wallets. BY USING THESE SERVICES, YOU REPRESENT THAT YOU ARE NOT A PERSON OR ENTITY WHO IS
RESIDENT IN, A CITIZEN OF, IS LOCATED IN, IS INCORPORATED IN, OR HAS A REGISTERED OFFICE IN ANY
RESTRICTED TERRITORY, AS DEFINED BELOW (ANY SUCH PERSON OR ENTITY FROM A RESTRICTED TERRITORY, ARE
REFERRED TO HEREIN AS A “RESTRICTED PERSON”).WHEN YOU AGREE TO THESE TERMS, YOU ARE AGREEING (WITH
LIMITED EXCEPTION) TO RESOLVE ANY DISPUTE BETWEEN YOU AND WALRUS FOUNDATION THROUGH BINDING,
INDIVIDUAL ARBITRATION RATHER THAN IN COURT. PLEASE REVIEW CAREFULLY SECTION 15 “DISPUTE RESOLUTION”
BELOW FOR DETAILS REGARDING ARBITRATION. HOWEVER, IF YOU ARE A RESIDENT OF A JURISDICTION WHERE
APPLICABLE LAW PROHIBITS ARBITRATION OF DISPUTES, THE AGREEMENT TO ARBITRATE IN SECTION 16 WILL NOT
APPLY TO YOU, BUT THE PROVISIONS OF SECTION 15 (GOVERNING LAW) WILL APPLY INSTEAD.</p>
<ol>
<li>
<p>Agreement to Terms</p>
<p>By using our Interface, you agree to be bound by these Terms. If you don’t agree to be bound by
the Terms, do not use the Interface.</p>
</li>
<li>
<p>Privacy Policy</p>
<p>Please review our Privacy Policy, which also governs your use of the Interface, for information
on how we collect, use and share your information.</p>
</li>
<li>
<p>Changes to these Terms or the Interface</p>
<p>We may update the Terms, including any addendum terms, from time to time in our sole discretion.
If we do, we’ll let you know by posting the updated Terms on the Site and/or may also send other
communications. It’s important that you review the Terms whenever we update them or you use the
Interface. If you continue to use the Interface after we have posted updated Terms it means that
you accept and agree to the changes. If you don’t agree to be bound by the changes, you may not
use the Interface anymore. Because our Interface is evolving over time we may change or
discontinue all or any part of the Interface, at any time and without notice, at our sole
discretion.</p>
</li>
<li>
<p>Interface Use Eligibility</p>
<p>a) Eligibility. The Interface is only available to users in certain jurisdictions that are at
least 18 years old, capable of forming a binding contract with the Walrus Foundation and not
otherwise barred from using the Interface as permitted under Applicable Law. You may not attempt
to access or use the Interface if you are not permitted to do so.</p>
<p>b) Compliance. You certify that you will comply with all Applicable Law when using the
Interface. You are solely responsible for ensuring that your access and use of the Interface in
such country, territory, or jurisdiction does not violate any applicable laws. You must not use
any software or networking techniques, including use of a virtual private network (“VPN”) to
circumvent or attempt to circumvent this prohibition. We reserve the right to monitor the
locations from which our Interface is accessed. Furthermore, we reserve the right, at any time,
in our sole discretion, to block access to the Interface, in whole or in part, from any
geographic location, IP addresses, and unique device identifiers, or to any user who we believe
is in breach of these Terms.</p>
</li>
<li>
<p>Use of the Interface</p>
<p>a) User Representations and Warranties. As a condition to accessing or using the Interface, you
represent and warrant to the Walrus Foundation the following:</p>
<p>(i) if you are entering into these Terms as an individual, then you are of legal age in the
jurisdiction in which you reside and you have the legal capacity to enter into these Terms and
be bound by them and if you are entering into these Terms as an entity, then you must have the
legal authority to accept these Terms on that entity’s behalf, in which case “you” (except as
used in this paragraph) will mean that entity;</p>
<p>(ii) you are in or residing in Cuba, Iran, North Korea, Syria, Belarus, Russia, and the Crimea,
Luhansk, Donetsk, Zaporizhzhia, and Kherson regions of Ukraine, or any other country or
jurisdiction to which the Cayman Islands, the United Kingdom, United States, the United Nations
Security Council, or the European Union embargoes goods or imposes similar sanctions
(collectively, “Restricted Territories”);</p>
<p>(iii) you are not on any sanctions list or equivalent maintained by the Cayman Islands, the
United Kingdom, United States, the United Nations Security Council, or the European Union
(collectively, “Sanctions Lists Persons”) and you do not intend to transact with any Restricted
Person or Sanctions List Person;</p>
<p>(iv) you do not, and will not, use VPN software or any other privacy or anonymization tools or
techniques to circumvent, or attempt to circumvent, any restrictions that apply to the
Interface;</p>
<p>(v) you have obtained all required consents from any individual whose personal information you
transfer to us in connection with your use of the Interface; and</p>
<p>(vi) your access to the Interface is not: (a) prohibited by and does not otherwise violate or
assist you to violate any domestic or foreign law, rule, statute, regulation, by-law, order,
protocol, code, decree, or another directive, requirement, or guideline, published or in force
that applies to or is otherwise intended to govern or regulate any person, property,
transaction, activity, event or other matter, including any rule, order, judgment, directive or
other requirement or guideline issued by any federal, provincial or state, municipal, local or
other governmental, regulatory, judicial or administrative authority having jurisdiction over
Walrus Foundation, you, the Site or the Interface, or as otherwise duly enacted, enforceable by
law, the common law or equity (collectively, “Applicable Laws”); or (b) contribute to or
facilitate any illegal activity.</p>
<p>b) Limitations. As a condition to accessing or using the Interface or the Site, you acknowledge,
understand, and agree to the following:</p>
<p>(i) from time to time the Site and the Interface may be inaccessible or inoperable for any
reason, including, without limitation: (a) equipment malfunctions; (b) periodic maintenance
procedures or repairs that Walrus Foundation or any of its suppliers or contractors may
undertake from time to time; (c) causes beyond Walrus Foundation’s control or that Walrus
Foundation could not reasonably foresee; (d) disruptions and temporary or permanent
unavailability of underlying blockchain infrastructure; or (e) unavailability of third-party
service providers or external partners for any reason;</p>
<p>(ii) the Site and the Interface may evolve, which means Walrus Foundation may apply changes,
replace, or discontinue (temporarily or permanently) the Interface at any time in its sole
discretion;</p>
<p>(iii) Walrus Foundation does not act as an agent for you or any other user of the Site or the
Interface;</p>
<p>(iv) you are solely responsible for your use of the Interface; and</p>
<p>(v) we owe no fiduciary duties or liabilities to you or any other party, and that to the extent
any such duties or liabilities may exist at law or in equity, you hereby irrevocably disclaim,
waive, and eliminate those duties and liabilities.</p>
<p>c) Certifications. As a condition to accessing or using the Interface, you covenant to Walrus
Foundation the following:</p>
<p>(i) you will comply with all Applicable Laws in connection with using the Interface, and you
will not use the Site or the Interface if the laws of your country, or any other Applicable Law,
prohibit you from doing so; and</p>
<p>(ii) in addition to complying with all restrictions, prohibitions, and other provisions of these
Terms, you will ensure that, at all times, all information that you provide through the
Interface is current, complete, and accurate and you will maintain the security and
confidentiality of your private keys associated with your public wallet address, passwords, API
keys, private keys associated with your Interface account and other related credentials.</p>
<p>d) Tax Records and Reporting. You are solely responsible for all costs incurred by you in using
the Interface, and for determining, collecting, reporting, and paying all applicable Taxes that
you may be required by law to collect and remit to any governmental or regulatory agencies.  As
used herein, “Taxes” means the taxes, duties, levies, tariffs, and other charges imposed by any
federal, state, multinational or local governmental or regulatory authority. We reserve the
right to report any activity occurring using the Interface to relevant tax authorities as
required under Applicable Law. You are solely responsible for maintaining all relevant Tax
records and complying with any reporting requirements you may have as related to our Interface.
You are further solely responsible for independently maintaining the accuracy of any record
submitted to any tax authority including any information derived from the Interface.</p>
<p>e) Costs and Fees. Each party shall be responsible for all Taxes imposed on its income or
property. In addition, you agree to pay any applicable fees, including Gas Fees and hosting
fees, in connection with transactions on the Interface. “Gas Fees” mean the fees that fund the
network of computers that run the decentralized blockchain network, meaning that you will need
to pay a Gas Fee for each transaction that occurs via the blockchain network.</p>
<p>f) Suspensions or Terminations. In addition to the other suspension and termination rights in
these Terms, we may suspend or terminate your access to the Interface at any time in connection
with any transaction as required by Applicable Law, any governmental authority, or if we in our
sole and reasonable discretion determine you are violating the terms of any third-party service
provider or these Terms, including, without limitation, if we reasonably believe any of your
representations and warranties may be untrue or inaccurate or you are violating or have violated
any of the geographical restrictions that apply to the Interface, and we will not be liable to
you for any losses or damages you may suffer as a result of or in connection with the Site or
the Interface being inaccessible to you at any time or for any reason. Such suspension or
termination shall not constitute a breach of these Terms by Walrus Foundation. In accordance
with its anti-money laundering, anti-terrorism, anti-fraud, and other compliance policies and
practices, we may impose limitations and controls on the ability of you or any beneficiary to
utilize the Interface. Such limitations may include rejecting transaction requests, freezing
funds, or otherwise restricting you from using the Interface, all to the extent of our ability
to do so.</p>
</li>
<li>
<p>Beta Services</p>
<p>a) We may offer some of the Services, including without limitation the testnet or devnet
environments (“Testnet” and “Devnet”), in beta version (collectively, “Beta Services”). You
acknowledge and agree that: (a) the Beta Services may not operate properly, be in final form or
be fully functional; (b) the Beta Services may contain errors, design flaws or other problems;
(c) it may not be possible to make the Beta Services fully functional; (d) the information
obtained using the Beta Services may not be accurate; (e) use of the Beta Services may result in
unexpected results, loss of data or communications, project delays or other unpredictable damage
or loss; (f) we are under no obligation to release a live, commercial or public version of the
Beta Services; (g) we have the right to unilaterally to abandon development of the Beta
Services, at any time and without any obligation or liability to you; and (h) we may decide to
modify, delete, remove or wipe the functionality, content or data contained within the Beta
Services in our sole discretion at any time without notice or liability to you.</p>
<p>b) In your use of the Testnet or Devnet, you may accumulate Testnet or Devnet tokens
(collectively, “Beta Tokens”) such as through a faucet, which are not, and shall never convert
to or accrue to become any other tokens or virtual assets outside of the respective Testnet or
Devnet on which such Beta Tokens were issued. Beta Tokens are virtual items with no monetary
value. Beta Tokens do not constitute any currency or property of any type and are not
redeemable, refundable, or eligible for any fiat or virtual currency (including any rewards
offered by Walrus Foundation) or anything else of value. Walrus Foundation does not guarantee
that Beta Tokens will continue to be offered for a specific length of time and you may not rely
upon the continued availability of any Beta Tokens. You acknowledge that you have no property
interest in the Beta Tokens.  If the Beta Services expire, you acknowledge and agree that your
access to and use of your Beta Tokens will be removed, and all accrued Beta Tokens will be
deleted from the Beta Service environments. Beta Tokens are not transferable between users
outside of the respective Testnet or Devnet on which such Beta Tokens were issued, and you may
not attempt to sell, trade, or transfer any Tokens outside of that respective Testnet or Devnet,
or obtain any manner of credit using any Beta Tokens. Any attempt to sell, trade, or transfer
any Beta Tokens outside of the respective Testnet or Devnet will be null and void.</p>
</li>
<li>
<p>Your Content</p>
<p>a) User Content. Our Interface may allow you to store or share content such as text (in posts or
communications with others), files, documents, graphics, images, music, software, code, audio
and video. Anything (other than Feedback) that you post or otherwise make available through the
Interface is referred to as “User Content.” Walrus Foundation does not claim any ownership
rights in any Walrus Content and nothing in these Terms will be deemed to restrict any rights
that you may have to your User Content.</p>
<p>b) Permissions to Your User Content. By making any Walrus Content available through the
Interface you hereby grant to Walrus Foundation a non-exclusive, transferable, worldwide,
royalty-free license, with the right to sublicense, to use, copy, modify, create derivative
works based upon, distribute, publicly display, and publicly perform your User Content in
connection with operating, providing, and improving the Interface.</p>
<p>c) Your Responsibility for User Content. You are solely responsible for all your User Content.
You represent and warrant that you have (and will have) all rights that are necessary to grant
us the license rights in your User Content under these Terms. You represent and warrant that
neither your User Content, nor your use and provision of your User Content to be made available
through the Interface, nor any use of your User Content by Walrus Foundation on or through the
Interface will infringe, misappropriate or violate a third party’s intellectual property rights,
or rights of publicity or privacy, or result in the violation of any Applicable Law or
regulation.</p>
<p>d) Removal of User Content. You can remove certain elements of your User Content by specifically
deleting it. You should know that in certain instances, some of your User Content (such as posts
or comments you make) may not be completely removed and copies of your User Content may continue
to exist on the Interface. To the maximum extent permitted by law, we are not responsible or
liable for the removal or deletion of (or the failure to remove or delete) any of your User
Content.</p>
<p>e) Walrus Foundation's Intellectual Property. We may make available through the Interface
content that is subject to intellectual property rights. We retain all rights to that content.</p>
<p>f) Feedback. We appreciate feedback, comments, ideas, proposals and suggestions for improvements
to the Interface (“Feedback”). If you choose to submit Feedback, you agree that we are free to
use it (and permit others to use it) without any restriction or compensation to you.</p>
</li>
<li>
<p>General Prohibitions and Walrus Foundation’s Enforcement Rights.</p>
<p>You agree not to do any of the following:</p>
<ul>
<li>
<p>Post, upload, publish, submit or transmit any User Content that:</p>
<ul>
<li>
<p>(i) infringes, misappropriates or violates a third party’s patent, copyright, trademark,
trade secret, moral rights or other intellectual property rights, or rights of publicity
or privacy;</p>
</li>
<li>
<p>(ii) violates, or encourages any conduct that would violate, any Applicable Law or
regulation or would give rise to civil liability;</p>
</li>
<li>
<p>(iii) is fraudulent, false, misleading or deceptive;</p>
</li>
<li>
<p>(iv) is defamatory, obscene, pornographic, vulgar or offensive;</p>
</li>
<li>
<p>(v) promotes discrimination, bigotry, racism, hatred, harassment or harm against any
individual or group;</p>
</li>
<li>
<p>(vi) is violent or threatening or promotes violence or actions that are threatening to any
person or entity; or</p>
</li>
<li>
<p>(vii) promotes illegal or harmful activities or substances;</p>
</li>
</ul>
</li>
<li>
<p>Engage in or induce others to engage in any form of unauthorized access, hacking, or social
engineering, including without limitation any distributed denial or service or DDoS attack, of
Walrus Foundation, the Interface, or any users of the foregoing;</p>
</li>
<li>
<p>Use, display, mirror or frame the Interface or any individual element within the Interface,
Walrus Foundation’s name, any Walrus Foundation trademark, logo or other proprietary
information, or the layout and design of any page or form contained on a page, without Walrus
Foundation’s express written consent;</p>
</li>
<li>
<p>Access, tamper with, or use non-public areas of the Interface, Walrus Foundation’s computer
systems, or the technical delivery systems of Walrus Foundation’s providers;</p>
</li>
<li>
<p>Attempt to probe, scan or test the vulnerability of any Walrus Foundation system or network or
breach any security or authentication measures;</p>
</li>
<li>
<p>Avoid, bypass, remove, deactivate, impair, descramble or otherwise circumvent any
technological measure implemented by Walrus Foundation or any of Walrus Foundation’s providers
or any other third party (including another user) to protect the Interface;</p>
</li>
<li>
<p>Attempt to access or search the Interface or download content from the Interface using any
engine, software, tool, agent, device or mechanism (including spiders, robots, crawlers, data
mining tools or the like) other than the software and/or search agents provided by Walrus
Foundation or other generally available third-party web browsers;</p>
</li>
<li>
<p>Send any unsolicited or unauthorized advertising, promotional materials, email, junk mail,
spam, chain letters or other form of solicitation;</p>
</li>
<li>
<p>Use any meta tags or other hidden text or metadata utilizing a Walrus Foundation trademark,
logo, URL or product name without Walrus Foundation’s express written consent;</p>
</li>
<li>
<p>Forge any TCP/IP packet header or any part of the header information in any email or newsgroup
posting, or in any way use the Interface to send altered, deceptive or false
source-identifying information;</p>
</li>
<li>
<p>Attempt to decipher, decompile, disassemble or reverse engineer any of the software used to
provide the Interface;</p>
</li>
<li>
<p>Interfere with, or attempt to interfere with, the access of any user, host or network,
including, without limitation, sending a virus, exploiting any bug, overloading, flooding,
spamming, or mail-bombing the Interface;</p>
</li>
<li>
<p>Use the Interface for benchmarking or analysis in a manner that could, directly or indirectly,
interfere with, detract from, or otherwise harm the Interface or the Protocol;</p>
</li>
<li>
<p>Collect or store any personally identifiable information from the Interface from other users
of the Interface without their express permission;</p>
</li>
<li>
<p>Impersonate or misrepresent your affiliation with any person or entity;</p>
</li>
<li>
<p>Create or list any counterfeit items (including digital assets);</p>
</li>
<li>
<p>Fabricate in any way any transaction or process related thereto;</p>
</li>
<li>
<p>Engage or assist in any activity that violates any law, statute, ordinance, regulation, or
sanctions program, including but not limited to the U.S. Department of Treasury’s Office of
Foreign Assets Control (“OFAC”), or that involves proceeds of any unlawful activity (including
but not limited to money laundering, terrorist financing or deliberately engaging in
activities designed to adversely affect the performance of the Interface);</p>
</li>
<li>
<p>Engage in wash trading or other deceptive or manipulative trading activities;</p>
</li>
<li>
<p>Disguise or interfere in any way with the IP address of the computer you are using to access
or use the Interface or that otherwise prevents us from correctly identifying the IP address
of the computer you are using to access the Interface;</p>
</li>
<li>
<p>Transmit, exchange, or otherwise support the direct or indirect proceeds of criminal or
fraudulent activity; or</p>
</li>
<li>
<p>Violate any Applicable Law or regulation</p>
</li>
</ul>
<p>Walrus Foundation is not obligated to monitor access to or use of the Interface or to review or
edit any content. However, we have the right to do so for the purpose of operating the
Interface, to ensure compliance with these Terms and to comply with Applicable Law or other
legal requirements. We reserve the right, but are not obligated, to remove or disable access to
any content, including User Content, at any time and without notice, including, but not limited
to, if we, at our sole discretion, consider it objectionable or in violation of these Terms. We
have the right to investigate violations of these Terms or conduct that affects the Interface.
We may also consult and cooperate with law enforcement authorities to prosecute users who
violate the law.</p>
</li>
<li>
<p>Links to Third Party Websites or Resources</p>
<p>The Interface may allow you to access third-party websites, integrations, or other resources,
including the Protocol and any bridge between the Protocol and third party protocols
(collectively, “Third Party Resources”). We provide access only as a convenience and are not
responsible for the content, products or services on or available from those resources or links
displayed on such websites. You acknowledge sole responsibility for and assume all risk arising
from your use of any third-party resources. Our provision of access to any Third Party Resources
does not constitute approval, endorsement, or control of such Third Party Resources.</p>
</li>
<li>
<p>Termination</p>
<p>We may suspend or terminate your access to and use of the Interface, including suspending access
to or terminating your account, at our sole discretion, at any time and without notice to you.
You acknowledge and agree that we shall have no liability or obligation to you in such event and
that you will not be entitled to a refund of any amounts that you have already paid to us or any
third party, to the fullest extent permitted by Applicable Law. Upon any termination,
discontinuation or cancellation of the Interface or your account, the following Sections will
survive: 5(f), 7(b), 7(c), 7(e), 7(f), 8, 10 and 11-17.</p>
</li>
<li>
<p>Warranty Disclaimers</p>
<p>THE INTERFACE AND ANY CONTENT CONTAINED THEREIN IS PROVIDED “AS IS,” WITHOUT WARRANTY OF ANY
KIND. WITHOUT LIMITING THE FOREGOING, WE EXPLICITLY DISCLAIM ANY IMPLIED WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT AND NON-INFRINGEMENT, AND ANY
WARRANTIES ARISING OUT OF COURSE OF DEALING OR USAGE OF TRADE. WE MAKE NO WARRANTY THAT THE
INTERFACE WILL MEET YOUR REQUIREMENTS, BE AVAILABLE ON AN UNINTERRUPTED, SECURE, OR ERROR-FREE
BASIS. WE MAKE NO WARRANTY REGARDING THE QUALITY, ACCURACY, TIMELINESS, TRUTHFULNESS,
COMPLETENESS OR RELIABILITY OF ANY INFORMATION OR CONTENT ON THE INTERFACE. WALRUS FOUNDATION
FURTHER EXPRESSLY DISCLAIMS ALL LIABILITY OR RESPONSIBILITY IN CONNECTION WITH THIRD PARTY
SERVICES. NOTHING HEREIN NOR ANY USE OF OUR INTERFACE IN CONNECTION WITH THIRD PARTY SERVICES
CONSTITUTES OUR ENDORSEMENT, RECOMMENDATION OR ANY OTHER AFFILIATION OF OR WITH ANY THIRD PARTY
SERVICES.</p>
<p>WALRUS FOUNDATION DOES NOT REPRESENT OR WARRANT THAT ANY CONTENT ON THE INTERFACE IS ACCURATE,
COMPLETE, RELIABLE, CURRENT OR ERROR-FREE. WE WILL NOT BE LIABLE FOR ANY LOSS OF ANY KIND FROM
ANY ACTION TAKEN OR TAKEN IN RELIANCE ON MATERIAL OR INFORMATION CONTAINED ON THE INTERFACE.
WALRUS FOUNDATION CANNOT AND DOES NOT REPRESENT OR WARRANT THAT THE INTERFACE, ANY CONTENT
THEREIN, OR OUR SERVERS ARE FREE OF VIRUSES OR OTHER HARMFUL COMPONENTS. WE CANNOT GUARANTEE THE
SECURITY OF ANY DATA THAT YOU DISCLOSE ONLINE. YOU ACCEPT THE INHERENT SECURITY RISKS OF
PROVIDING INFORMATION AND DEALING ONLINE OVER THE INTERNET AND WILL NOT HOLD US RESPONSIBLE FOR
ANY BREACH OF SECURITY.</p>
<p>WALRUS FOUNDATION WILL NOT BE RESPONSIBLE OR LIABLE TO YOU FOR ANY LOSS AND TAKES NO
RESPONSIBILITY FOR, AND WILL NOT BE LIABLE TO YOU FOR, ANY USE OF THE INTERFACE, INCLUDING BUT
NOT LIMITED TO ANY LOSSES, DAMAGES OR CLAIMS ARISING FROM: (I) USER ERROR SUCH AS FORGOTTEN
PASSWORDS, INCORRECTLY CONSTRUCTED TRANSACTIONS, EXCEEDING TRANSFER LIMITS OF THIRD PARTY
RESOURCES OR THE PROTOCOL, OR MISTYPED WALLET ADDRESSES; (II) SERVER FAILURE OR DATA LOSS; (III)
BLOCKCHAIN NETWORKS, CRYPTOCURRENCY WALLETS, CORRUPT FILES, SOFTWARE ERRORS, OR BUGS; (IV)
UNAUTHORIZED ACCESS TO THE INTERFACE; OR (V) ANY THIRD PARTY ACTIVITIES, INCLUDING WITHOUT
LIMITATION THE USE OF VIRUSES, PHISHING, BRUTEFORCING OR OTHER MEANS OF ATTACK AGAINST ANY
BLOCKCHAIN NETWORK UNDERLYING THE INTERFACE.</p>
<p>THE INTERFACE MAY NOT BE AVAILABLE DUE TO ANY NUMBER OF FACTORS INCLUDING, BUT NOT LIMITED TO,
PERIODIC SYSTEM MAINTENANCE, SCHEDULED OR UNSCHEDULED, ACTS OF GOD, UNAUTHORIZED ACCESS,
VIRUSES, DENIAL OF SERVICE OR OTHER ATTACKS, TECHNICAL FAILURE OF THE INTERFACE AND/OR
TELECOMMUNICATIONS INFRASTRUCTURE OR DISRUPTION, AND THEREFORE WE EXPRESSLY DISCLAIM ANY EXPRESS
OR IMPLIED WARRANTY REGARDING THE USE AND/OR AVAILABILITY, ACCESSIBILITY, SECURITY OR
PERFORMANCE OF THE INTERFACE CAUSED BY SUCH FACTORS. WE DO NOT MAKE ANY REPRESENTATIONS OR
WARRANTIES AGAINST THE POSSIBILITY OF DELETION, MISDELIVERY OR FAILURE TO STORE COMMUNICATIONS,
PERSONALIZED SETTINGS OR OTHER DATA. SOME JURISDICTIONS DO NOT ALLOW THE EXCLUSION OF CERTAIN
WARRANTIES. ACCORDINGLY, SOME OF THE ABOVE DISCLAIMERS OF WARRANTIES MAY NOT APPLY TO YOU BUT
OTHERS REMAIN IN EFFECT.</p>
</li>
<li>
<p>Assumption of Risk</p>
<p>You are solely responsible for determining what, if any, Taxes and Gas Fees apply to your
transactions through the Interface. Neither Walrus Foundation nor any Walrus Foundation
affiliates or service providers are responsible for determining the Taxes that apply to such
transactions.</p>
<p>A lack of use or public interest in the creation and development of distributed ecosystems could
negatively impact the development of those ecosystems and related applications, and could
therefore also negatively impact the potential utility or value of User Content or certain
digital assets. By accessing and using the Interface, you represent that you understand the
inherent risks associated with using cryptographic and blockchain-based systems, and that you
have a working knowledge of their usage and intricacies.</p>
<p>You further understand that the markets for tokens and NFTs can be highly volatile due to
factors including (but not limited to) adoption, speculation, technology, security, and
regulation.</p>
<p>You acknowledge that the cost and speed of transacting with cryptographic and blockchain-based
systems are variable and may increase at any time. Accordingly, you understand and agree to
assume full responsibility for all of the risks of accessing and using and interacting with the
Interface.</p>
</li>
<li>
<p>Indemnity</p>
<p>You will indemnify, defend (at Walrus Foundation’s option) and hold Walrus Foundation and its
affiliates and their respective officers, directors, employees and agents, harmless from and
against any claims, disputes, demands, liabilities, damages, losses, and costs and expenses,
including, without limitation, reasonable legal and accounting fees arising out of or in any way
connected with: (a) your access to or use of the Interface, (b) your User Content, or (c) your
violation of these Terms. You may not settle or otherwise compromise any claim subject to this
Section without Walrus Foundation’s prior written approval.</p>
</li>
<li>
<p>Limitation of Liability</p>
<p>TO THE MAXIMUM EXTENT PERMITTED BY LAW, NEITHER WALRUS FOUNDATION NOR ITS SERVICE PROVIDERS
INVOLVED IN CREATING, PRODUCING, OR DELIVERING THE INTERFACE WILL BE LIABLE FOR ANY INCIDENTAL,
SPECIAL, EXEMPLARY OR CONSEQUENTIAL DAMAGES, OR DAMAGES FOR LOST PROFITS, LOST REVENUES, LOST
SAVINGS, LOST BUSINESS OPPORTUNITY, LOSS OF DATA OR GOODWILL, SERVICE INTERRUPTION, COMPUTER
DAMAGE OR SYSTEM FAILURE OR THE COST OF SUBSTITUTE SERVICES OF ANY KIND ARISING OUT OF OR IN
CONNECTION WITH THESE TERMS OR FROM THE USE OF OR INABILITY TO USE THE INTERFACE, WHETHER BASED
ON WARRANTY, CONTRACT, TORT (INCLUDING NEGLIGENCE), PRODUCT LIABILITY OR ANY OTHER LEGAL THEORY,
AND WHETHER OR NOT WALRUS FOUNDATION OR ITS SERVICE PROVIDERS HAS BEEN INFORMED OF THE
POSSIBILITY OF SUCH DAMAGE, EVEN IF A LIMITED REMEDY SET FORTH HEREIN IS FOUND TO HAVE FAILED OF
ITS ESSENTIAL PURPOSE. TO THE MAXIMUM EXTENT PERMITTED BY THE LAW, IN NO EVENT WILL WALRUS
FOUNDATION’S TOTAL LIABILITY ARISING OUT OF OR IN CONNECTION WITH THESE TERMS OR FROM THE USE OF
OR INABILITY TO USE THE INTERFACE EXCEED ONE HUNDRED DOLLARS ($100).THE EXCLUSIONS AND
LIMITATIONS OF DAMAGES SET FORTH ABOVE ARE FUNDAMENTAL ELEMENTS OF THE BASIS OF THE BARGAIN
BETWEEN WALRUS FOUNDATION AND YOU.</p>
</li>
<li>
<p>Governing Law and Forum Choice</p>
<p>These Terms will be governed by and construed in accordance with the laws of the Cayman Islands
without regard to its conflict of laws provisions.</p>
</li>
<li>
<p>dispute Resolution</p>
<p>a) Mandatory Arbitration of Disputes. We each agree that any dispute, claim or controversy
arising out of or relating to these Terms or the breach, termination, enforcement,
interpretation or validity thereof or the use of the Interface (collectively, “Disputes”) will
be resolved solely by binding, individual arbitration and not in a class, representative or
consolidated action or proceeding. You and Walrus Foundation agree that the Cayman Islands
Arbitration Law governs the interpretation and enforcement of these Terms, and that you and
Walrus Foundation are each waiving the right to a trial by jury or to participate in a class
action. This arbitration provision shall survive termination of these Terms.</p>
<p>b) Exceptions. The Parties retain the right to seek injunctive or other equitable relief from a
court to prevent (or enjoin) the infringement or misappropriation of our intellectual property
rights.</p>
<p>c) Conducting Arbitration and Arbitration Rules. These Terms will be governed by and construed
in accordance with the laws of the Cayman Islands, without regard to or application of conflicts
of law rules or principles.  Any dispute, controversy, difference or claim arising out of or
relating to this Agreement, including the formation, interpretation, breach or termination
thereof, including whether the claims asserted are arbitrable, will be referred to and finally
resolved by binding arbitration to be administered by the Cayman Islands International Centre
(CIAC) and governed by the Arbitration Act (as amended) of the Cayman Islands.  The arbitration
shall be conducted in the English language and the place of arbitration shall be in the Cayman
Islands.  The number of arbitrators shall be one.  The place of arbitration will be George Town,
Cayman Islands.  The decision of the sole arbitrator to any such dispute, controversy,
difference or claim shall be final and binding upon both parties.  If any litigation or
arbitration is necessary to enforce the terms of this Agreement, the prevailing party will be
entitled to have their attorney fees paid by the other party.  Each party waives any right it
may have to assert the doctrine of forum non conveniens, to assert that it is not subject to the
jurisdiction of such arbitration or courts or to object to venue to the extent any proceeding is
brought in accordance herewith. Injunctive and Declaratory Relief. Except as provided in Section
16(b) above, the arbitrator shall determine all issues of liability on the merits of any claim
asserted by either party and may award declaratory or injunctive relief only in favor of the
individual party seeking relief and only to the extent necessary to provide relief warranted by
that party’s individual claim. To the extent that you or we prevail on a claim and seek public
injunctive relief (that is, injunctive relief that has the primary purpose and effect of
prohibiting unlawful acts that threaten future injury to the public), the entitlement to and
extent of such relief must be litigated in a civil court of competent jurisdiction and not in
arbitration. The parties agree that litigation of any issues of public injunctive relief shall
be stayed pending the outcome of the merits of any individual claims in arbitration.</p>
<p>d) Class Action Waiver. YOU AND WALRUS FOUNDATION AGREE THAT EACH MAY BRING CLAIMS AGAINST THE
OTHER ONLY IN YOUR OR ITS INDIVIDUAL CAPACITY, AND NOT AS A PLAINTIFF OR CLASS MEMBER IN ANY
PURPORTED CLASS OR REPRESENTATIVE PROCEEDING. Further, if the parties’ Dispute is resolved
through arbitration, the arbitrator may not consolidate another person’s claims with your
claims, and may not otherwise preside over any form of a representative or class proceeding. If
this specific provision is found to be unenforceable, then the entirety of this Dispute
Resolution section shall be null and void.</p>
<p>e) Severability. With the exception of any of the provisions in Section 16(d) of these Terms
(“Class Action Waiver”), if an arbitrator or court of competent jurisdiction decides that any
part of these Terms is invalid or unenforceable, the other parts of these Terms will still
apply.</p>
</li>
<li>
<p>General Terms</p>
<p>a) Reservation of Rights. Walrus Foundation and its licensors exclusively own all right, title
and interest in and to the Interface, including all associated intellectual property rights. You
acknowledge that the Interface is protected by copyright, trademark, and other laws of the
United States and foreign countries. You agree not to remove, alter or obscure any copyright,
trademark, service mark or other proprietary rights notices incorporated in or accompanying the
Interface.</p>
<p>b) Entire Agreement. These Terms, including any addendum terms, constitute the entire and
exclusive understanding and agreement between Walrus Foundation and you regarding the Interface,
and these Terms supersede and replace all prior oral or written understandings or agreements
between Walrus Foundation and you regarding the Interface. If any provision of these Terms is
held invalid or unenforceable by an arbitrator or a court of competent jurisdiction, that
provision will be enforced to the maximum extent permissible and the other provisions of these
Terms will remain in full force and effect.</p>
<p>c) Assignment. Except where provided by Applicable Law in your jurisdiction, you may not assign
or transfer these Terms, by operation of law or otherwise, without Walrus Foundation’s prior
written consent. Any attempt by you to assign or transfer these Terms absent our consent or your
statutory right, will be null. Walrus Foundation may freely assign or transfer these Terms
without restriction. Subject to the foregoing, these Terms will bind and inure to the benefit of
the parties, their successors and permitted assigns.</p>
<p>d) Notices. Any notices or other communications provided by Walrus Foundation under these Terms
will be given: (i) via email; or (ii) by posting to the Interface. For notices made by email,
the date of receipt will be deemed the date on which such notice is transmitted. Waiver of
Rights. Walrus Foundation’s failure to enforce any right or provision of these Terms will not be
considered a waiver of such right or provision. The waiver of any such right or provision will
be effective only if in writing and signed by a duly authorized representative of Walrus
Foundation. Except as expressly set forth in these Terms, the exercise by either party of any of
its remedies under these Terms will be without prejudice to its other remedies under these Terms
or otherwise.</p>
</li>
<li>
<p>Contact Information</p>
<p>If you have any questions about these Terms or the Interface, please contact Walrus Foundation
at <a href="mailto:notices@walrus.xyz">notices@walrus.xyz</a>.</p>
</li>
</ol>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="docs/theme/tabs.js"></script>

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
